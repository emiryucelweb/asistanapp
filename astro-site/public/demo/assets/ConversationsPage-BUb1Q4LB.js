import{c as se,j as e,a as C,d as ue,e as Q,f as D,M as Z,g as F,h as E,U as fe,i as ve,k as ye,F as J,X as z,m as je,P as M,l as Ne}from"./index-B70CDX4p.js";import{r as n}from"./vendor-CdXbigxo.js";import{c as ke}from"./router-Bk68T6VO.js";import{u as we}from"./i18n-CvUHAAnz.js";import{M as Ce}from"./minimize-2-B8Cfg4u-.js";import{I as X}from"./image-DjzjERcE.js";import{V as q}from"./video-C3BvWpxR.js";import{P as Me}from"./paperclip-COtdcOdQ.js";import{I as te}from"./instagram-Dps8e53f.js";import{E as ee}from"./external-link-g_DgdpNy.js";import{F as ae}from"./facebook-CsypTuDN.js";import{G as re}from"./globe-BtASB1j-.js";import{M as Pe}from"./mail-Bk1VMlFD.js";import"./charts-CyRV38jT.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],p=se("phone-call",Se);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],P=se("phone-incoming",Ae),$e=()=>e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),c={instagram:{icon:e.jsx(te,{className:"w-5 h-5"}),color:"text-pink-600",bg:"bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500"},whatsapp:{icon:e.jsx($e,{}),color:"text-green-600",bg:"bg-green-500"},facebook:{icon:e.jsx(ae,{className:"w-5 h-5"}),color:"text-blue-600",bg:"bg-blue-600"},web:{icon:e.jsx(re,{className:"w-5 h-5"}),color:"text-orange-600",bg:"bg-orange-500"},phone:{icon:e.jsx(p,{className:"w-5 h-5"}),color:"text-purple-600",bg:"bg-gradient-to-br from-purple-500 to-purple-700"}},Qe=()=>{const{t,i18n:le}=we("admin"),[o,v]=n.useState("assistant"),[S,ne]=n.useState(""),[y,_]=n.useState("all"),[j,ie]=n.useState(!1),[a,A]=n.useState(null),[N,W]=n.useState(""),[h,$]=n.useState([]),[R,V]=n.useState(!1),[oe,T]=n.useState(!1),[de,k]=n.useState(!1),[g,H]=n.useState(!1),[d,ce]=n.useState([]),[b,xe]=n.useState([]),[Te,He]=n.useState(1),[me,Ie]=n.useState(!0),[K,O]=ke();n.useEffect(()=>{const s=r=>{r.key==="Escape"&&(g?H(!1):a&&A(null)),r.key==="F11"&&a&&(r.preventDefault(),H(!g))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[g,a]),n.useEffect(()=>{},[]),n.useEffect(()=>{const s=K.get("openConversation");if(s&&d.length>0){const r=d.find(l=>l.id===s);r&&(A(r),O({}))}},[K,d,O]),n.useEffect(()=>{const s=setInterval(()=>{const r=Date.now(),l=30*60*1e3;ce(i=>{const x=[],m=[];return i.forEach(f=>{r-f.lastMessageTime.getTime()>l?m.push(f):x.push(f)}),m.length>0&&xe(f=>[...m,...f]),x})},6e4);return()=>clearInterval(s)},[]);const ge=()=>{},pe=()=>{let s=[];const r=l=>l.messages.some(i=>i.sender==="agent"&&i.agentName&&i.agentName!=="AI Assistant");return o==="phone"?s=[...d,...b].filter(l=>l.channel==="phone"):o==="assistant"?s=d.filter(l=>l.channel!=="phone"&&!r(l)):o==="employee"?s=d.filter(l=>l.channel!=="phone"&&(r(l)||l.needsHelp||l.assignedTo==="human")):o==="past"&&(s=b.filter(l=>l.channel!=="phone")),s.filter(l=>{const i=l.customerName.toLowerCase().includes(S.toLowerCase())||l.lastMessage.toLowerCase().includes(S.toLowerCase()),x=y==="all"||l.channel===y,m=!j||l.needsHelp;return o==="phone"?i&&m:i&&x&&m})},Y=s=>{const l=new Date().getTime()-s.getTime(),i=Math.floor(l/6e4),x=Math.floor(l/36e5),m=Math.floor(l/864e5);return i<1?t("conversations.time.now"):i<60?t("conversations.time.minutesAgo",{count:i}):x<24?t("conversations.time.hoursAgo",{count:x}):m<7?t("conversations.time.daysAgo",{count:m}):s.toLocaleDateString(le.language==="tr"?"tr-TR":"en-US",{day:"2-digit",month:"short"})},I=s=>{const r=document.createElement("input");r.type="file",s==="image"?r.accept="image/*":s==="video"?r.accept="video/*":r.accept="*/*",r.multiple=!0,r.onchange=l=>{const i=Array.from(l.target.files||[]);$(x=>[...x,...i]),V(!1)},r.click()},he=s=>{$(r=>r.filter((l,i)=>i!==s))},B=()=>{!N.trim()&&h.length===0||(Ne.debug("Sending message:",{text:N,attachments:h}),W(""),$([]))},G=pe(),u=(o==="past"?b:d).filter(s=>s.needsHelp).length,be=[...d,...b].filter(s=>s.channel==="phone").length,L=d.filter(s=>s.isLiveCall).length,U=d.filter(s=>s.isUrgent).length,w=s=>{const r=Math.floor(s/60),l=s%60;return`${r}:${l.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:t("conversations.title")}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1",children:t("conversations.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[U>0&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 border-2 border-red-300 rounded-lg animate-pulse",children:[e.jsx(p,{className:"w-4 h-4 text-red-600 animate-bounce"}),e.jsxs("span",{className:"text-sm font-bold text-red-900",children:[U," ",t("conversations.filters.urgentCall")]})]}),L>0&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx(P,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium text-purple-900",children:[L," ",t("conversations.filters.liveCalls",{count:L})]})]}),u>0&&!U&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(C,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-sm font-medium text-amber-900",children:[u," ",t("conversations.filters.needsHelpWaiting",{count:u})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:t("conversations.searchPlaceholder"),value:S,onChange:s=>ne(s.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-2.5 text-sm bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 bg-gray-50 dark:bg-slate-900 p-1 rounded-lg border border-gray-200 dark:border-slate-700 overflow-x-auto",children:[e.jsx("button",{onClick:()=>_("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="all"?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:t("conversations.filters.all")}),Object.keys(c).map(s=>e.jsx("button",{onClick:()=>_(s),className:`p-2 rounded-md transition-colors ${y===s?`${c[s].color} bg-white dark:bg-slate-800 shadow-sm`:"text-gray-400 hover:text-gray-600 dark:text-gray-400"}`,title:s,children:c[s].icon},s))]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mt-4 sm:mt-6",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-slate-700 p-1 rounded-lg overflow-x-auto",children:[e.jsxs("button",{onClick:()=>v("assistant"),className:`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex items-center gap-1.5 ${o==="assistant"?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(Q,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:t("conversations.tabs.assistant")}),e.jsx("span",{className:"sm:hidden",children:t("conversations.tabs.assistantShort")}),e.jsx("span",{className:"ml-1 px-1.5 sm:px-2 py-0.5 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 text-xs font-semibold rounded-full",children:d.filter(s=>s.channel!=="phone"&&!s.messages.some(r=>r.sender==="agent"&&r.agentName&&r.agentName!=="AI Assistant")).length})]}),e.jsxs("button",{onClick:()=>v("employee"),className:`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex items-center gap-1.5 ${o==="employee"?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(D,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:t("conversations.tabs.employee")}),e.jsx("span",{className:"sm:hidden",children:t("conversations.tabs.employeeShort")}),e.jsx("span",{className:"ml-1 px-1.5 sm:px-2 py-0.5 bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 text-xs font-semibold rounded-full",children:d.filter(s=>s.channel!=="phone"&&(s.messages.some(r=>r.sender==="agent"&&r.agentName&&r.agentName!=="AI Assistant")||s.needsHelp||s.assignedTo==="human")).length})]}),e.jsxs("button",{onClick:()=>v("past"),className:`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${o==="past"?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,title:t("conversations.autoArchiveInfo"),children:[e.jsx("span",{className:"hidden sm:inline",children:t("conversations.tabs.past")}),e.jsx("span",{className:"sm:hidden",children:t("conversations.tabs.pastShort")}),e.jsxs("span",{className:"ml-1 sm:ml-2 px-1.5 sm:px-2 py-0.5 bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300 text-xs font-semibold rounded-full",children:[b.length,"+"]})]}),e.jsxs("button",{onClick:()=>v("phone"),className:`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap ${o==="phone"?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(p,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:t("conversations.tabs.phone")}),e.jsx("span",{className:"sm:hidden",children:t("conversations.tabs.phoneShort")}),e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 text-xs font-semibold rounded-full ${o==="phone"?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300":"bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300"}`,children:be})]})]}),e.jsxs("button",{onClick:()=>ie(!j),className:`px-3 sm:px-6 py-2 text-xs sm:text-sm font-medium border rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap ${j?"bg-amber-500 text-white border-amber-600 hover:bg-amber-600 shadow-sm":"text-amber-700 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900/30"}`,children:[e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:t("conversations.tabs.needsHelp")}),e.jsx("span",{className:"sm:hidden",children:t("conversations.tabs.needsHelpShort")}),u>0&&e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 text-xs font-semibold rounded-full ${j?"bg-amber-600 text-white":"bg-amber-200 dark:bg-amber-800 text-amber-900 dark:text-amber-100"}`,children:u})]})]})]})}),e.jsx("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-slate-700 max-h-[400px] sm:max-h-[500px] lg:max-h-[calc(100vh-240px)] overflow-y-auto",children:G.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:t("conversations.noConversationsFound")})]}):e.jsxs(e.Fragment,{children:[G.map(s=>e.jsx("button",{onClick:()=>A(s),className:`w-full p-4 hover:bg-gray-50 dark:hover:bg-slate-700 dark:bg-slate-900 transition-colors text-left relative ${(a==null?void 0:a.id)===s.id?"bg-orange-50":""} ${s.isUrgent?"border-l-4 border-red-500 bg-red-50/30":s.needsHelp?"border-l-4 border-amber-500":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:`w-12 h-12 ${c[s.channel].bg} rounded-full flex items-center justify-center text-white`,children:s.customerAvatar?e.jsx("img",{src:s.customerAvatar,alt:"",className:"w-full h-full rounded-full object-cover"}):e.jsx(F,{className:"w-6 h-6"})}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 ${c[s.channel].bg} rounded-full flex items-center justify-center text-white border-2 border-white`,children:c[s.channel].icon})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm truncate",children:s.customerName}),s.needsHelp&&e.jsx(C,{className:"w-4 h-4 text-amber-600 flex-shrink-0","aria-label":t("conversations.needsHelp")})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0",children:Y(s.lastMessageTime)})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.lastMessage}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.isUrgent&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full animate-pulse",children:[e.jsx(p,{className:"w-3 h-3"}),t("conversations.badges.urgent")]}),s.isLiveCall&&!s.isUrgent&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-800 text-xs font-semibold rounded-full",children:[e.jsx(P,{className:"w-3 h-3 animate-pulse"}),t("conversations.badges.liveCall"),": ",w(s.callDuration||0)]}),s.unreadCount>0&&e.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-0.5 bg-orange-500 text-white text-xs font-semibold rounded-full",children:[s.unreadCount," ",t("conversations.badges.newMessages",{count:s.unreadCount})]}),s.needsHelp&&!s.isLiveCall&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-800 text-xs font-semibold rounded-full",children:[e.jsx(D,{className:"w-3 h-3"}),s.assignedAgent||t("conversations.badges.humanAssistance")]}),s.assignedTo==="ai"&&!s.needsHelp&&!s.isLiveCall&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:[e.jsx(Q,{className:"w-3 h-3"}),t("conversations.badges.ai")]})]})]})]})},s.id)),o==="past"&&me&&e.jsx("button",{onClick:ge,className:"w-full p-4 text-center text-sm font-medium text-orange-600 hover:bg-orange-50 transition-colors",children:t("conversations.loadMore")})]})})}),e.jsx("div",{className:`lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden ${g?"fixed inset-0 z-50 rounded-none":""}`,children:a?e.jsxs("div",{className:`flex flex-col ${g?"h-screen":"h-[500px] sm:h-[600px] lg:h-[calc(100vh-240px)]"}`,children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-10 h-10 ${c[a.channel].bg} rounded-full flex items-center justify-center text-white`,children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-5 h-5 ${c[a.channel].bg} rounded-full flex items-center justify-center text-white border-2 border-white`,children:e.jsx("div",{className:"scale-75",children:c[a.channel].icon})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a.customerName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),t("conversations.conversation.lastMessage")," ",Y(a.lastMessageTime)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.isLiveCall&&e.jsxs("button",{className:`px-4 py-2 text-sm font-bold rounded-lg transition-all flex items-center gap-2 ${a.isUrgent?"bg-red-500 text-white hover:bg-red-600 animate-pulse":"bg-purple-500 text-white hover:bg-purple-600"}`,children:[e.jsx(p,{className:"w-4 h-4"}),a.isUrgent?t("conversations.actions.urgentJoinCall"):t("conversations.actions.joinCall")]}),e.jsxs("button",{onClick:()=>k(!0),className:"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),t("conversations.actions.assign")]}),e.jsx("button",{onClick:()=>T(!0),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:t("conversations.actions.viewProfile")}),e.jsx("button",{onClick:()=>H(!g),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:t(g?"conversations.fullscreen.exit":"conversations.fullscreen.enter"),children:g?e.jsx(Ce,{className:"w-5 h-5"}):e.jsx(ve,{className:"w-5 h-5"})})]})]})}),a.isUrgent&&e.jsx("div",{className:"mx-6 mt-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0 animate-bounce"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-red-900 mb-1",children:t("conversations.alerts.urgentTitle")}),e.jsx("p",{className:"text-sm text-red-800",children:t("conversations.alerts.urgentMessage")}),e.jsxs("p",{className:"text-xs text-red-700 mt-2 flex items-center gap-2",children:[e.jsx(E,{className:"w-3 h-3"}),t("conversations.conversation.callDuration")," ",e.jsx("strong",{children:w(a.callDuration||0)})]})]})]})}),a.isLiveCall&&!a.isUrgent&&e.jsx("div",{className:"mx-6 mt-6 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(P,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-900 mb-1",children:t("conversations.alerts.liveCallTitle")}),e.jsx("p",{className:"text-sm text-purple-800",children:a.assignedTo==="ai"?t("conversations.alerts.liveCallAiMessage"):t("conversations.alerts.liveCallAgentMessage",{agentName:a.assignedAgent})}),e.jsxs("p",{className:"text-xs text-purple-700 mt-2 flex items-center gap-2",children:[e.jsx(E,{className:"w-3 h-3"}),t("conversations.conversation.callDuration")," ",e.jsx("strong",{children:w(a.callDuration||0)})]})]})]})}),a.needsHelp&&a.aiStuckReason&&!a.isLiveCall&&e.jsx("div",{className:"mx-6 mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 dark:border-amber-600 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-amber-900 dark:text-amber-200 mb-1",children:t("conversations.alerts.aiStuckTitle")}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-300",children:a.aiStuckReason}),a.assignedAgent&&e.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-2 flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),e.jsx("strong",{children:a.assignedAgent})," ",t("conversations.conversation.takingOver")]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:a.messages.map((s,r)=>e.jsx("div",{className:`flex ${s.sender==="agent"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${s.sender==="agent"?"order-2":"order-1"}`,children:[s.isVoiceTranscript&&e.jsxs("div",{className:`flex items-center gap-2 mb-1 text-xs ${s.sender==="agent"?"justify-end":"justify-start"}`,children:[e.jsx(ye,{className:"w-3 h-3 text-purple-500"}),e.jsx("span",{className:"text-purple-600 font-medium",children:t("conversations.alerts.voiceTranscript")}),s.voiceDuration&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(",w(s.voiceDuration),")"]})]}),e.jsx("div",{className:`rounded-2xl px-4 py-2.5 ${s.sender==="agent"?s.isVoiceTranscript?"bg-purple-500 text-white rounded-br-sm":"bg-orange-500 text-white rounded-br-sm":s.isVoiceTranscript?"bg-purple-50 dark:bg-purple-900/30 text-gray-900 dark:text-gray-100 border border-purple-200 dark:border-purple-700 rounded-bl-sm":"bg-gray-100 dark:bg-slate-700 text-gray-900 dark:text-gray-100 rounded-bl-sm"}`,children:e.jsx("p",{className:"text-sm",children:s.text})}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${s.sender==="agent"?"justify-end":"justify-start"}`,children:[e.jsx("p",{className:"text-xs text-gray-400",children:s.timestamp.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}),s.sender==="agent"&&s.agentName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-300",children:"â€¢"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:s.agentName})]})]})]})},s.id))}),e.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900",children:[h.length>0&&e.jsx("div",{className:"mb-2 sm:mb-3 flex flex-wrap gap-1.5 sm:gap-2",children:h.map((s,r)=>e.jsxs("div",{className:"relative group bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 flex items-center gap-1.5 sm:gap-2",children:[s.type.startsWith("image/")&&e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0"}),s.type.startsWith("video/")&&e.jsx(q,{className:"w-3 h-3 sm:w-4 sm:h-4 text-purple-500 flex-shrink-0"}),!s.type.startsWith("image/")&&!s.type.startsWith("video/")&&e.jsx(J,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 dark:text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 max-w-[100px] sm:max-w-[150px] truncate",children:s.name}),e.jsx("button",{onClick:()=>he(r),className:"ml-1 text-gray-400 hover:text-red-500 transition-colors flex-shrink-0","aria-label":`${s.name} dosyasÄ±nÄ± kaldÄ±r`,children:e.jsx(z,{className:"w-3 h-3"})})]},r))}),e.jsxs("div",{className:"flex items-end gap-1 sm:gap-2",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("button",{onClick:()=>V(!R),className:"p-2 sm:p-2.5 text-gray-600 dark:text-gray-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:t("conversations.addFile"),"aria-label":t("conversations.addFile"),children:e.jsx(Me,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),R&&e.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg overflow-hidden z-10 min-w-[160px]",children:[e.jsxs("button",{onClick:()=>I("image"),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors",children:[e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t("conversations.attachments.photo")})]}),e.jsxs("button",{onClick:()=>I("video"),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors",children:[e.jsx(q,{className:"w-3 h-3 sm:w-4 sm:h-4 text-purple-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t("conversations.attachments.video")})]}),e.jsxs("button",{onClick:()=>I("file"),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors",children:[e.jsx(J,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 dark:text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t("conversations.attachments.file")})]})]})]}),e.jsx("input",{type:"text",value:N,onChange:s=>W(s.target.value),onKeyPress:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),B())},placeholder:t("conversations.messagePlaceholder"),className:"flex-1 min-w-0 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"}),e.jsxs("button",{onClick:B,disabled:!N.trim()&&h.length===0,className:"px-3 sm:px-6 py-2 sm:py-2.5 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 sm:gap-2 flex-shrink-0","aria-label":t("conversations.sendMessage"),children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:t("conversations.actions.send")})]})]})]})]}):e.jsx("div",{className:"h-[calc(100vh-240px)] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:t("conversations.conversation.selectConversation")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("conversations.conversation.selectToStart")})]})})})]})}),oe&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 ${c[a.channel].bg} rounded-full flex items-center justify-center text-white`,children:e.jsx(F,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100",children:a.customerName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1",children:[c[a.channel].icon,e.jsx("span",{className:"ml-1",children:a.channel==="web"?"Web Widget":a.channel.charAt(0).toUpperCase()+a.channel.slice(1)})]})]})]}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[a.customerProfile.instagram&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-pink-100 dark:border-pink-800",children:[e.jsx(te,{className:"w-5 h-5 text-pink-600 dark:text-pink-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:t("conversations.profile.instagram.username")}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:a.customerProfile.instagram.username}),e.jsxs("a",{href:a.customerProfile.instagram.profileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 font-medium",children:[t("conversations.profile.instagram.visitProfile"),e.jsx(ee,{className:"w-3 h-3"})]})]})]})}),a.customerProfile.phone&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800",children:[e.jsx(p,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:t("conversations.profile.phone.number")}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:a.customerProfile.phone.phoneNumber}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("a",{href:`tel:${a.customerProfile.phone.phoneNumber.replace(/\s+/g,"")}`,className:"inline-flex items-center gap-1 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium",children:[t("conversations.profile.phone.call"),e.jsx(M,{className:"w-3 h-3"})]}),a.isLiveCall&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 text-xs font-semibold rounded-full",children:[e.jsx(P,{className:"w-3 h-3 animate-pulse"}),t("conversations.profile.phone.liveCall")]})]})]})]})}),a.customerProfile.whatsapp&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-800",children:[e.jsx(M,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:t("conversations.profile.whatsapp.number")}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:a.customerProfile.whatsapp.phoneNumber}),e.jsxs("a",{href:`tel:${a.customerProfile.whatsapp.phoneNumber.replace(/\s+/g,"")}`,className:"inline-flex items-center gap-1 text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 font-medium",children:[t("conversations.profile.whatsapp.call"),e.jsx(M,{className:"w-3 h-3"})]})]})]})}),a.customerProfile.facebook&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsx(ae,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:t("conversations.profile.facebook.profile")}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:a.customerProfile.facebook.name}),e.jsxs("a",{href:a.customerProfile.facebook.profileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:[t("conversations.profile.facebook.visitProfile"),e.jsx(ee,{className:"w-3 h-3"})]})]})]})}),a.customerProfile.web&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-100 dark:border-orange-800 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(re,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:t("conversations.profile.web.title")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:t("conversations.profile.web.fullName")}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[a.customerProfile.web.firstName," ",a.customerProfile.web.lastName]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1 flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3"}),t("conversations.profile.web.email")]}),e.jsx("a",{href:`mailto:${a.customerProfile.web.email}`,className:"text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",children:a.customerProfile.web.email})]}),a.customerProfile.web.phoneNumber&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),t("conversations.profile.web.phoneOptional")]}),e.jsx("a",{href:`tel:${a.customerProfile.web.phoneNumber.replace(/\s+/g,"")}`,className:"text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",children:a.customerProfile.web.phoneNumber})]})]})]})})]}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900 rounded-b-2xl",children:e.jsx("button",{onClick:()=>T(!1),className:"w-full px-4 py-2.5 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 transition-colors",children:t("conversations.actions.close")})})]})}),de&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl max-w-md w-full shadow-xl",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t("conversations.assignModal.title")}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:t("conversations.assignModal.selectAgent")}),e.jsx("div",{className:"space-y-2",children:[{id:"1",name:"AyÅŸe YÄ±lmaz",avatar:"ðŸ‘©",status:"online",conversations:3},{id:"2",name:"Mehmet Kaya",avatar:"ðŸ‘¨",status:"online",conversations:5},{id:"3",name:"Zeynep Demir",avatar:"ðŸ‘©",status:"busy",conversations:8},{id:"4",name:"Ali YÄ±ldÄ±z",avatar:"ðŸ‘¨",status:"offline",conversations:0}].map(s=>e.jsxs("button",{onClick:()=>{alert(t("conversations.assignedTo",{name:s.name})),k(!1)},className:"w-full p-3 border border-gray-200 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:s.avatar}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[s.conversations," ",t("conversations.assignModal.activeConversations",{count:s.conversations})]})]})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${s.status==="online"?"bg-green-500":s.status==="busy"?"bg-yellow-500":"bg-gray-400"}`})]},s.id))})]})}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900 rounded-b-2xl",children:e.jsx("button",{onClick:()=>k(!1),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",children:t("conversations.actions.cancel")})})]})})]})};export{Qe as default};
//# sourceMappingURL=ConversationsPage-BUb1Q4LB.js.map
