{"version":3,"file":"sentry-CdHtNazy.js","sources":["../../src/shared/utils/sentry.ts"],"sourcesContent":[" \n// NOTE: Infrastructure/utility file - `any` used for generic types & external library interfaces\n\n/**\n * Sentry Error Tracking (Simplified)\n * \n * Basic Sentry setup for error tracking\n * Advanced features can be added when needed\n * \n * @module shared/utils/sentry\n */\n\nimport * as Sentry from '@sentry/react';\nimport { logger } from '@/shared/utils/logger';\n\n/**\n * Sentry configuration\n */\nconst SENTRY_CONFIG = {\n  dsn: import.meta.env.VITE_SENTRY_DSN || '',\n  environment: import.meta.env.VITE_SENTRY_ENVIRONMENT || import.meta.env.VITE_ENV || 'development',\n  release: import.meta.env.VITE_APP_VERSION || '1.0.0',\n  tracesSampleRate: parseFloat(import.meta.env.VITE_SENTRY_TRACE_SAMPLE_RATE || '0.1'),\n  replaySampleRate: 0.1, // 10% of sessions\n  enabled: !!import.meta.env.VITE_SENTRY_DSN && import.meta.env.VITE_ENV !== 'development',\n} as const;\n\n/**\n * Initialize Sentry\n */\nexport function initializeSentry(): void {\n  if (!SENTRY_CONFIG.enabled) {\n    logger.debug('[Sentry] Error tracking disabled (no DSN or development mode)');\n    return;\n  }\n\n  try {\n    Sentry.init({\n      dsn: SENTRY_CONFIG.dsn,\n      environment: SENTRY_CONFIG.environment,\n      release: SENTRY_CONFIG.release,\n      tracesSampleRate: SENTRY_CONFIG.tracesSampleRate,\n      \n      // Session Replay\n      replaysSessionSampleRate: SENTRY_CONFIG.replaySampleRate,\n      replaysOnErrorSampleRate: 1.0, // 100% of errors\n\n      // Integrations\n      integrations: [\n        Sentry.replayIntegration({\n          maskAllText: false,\n          blockAllMedia: false,\n        }),\n      ],\n\n      // Ignore common errors\n      ignoreErrors: [\n        'ResizeObserver loop limit exceeded',\n        'Non-Error promise rejection captured',\n        'Network request failed',\n        'Failed to fetch',\n      ],\n\n      // Before send hook\n      beforeSend(event, _hint) {\n        // Filter out errors in development\n        if (SENTRY_CONFIG.environment === 'development') {\n          logger.debug('[Sentry] Would send error:', event);\n          return null;\n        }\n\n        // Log error for debugging\n        logger.error('[Sentry] Sending error:', event);\n        return event;\n      },\n    });\n\n    logger.debug('[Sentry] Error tracking initialized', {\n      environment: SENTRY_CONFIG.environment,\n      release: SENTRY_CONFIG.release,\n    });\n  } catch (error) {\n    logger.error('[Sentry] Failed to initialize:', error);\n  }\n}\n\n/**\n * Capture exception\n */\nexport function captureSentryException(\n  error: Error,\n  context?: Record<string, any>\n): string | undefined {\n  if (!SENTRY_CONFIG.enabled) {\n    return undefined;\n  }\n\n  return Sentry.captureException(error, {\n    extra: context,\n  });\n}\n\n/**\n * Capture message\n */\nexport function captureSentryMessage(\n  message: string,\n  level: Sentry.SeverityLevel = 'info',\n  context?: Record<string, any>\n): string | undefined {\n  if (!SENTRY_CONFIG.enabled) {\n    return undefined;\n  }\n\n  return Sentry.captureMessage(message, {\n    level,\n    extra: context,\n  });\n}\n\n/**\n * Add breadcrumb\n */\nexport function addSentryBreadcrumb(\n  message: string,\n  data?: Record<string, any>,\n  level?: Sentry.SeverityLevel,\n  category?: string\n): void {\n  if (!SENTRY_CONFIG.enabled) {\n    return;\n  }\n\n  Sentry.addBreadcrumb({\n    message,\n    data,\n    level: level || 'info',\n    category: category || 'custom',\n  });\n}\n\n/**\n * Set user context\n */\nexport function setSentryUser(user: {\n  id?: string;\n  email?: string;\n  username?: string;\n  [key: string]: any;\n}): void {\n  if (!SENTRY_CONFIG.enabled) {\n    return;\n  }\n\n  Sentry.setUser(user);\n}\n\n/**\n * Clear user context\n */\nexport function clearSentryUser(): void {\n  if (!SENTRY_CONFIG.enabled) {\n    return;\n  }\n\n  Sentry.setUser(null);\n}\n\n/**\n * Set tag\n */\nexport function setSentryTag(key: string, value: string): void {\n  if (!SENTRY_CONFIG.enabled) {\n    return;\n  }\n\n  Sentry.setTag(key, value);\n}\n\n/**\n * Set context\n */\nexport function setSentryContext(\n  name: string,\n  context: Record<string, any>\n): void {\n  if (!SENTRY_CONFIG.enabled) {\n    return;\n  }\n\n  Sentry.setContext(name, context);\n}\n\n/**\n * Wrap component with Sentry error boundary\n */\nexport function withSentryErrorBoundary<P extends Record<string, any>>(\n  Component: React.ComponentType<P>,\n  options?: {\n    fallback?: React.ReactElement;\n    showDialog?: boolean;\n  }\n): React.ComponentType<P> {\n  if (!SENTRY_CONFIG.enabled) {\n    return Component;\n  }\n\n  const config: any = {\n    showDialog: options?.showDialog || false,\n  };\n\n  if (options?.fallback) {\n    config.fallback = options.fallback;\n  }\n\n  return Sentry.withErrorBoundary(Component, config);\n}\n\n// Auto-initialize on import\ninitializeSentry();\n"],"names":["initializeSentry","logger","captureSentryException","error","context","captureSentryMessage","message","level","addSentryBreadcrumb","data","category"],"mappings":"0JA8BO,SAASA,GAAyB,CACX,CAC1BC,EAAO,MAAM,+DAA+D,EAC5E,MACF,CAkDF,CAKO,SAASC,EACdC,EACAC,EACoB,CAQtB,CAKO,SAASC,EACdC,EACAC,EAA8B,OAC9BH,EACoB,CAStB,CAKO,SAASI,EACdF,EACAG,EACAF,EACAG,EACM,CAWR,CAgFAV,EAAA"}