import{c as U,a7 as x,l as i,u as q,H as B,j as e,af as G,X as Y,g as D,P as z,v as V,q as H,r as W,A as X,Y as Q,h as Z,x as u,w as p,ag as ee,ah as ae,ai as L}from"./index-BqAy8n8z.js";import{r as d}from"./vendor-CdXbigxo.js";import{u as te}from"./i18n-CvUHAAnz.js";import{S as se,K as re}from"./save-BHJ8EKUa.js";import{M}from"./mail-DMnm4Ftm.js";import{C as ne}from"./calendar-OwLPMl_W.js";import{G as ie}from"./globe-BMY7PyNq.js";import"./charts-CyRV38jT.js";import"./router-Bk68T6VO.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],oe=U("pen",le),ce={requestPasswordReset:async a=>(await x.post("/auth/reset-password",{email:a})).data,changePassword:async a=>(await x.post("/auth/change-password",a)).data,verifyResetToken:async a=>(await x.get(`/auth/verify-reset-token/${a}`)).data,resetPassword:async(a,s)=>(await x.post("/auth/reset-password/confirm",{token:a,newPassword:s})).data},h="agent_preferences",de=300,f={emailNotifications:!0,pushNotifications:!0,desktopNotifications:!0,soundEnabled:!0,callSounds:!0,chatSounds:!0,language:"tr",autoAssign:!0,theme:"light"};class ge{async getAll(){await this.simulateNetworkDelay();try{const s=localStorage.getItem(h);if(!s)return i.debug("[MOCK] No preferences found, returning defaults"),{...f};const r=JSON.parse(s);return i.debug("[MOCK] Preferences loaded from localStorage",r),{...f,...r}}catch(s){return i.error("[MOCK] Failed to load preferences",s),{...f}}}async update(s,r){await this.simulateNetworkDelay();try{const m={...await this.getAll(),[s]:r};return localStorage.setItem(h,JSON.stringify(m)),i.debug("[MOCK] Preference updated",{key:s,value:r}),m}catch(o){throw i.error("[MOCK] Failed to save preference",o),new Error("Failed to save preference")}}async updateMultiple(s){await this.simulateNetworkDelay();try{const o={...await this.getAll(),...s};return localStorage.setItem(h,JSON.stringify(o)),i.debug("[MOCK] Preferences updated",{preferences:s}),o}catch(r){throw i.error("[MOCK] Failed to save preferences",r),new Error("Failed to save preferences")}}async reset(){await this.simulateNetworkDelay();try{return localStorage.setItem(h,JSON.stringify(f)),i.debug("[MOCK] Preferences reset to defaults"),{...f}}catch(s){throw i.error("[MOCK] Failed to reset preferences",s),new Error("Failed to reset preferences")}}async simulateNetworkDelay(){return new Promise(s=>setTimeout(s,de))}}const k=new ge;i.info("[PreferencesService] Using MOCK (localStorage) implementation");const je=()=>{const{t:a,i18n:s}=te("agent"),{user:r}=q(),{theme:o,toggleTheme:m}=B(),[O,v]=d.useState(!1),[S,P]=d.useState(!1),[E,y]=d.useState(!1),[c,C]=d.useState({name:"",email:"",phone:"",bio:""}),[b,N]=d.useState(c),[F,A]=d.useState(!1),[l,j]=d.useState({emailNotifications:!0,pushNotifications:!0,desktopNotifications:!0,soundEnabled:!0,callSounds:!0,chatSounds:!0,language:s.language||"tr",autoAssign:!0});d.useEffect(()=>{(async()=>{try{v(!0);const n=await k.getAll();j(n),n.language&&n.language!==s.language&&await s.changeLanguage(n.language),i.debug("Preferences loaded",n)}catch(n){i.error("Failed to load preferences",n)}finally{v(!1)}})()},[s]),d.useEffect(()=>{if(r){const t={name:r.name||a("profile.defaultName"),email:r.email||a("profile.defaultEmail"),phone:"",bio:""};C(t),N(t)}},[r,a]);const T=async()=>{if(r!=null&&r.id)try{C(b),y(!1),u(a("profile.profileUpdated")),i.debug("Profile updated (mock)",b)}catch(t){i.error("Failed to update profile",t),p(a("profile.profileUpdateFailed"))}},K=()=>{N(c),y(!1)},R=async()=>{if(!c.email){p(a("profile.security.emailNotFound"));return}A(!0);const t=ae(a("profile.security.sendingResetEmail"));try{await ce.requestPasswordReset(c.email),L(t),u(a("profile.security.resetEmailSent",{email:c.email}),5e3)}catch(n){L(t),i.error("Password reset failed",n),p(a("profile.security.resetEmailFailed"))}finally{A(!1)}},g=async(t,n)=>{const _=l[t];j(w=>({...w,[t]:n})),P(!0);try{await k.update(t,n),t==="language"&&typeof n=="string"?(await s.changeLanguage(n),u(a("profile.languageChanged"))):u(a("profile.preferenceSaved")),i.debug("Preference saved",{key:t,value:n})}catch(w){j(J=>({...J,[t]:_})),i.error("Failed to save preference",w),p(a("profile.preferencesFailed"))}finally{P(!1)}},$=async()=>{const t=o==="dark"?"light":"dark";m();try{await k.update("theme",t),i.debug("Theme preference saved",{theme:t})}catch(n){i.error("Failed to save theme preference",n)}},I=()=>ee(new Date,s.language,{year:"numeric",month:"long",day:"numeric"});return O?e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(G,{})})}):e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:a("profile.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a("profile.subtitle")})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:a("profile.sections.profileInfo")}),E?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",type:"button",children:[e.jsx(Y,{className:"w-4 h-4"}),a("common:cancel")]}),e.jsxs("button",{onClick:T,disabled:S,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",type:"button",children:[S?e.jsx("div",{className:"flex items-center justify-center gap-0.5 w-4 h-4",children:[0,1,2].map(t=>e.jsx("div",{className:"w-1 h-1 rounded-full bg-white animate-bounce",style:{animationDelay:`${t*.15}s`,animationDuration:"0.6s"}},t))}):e.jsx(se,{className:"w-4 h-4"}),a("common:save")]})]}):e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",type:"button",children:[e.jsx(oe,{className:"w-4 h-4"}),a("profile.edit")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:E?e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"agent-name",className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(D,{className:"w-4 h-4"}),a("profile.fields.name")]}),e.jsx("input",{id:"agent-name",type:"text",value:b.name,onChange:t=>N(n=>({...n,name:t.target.value})),className:"w-full px-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(D,{className:"w-4 h-4"}),a("profile.fields.name")]}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:c.name})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(M,{className:"w-4 h-4"}),a("profile.fields.email")]}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:c.email}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("profile.fields.emailImmutable")})]}),c.phone&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(z,{className:"w-4 h-4"}),a("profile.fields.phone")]}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:c.phone})]}),(r==null?void 0:r.role)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(V,{className:"w-4 h-4"}),a("profile.fields.role")]}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 capitalize",children:r.role})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ne,{className:"w-4 h-4"}),a("profile.fields.joinDate")]}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:I()})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:a("profile.sections.security")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a("profile.security.passwordReset")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a("profile.security.sendResetLink")})]}),e.jsxs("button",{onClick:R,disabled:F,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors disabled:opacity-50",type:"button",children:[F?e.jsx("div",{className:"flex items-center justify-center gap-0.5 w-4 h-4",children:[0,1,2].map(t=>e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-700 dark:bg-gray-300 animate-bounce",style:{animationDelay:`${t*.15}s`,animationDuration:"0.6s"}},t))}):e.jsx(re,{className:"w-4 h-4"}),a("profile.security.resetButton")]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6",children:a("profile.sections.preferences")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[o==="dark"?e.jsx(H,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):e.jsx(W,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("profile.preferences.theme.label")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a(o==="dark"?"profile.preferences.theme.dark":"profile.preferences.theme.light")})]})]}),e.jsx("button",{onClick:$,"aria-label":a("profile.settingsLabels.changeTheme"),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 bg-gray-300 dark:bg-orange-500",type:"button",children:e.jsx("span",{className:`${o==="dark"?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("profile.preferences.emailNotifications.label")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a("profile.preferences.emailNotifications.description")})]})]}),e.jsx("button",{onClick:()=>g("emailNotifications",!l.emailNotifications),"aria-label":a("profile.settingsLabels.emailNotifications"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${l.emailNotifications?"bg-orange-500":"bg-gray-300 dark:bg-gray-600"}`,type:"button",children:e.jsx("span",{className:`${l.emailNotifications?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("profile.preferences.pushNotifications.label")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a("profile.preferences.pushNotifications.description")})]})]}),e.jsx("button",{onClick:()=>g("pushNotifications",!l.pushNotifications),"aria-label":a("profile.settingsLabels.pushNotifications"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${l.pushNotifications?"bg-orange-500":"bg-gray-300 dark:bg-gray-600"}`,type:"button",children:e.jsx("span",{className:`${l.pushNotifications?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("profile.preferences.soundEffects.label")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a("profile.preferences.soundEffects.description")})]})]}),e.jsx("button",{onClick:()=>g("soundEnabled",!l.soundEnabled),"aria-label":a("profile.settingsLabels.soundEffects"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${l.soundEnabled?"bg-orange-500":"bg-gray-300 dark:bg-gray-600"}`,type:"button",children:e.jsx("span",{className:`${l.soundEnabled?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("profile.preferences.autoAssign.label")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a("profile.preferences.autoAssign.description")})]})]}),e.jsx("button",{onClick:()=>g("autoAssign",!l.autoAssign),"aria-label":a("profile.settingsLabels.autoAssign"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${l.autoAssign?"bg-orange-500":"bg-gray-300 dark:bg-gray-600"}`,type:"button",children:e.jsx("span",{className:`${l.autoAssign?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("profile.languageLabel")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a("profile.languageDescription")})]})]}),e.jsxs("select",{value:l.language,onChange:t=>g("language",t.target.value),className:"px-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500",children:[e.jsx("option",{value:"tr",children:a("profile.languages.tr")}),e.jsx("option",{value:"en",children:a("profile.languages.en")})]})]})]})]})]})})};export{je as default};
//# sourceMappingURL=AgentProfilePage-5cVqokTI.js.map
