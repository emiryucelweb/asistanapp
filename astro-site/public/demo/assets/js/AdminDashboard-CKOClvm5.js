import{at as e,a as t,r as a,u as s,j as r,h as n,E as l,v as i,s as d,C as o,T as c,n as m,L as x,l as h}from"./index-ByjBXa3D.js";import{m as g,i as p}from"./config-D68ZPno9.js";import{A as y}from"./activity-Bwv1YAZF.js";import{A as u,a as b}from"./arrow-up-right-Wgo6SBEJ.js";const j={monthly:287450,growth:18.7},w={getStats:async()=>(await e.get("/super-admin/dashboard/stats")).data,globalSearch:async t=>(await e.get("/super-admin/dashboard/search",{params:{query:t}})).data,getNotifications:async(t=20)=>(await e.get("/super-admin/dashboard/notifications",{params:{limit:t}})).data,markNotificationRead:async t=>(await e.post(`/super-admin/dashboard/notifications/${t}/read`)).data,getRecentActivity:async()=>(await e.get("/super-admin/dashboard/activity")).data,getTopTenants:async(t=5)=>(await e.get("/super-admin/dashboard/top-tenants",{params:{limit:t}})).data,getSystemHealth:async()=>(await e.get("/super-admin/dashboard/system-health")).data},f={stats:{totalTenants:127,activeTenants:118,trialTenants:7,pastDueTenants:2,totalMonthlyRevenue:j.monthly,totalMonthlyCosts:95820,totalProfit:j.monthly-95820,profitMargin:(j.monthly-95820)/j.monthly*100,growthRate:j.growth,churnRate:2.5},recentActivity:[{id:1,type:"new",tenant:"Modern Kafe",tenantId:"tenant-005",action:"Yeni firma kaydı",time:"5 dakika önce",color:"green"},{id:2,type:"payment",tenant:"Smile Dental Klinik",tenantId:"tenant-001",action:"Ödeme alındı (8.500 TRY)",time:"1 saat önce",color:"blue"},{id:3,type:"upgrade",tenant:"TechHub Yazılım",tenantId:"tenant-002",action:"Enterprise plana yükseltildi",time:"3 saat önce",color:"purple"},{id:4,type:"warning",tenant:"Güzellik Salonu Luna",tenantId:"tenant-003",action:"API kullanım limiti aşıldı",time:"5 saat önce",color:"red"},{id:5,type:"api",tenant:"E-Ticaret Mağazası",tenantId:"tenant-004",action:"Günlük mesaj limiti %85",time:"1 gün önce",color:"yellow"}],topTenants:[{id:"tenant-001",businessName:"Smile Dental Klinik",owner:{name:"Dr. Ahmet Demir",email:"ahmet@smileklinik.com",phone:"+90 532 123 4567"},industry:"Dental",plan:"Professional",status:"active",stats:{totalConversations:4523,activeAgents:5,monthlyRevenue:2499,growth:14.2},integrations:["whatsapp","instagram","web"],createdAt:"2024-01-15",lastActivity:"2025-12-10T10:15:00Z",billingCycle:"monthly",nextBillingDate:"2025-12-15"},{id:"tenant-002",businessName:"Coffee Break Cafe",owner:{name:"Elif Kara",email:"elif@coffeebreak.com",phone:"+90 533 234 5678"},industry:"Food & Beverage",plan:"Starter",status:"active",stats:{totalConversations:2847,activeAgents:3,monthlyRevenue:999,growth:8.7},integrations:["whatsapp","instagram"],createdAt:"2024-03-20",lastActivity:"2025-12-10T09:42:00Z",billingCycle:"monthly",nextBillingDate:"2025-12-20"},{id:"tenant-003",businessName:"TechFix Servis",owner:{name:"Mehmet Yılmaz",email:"mehmet@techfix.com",phone:"+90 534 345 6789"},industry:"Technology Services",plan:"Professional",status:"trial",stats:{totalConversations:1234,activeAgents:2,monthlyRevenue:0,growth:0},integrations:["whatsapp","web"],createdAt:"2025-11-25",lastActivity:"2025-12-10T08:30:00Z",billingCycle:"trial",trialEndsAt:"2025-12-25"},{id:"tenant-004",businessName:"Beauty Salon Güzellik",owner:{name:"Ayşe Şen",email:"ayse@beautysalon.com",phone:"+90 535 456 7890"},industry:"Beauty & Wellness",plan:"Enterprise",status:"active",stats:{totalConversations:6789,activeAgents:8,monthlyRevenue:4999,growth:22.3},integrations:["whatsapp","instagram","facebook","web"],createdAt:"2023-11-10",lastActivity:"2025-12-10T10:25:00Z",billingCycle:"annual",nextBillingDate:"2026-11-10"},{id:"tenant-005",businessName:"AutoCare Oto Servis",owner:{name:"Can Özkan",email:"can@autocare.com",phone:"+90 536 567 8901"},industry:"Automotive",plan:"Starter",status:"suspended",stats:{totalConversations:892,activeAgents:1,monthlyRevenue:999,growth:-5.2},integrations:["whatsapp"],createdAt:"2024-06-12",lastActivity:"2025-11-28T14:20:00Z",billingCycle:"monthly",suspendedAt:"2025-12-01",suspendedReason:"Payment overdue"}].slice(0,5).map(e=>({name:e.businessName,revenue:e.stats.monthlyRevenue,growth:e.stats.growth,plan:e.plan})),systemHealth:[{name:"API Server",status:"operational",uptime:"99.97%"},{name:"Database",status:"operational",uptime:"99.99%"},{name:"Cache",status:"operational",uptime:"99.8%"},{name:"Storage",status:"operational",uptime:"98.5%"}]},N={getStats:async()=>(await g(),f.stats),getRecentActivity:async()=>(await g(),f.recentActivity),getTopTenants:async(e=5)=>(await g(),f.topTenants.slice(0,e)),getSystemHealth:async()=>(await g(),f.systemHealth),async globalSearch(e){await g();return[{id:"1",type:"tenant",title:"Acme E-commerce",subtitle:"Enterprise Plan"},{id:"2",type:"tenant",title:"TechStart SaaS",subtitle:"Professional Plan"},{id:"3",type:"user",title:"John Doe",subtitle:"Admin @ Acme"}].filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase()))},markNotificationRead:async e=>(await g(),{success:!0})},v=()=>{const{t:e}=t("admin"),[g,j]=a.useState(""),[f,v]=a.useState([]),[k,A]=a.useState(!1),[S,T]=a.useState([]),[C,R]=a.useState([]),[D,P]=a.useState(null),[M,I]=a.useState([]),[q,E]=a.useState(!0),L=s(),$=N;a.useEffect(()=>{(async()=>{E(!0);try{const[e,t,a,s]=await Promise.all([$.getRecentActivity(),$.getTopTenants(5),$.getStats(),$.getSystemHealth()]);T(e),R(t),P(a),I(s),h.info("[AdminDashboard] Data fetched",{mode:p()?"mock":"real"})}catch(e){h.error("[AdminDashboard] Fetch failed",{error:e})}finally{E(!1)}})()},[]);return r.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:e("dashboard.title")}),r.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:e("dashboard.subtitle")})]}),r.jsxs("div",{className:"relative w-full md:w-96",children:[r.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:e("dashboard.searchPlaceholder"),value:g,onChange:e=>(async e=>{if(j(e),e.trim()){A(!0);try{const t=await w.globalSearch(e);v(t)}catch(t){h.error("Global search error",t),v([])}finally{A(!1)}}else v([])})(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),g&&r.jsx("div",{className:"absolute top-full mt-2 w-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:k?r.jsx("div",{className:"p-4 text-center text-gray-500",children:e("dashboard.searching")}):(null==f?void 0:f.length)>0?r.jsx("div",{className:"p-2",children:f.map((e,t)=>r.jsxs("button",{onClick:()=>(e=>{"tenant"===e.type?L(`/asistansuper/tenants/${e.id}`):"user"===e.type&&L(`/asistansuper/users?search=${e.id}`),j(""),v([])})(e),className:"w-full text-left p-3 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.subtitle})]},t))}):r.jsx("div",{className:"p-4 text-center text-gray-500",children:e("dashboard.noResults")})})]})]}),q||!D?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"flex items-center justify-center gap-2",children:[0,1,2].map(e=>r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600 animate-bounce",style:{animationDelay:.15*e+"s",animationDuration:"0.6s"}},e))})}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm opacity-90",children:e("dashboard.stats.totalTenants")}),r.jsx(l,{className:"w-5 h-5 opacity-90"})]}),r.jsx("p",{className:"text-3xl font-bold",children:D.totalTenants||0}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm",children:[r.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full",children:e("dashboard.stats.active",{count:D.activeTenants||0})}),r.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full",children:e("dashboard.stats.trial",{count:D.trialTenants||0})})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm opacity-90",children:e("dashboard.stats.monthlyRevenue")}),r.jsx(i,{className:"w-5 h-5 opacity-90"})]}),r.jsxs("p",{className:"text-3xl font-bold",children:["$",(D.totalMonthlyRevenue||0).toLocaleString()]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[r.jsx(d,{className:"w-4 h-4"}),r.jsx("span",{children:e("dashboard.stats.growthThisMonth",{rate:D.growthRate||0})})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm opacity-90",children:e("dashboard.stats.netProfit")}),r.jsx(d,{className:"w-5 h-5 opacity-90"})]}),r.jsxs("p",{className:"text-3xl font-bold",children:["$",(D.totalProfit||0).toLocaleString()]}),r.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm",children:r.jsx("span",{children:e("dashboard.stats.profitMargin",{margin:D.profitMargin||0})})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm opacity-90",children:e("dashboard.systemHealth")}),r.jsx(y,{className:"w-5 h-5 opacity-90"})]}),r.jsx("p",{className:"text-3xl font-bold",children:"99.8%"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[r.jsx(o,{className:"w-4 h-4"}),r.jsx("span",{children:e("dashboard.allSystemsOperational")})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("dashboard.recentActivity")}),q?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"flex items-center justify-center gap-1",children:[0,1,2].map(e=>r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600 animate-bounce",style:{animationDelay:.15*e+"s",animationDuration:"0.6s"}},e))})}):S&&0!==S.length?r.jsx("div",{className:"space-y-4",children:S.map(e=>r.jsxs("button",{onClick:()=>(async e=>{try{"warning"!==e.type&&"api"!==e.type||await w.markNotificationRead(e.id.toString())}catch(t){h.error("Failed to mark notification as read",t)}"payment"===e.type||"warning"===e.type?L(`/asistansuper/tenants/${e.tenantId}?tab=billing`):"api"===e.type?L(`/asistansuper/tenants/${e.tenantId}?tab=usage`):L(`/asistansuper/tenants/${e.tenantId}`)})(e),className:"w-full flex items-start gap-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer text-left",children:[r.jsxs("div",{className:"p-2 rounded-lg "+("green"===e.color?"bg-green-100 dark:bg-green-900/30":"blue"===e.color?"bg-blue-100 dark:bg-blue-900/30":"purple"===e.color?"bg-purple-100 dark:bg-purple-900/30":"red"===e.color?"bg-red-100 dark:bg-red-900/30":"bg-yellow-100 dark:bg-yellow-900/30"),children:["new"===e.type&&r.jsx(l,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"payment"===e.type&&r.jsx(i,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),"upgrade"===e.type&&r.jsx(d,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),"warning"===e.type&&r.jsx(c,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),"api"===e.type&&r.jsx(y,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.tenant}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.action})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[r.jsx(m,{className:"w-3 h-3"}),e.time]})]},e.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e("dashboard.noActivity")})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("dashboard.systemStatus")}),r.jsx("div",{className:"space-y-4",children:null==M?void 0:M.map(t=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Uptime: ",t.uptime]})]}),r.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium "+("green"===t.color?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"),children:"operational"===t.status?e("dashboard.operational"):e("dashboard.slow")})]},t.name))})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.topTenants")}),r.jsx(x,{to:"/asistansuper/financial-reports",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:e("dashboard.allReports")})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"border-b border-gray-200 dark:border-slate-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("dashboard.table.tenant")}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("dashboard.table.plan")}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("dashboard.table.monthlyRevenue")}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("dashboard.table.growth")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:q?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-4 py-8 text-center",children:r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"flex items-center justify-center gap-1",children:[0,1,2].map(e=>r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 animate-bounce",style:{animationDelay:.15*e+"s",animationDuration:"0.6s"}},e))})})})}):C&&0!==C.length?C.map((e,t)=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center text-blue-600 dark:text-blue-400 font-semibold text-sm",children:t+1}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name})]})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.plan})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:r.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["$",e.revenue.toLocaleString()]})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:r.jsx("div",{className:"flex items-center justify-end gap-1",children:e.growth>0?r.jsxs(r.Fragment,{children:[r.jsx(u,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsxs("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["+",e.growth,"%"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(b,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),r.jsxs("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:[e.growth,"%"]})]})})})]},t)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:e("dashboard.noTenants")})})})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(x,{to:"/asistansuper/tenants",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[r.jsx(l,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("dashboard.quickActions.tenantsManagement")}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e("dashboard.quickActions.viewAllTenants")})]}),r.jsxs(x,{to:"/asistansuper/financial-reports",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[r.jsx(i,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("dashboard.quickActions.financialReports")}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e("dashboard.quickActions.revenueAnalysis")})]}),r.jsxs(x,{to:"/asistansuper/analytics",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[r.jsx(y,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("dashboard.quickActions.analytics")}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e("dashboard.quickActions.detailedStats")})]}),r.jsxs(x,{to:"/asistansuper/system",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[r.jsx(o,{className:"w-8 h-8 text-orange-600 dark:text-orange-400 mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("dashboard.quickActions.system")}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e("dashboard.quickActions.systemStatus")})]})]})]})};export{v as default};
