import{c as e,a as s,r as a,g as t,j as r,d as l,h as n,i,k as o,M as d,m as c,n as x,U as m,o as g,p,F as h,X as b,q as u,P as f,l as v}from"./index-BDKevNej.js";import{M as j}from"./minimize-2-lz0x1kL1.js";import{I as y}from"./image-B8o5xkpr.js";import{V as N}from"./video-XRO7AWjk.js";import{P as k}from"./paperclip-eokfqnwo.js";import{I as w}from"./instagram-Ce5ACwEN.js";import{E as C}from"./external-link-C7ybEsCz.js";import{F as M}from"./facebook-GPBa8oKG.js";import{G as S}from"./globe-CQ2O9vVS.js";import{M as A}from"./mail-CzR1jFZZ.js";
/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=e("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),T=e("phone-incoming",[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),L=()=>r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),$={instagram:{icon:r.jsx(w,{className:"w-5 h-5"}),color:"text-pink-600",bg:"bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500"},whatsapp:{icon:r.jsx(L,{}),color:"text-green-600",bg:"bg-green-500"},facebook:{icon:r.jsx(M,{className:"w-5 h-5"}),color:"text-blue-600",bg:"bg-blue-600"},web:{icon:r.jsx(S,{className:"w-5 h-5"}),color:"text-orange-600",bg:"bg-orange-500"},phone:{icon:r.jsx(P,{className:"w-5 h-5"}),color:"text-purple-600",bg:"bg-gradient-to-br from-purple-500 to-purple-700"}},H=()=>{const{t:e,i18n:L}=s("admin"),[H,D]=a.useState("assistant"),[U,E]=a.useState(""),[I,z]=a.useState("all"),[F,W]=a.useState(!1),[O,R]=a.useState(null),[V,K]=a.useState(""),[J,Y]=a.useState([]),[Z,_]=a.useState(!1),[q,B]=a.useState(!1),[G,Q]=a.useState(!1),[X,ee]=a.useState(!1),[se,ae]=a.useState([]),[te,re]=a.useState([]),[le,ne]=a.useState(1),[ie,oe]=a.useState(!0),[de,ce]=t();a.useEffect(()=>{const e=e=>{"Escape"===e.key&&(X?ee(!1):O&&R(null)),"F11"===e.key&&O&&(e.preventDefault(),ee(!X))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[X,O]),a.useEffect(()=>{},[]),a.useEffect(()=>{const e=de.get("openConversation");if(e&&se.length>0){const s=se.find(s=>s.id===e);s&&(R(s),ce({}))}},[de,se,ce]),a.useEffect(()=>{const e=setInterval(()=>{const e=Date.now();ae(s=>{const a=[],t=[];return s.forEach(s=>{e-s.lastMessageTime.getTime()>18e5?t.push(s):a.push(s)}),t.length>0&&re(e=>[...t,...e]),a})},6e4);return()=>clearInterval(e)},[]);const xe=s=>{const a=(new Date).getTime()-s.getTime(),t=Math.floor(a/6e4),r=Math.floor(a/36e5),l=Math.floor(a/864e5);return t<1?e("conversations.time.now"):t<60?e("conversations.time.minutesAgo",{count:t}):r<24?e("conversations.time.hoursAgo",{count:r}):l<7?e("conversations.time.daysAgo",{count:l}):s.toLocaleDateString("tr"===L.language?"tr-TR":"en-US",{day:"2-digit",month:"short"})},me=e=>{const s=document.createElement("input");s.type="file",s.accept="image"===e?"image/*":"video"===e?"video/*":"*/*",s.multiple=!0,s.onchange=e=>{const s=Array.from(e.target.files||[]);Y(e=>[...e,...s]),_(!1)},s.click()},ge=()=>{(V.trim()||0!==J.length)&&(v.debug("Sending message:",{text:V,attachments:J}),K(""),Y([]))},pe=(()=>{let e=[];const s=e=>e.messages.some(e=>"agent"===e.sender&&e.agentName&&"AI Assistant"!==e.agentName);return"phone"===H?e=[...se,...te].filter(e=>"phone"===e.channel):"assistant"===H?e=se.filter(e=>"phone"!==e.channel&&!s(e)):"employee"===H?e=se.filter(e=>"phone"!==e.channel&&(s(e)||e.needsHelp||"human"===e.assignedTo)):"past"===H&&(e=te.filter(e=>"phone"!==e.channel)),e.filter(e=>{const s=e.customerName.toLowerCase().includes(U.toLowerCase())||e.lastMessage.toLowerCase().includes(U.toLowerCase()),a="all"===I||e.channel===I,t=!F||e.needsHelp;return"phone"===H?s&&t:s&&a&&t})})(),he=("past"===H?te:se).filter(e=>e.needsHelp).length,be=[...se,...te].filter(e=>"phone"===e.channel).length,ue=se.filter(e=>e.isLiveCall).length,fe=se.filter(e=>e.isUrgent).length,ve=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900",children:[r.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700",children:r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 sm:mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("conversations.title")}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1",children:e("conversations.subtitle")})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[fe>0&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 border-2 border-red-300 rounded-lg animate-pulse",children:[r.jsx(P,{className:"w-4 h-4 text-red-600 animate-bounce"}),r.jsxs("span",{className:"text-sm font-bold text-red-900",children:[fe," ",e("conversations.filters.urgentCall")]})]}),ue>0&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-purple-50 border border-purple-200 rounded-lg",children:[r.jsx(T,{className:"w-4 h-4 text-purple-600"}),r.jsxs("span",{className:"text-sm font-medium text-purple-900",children:[ue," ",e("conversations.filters.liveCalls",{count:ue})]})]}),he>0&&!fe&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx(l,{className:"w-4 h-4 text-amber-600"}),r.jsxs("span",{className:"text-sm font-medium text-amber-900",children:[he," ",e("conversations.filters.needsHelpWaiting",{count:he})]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:e("conversations.searchPlaceholder"),value:U,onChange:e=>E(e.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-2.5 text-sm bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 bg-gray-50 dark:bg-slate-900 p-1 rounded-lg border border-gray-200 dark:border-slate-700 overflow-x-auto",children:[r.jsx("button",{onClick:()=>z("all"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("all"===I?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:e("conversations.filters.all")}),Object.keys($).map(e=>r.jsx("button",{onClick:()=>z(e),className:"p-2 rounded-md transition-colors "+(I===e?`${$[e].color} bg-white dark:bg-slate-800 shadow-sm`:"text-gray-400 hover:text-gray-600 dark:text-gray-400"),title:e,children:$[e].icon},e))]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mt-4 sm:mt-6",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-slate-700 p-1 rounded-lg overflow-x-auto",children:[r.jsxs("button",{onClick:()=>D("assistant"),className:"px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex items-center gap-1.5 "+("assistant"===H?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:[r.jsx(i,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),r.jsx("span",{className:"hidden sm:inline",children:e("conversations.tabs.assistant")}),r.jsx("span",{className:"sm:hidden",children:e("conversations.tabs.assistantShort")}),r.jsx("span",{className:"ml-1 px-1.5 sm:px-2 py-0.5 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 text-xs font-semibold rounded-full",children:se.filter(e=>"phone"!==e.channel&&!e.messages.some(e=>"agent"===e.sender&&e.agentName&&"AI Assistant"!==e.agentName)).length})]}),r.jsxs("button",{onClick:()=>D("employee"),className:"px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex items-center gap-1.5 "+("employee"===H?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:[r.jsx(o,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),r.jsx("span",{className:"hidden sm:inline",children:e("conversations.tabs.employee")}),r.jsx("span",{className:"sm:hidden",children:e("conversations.tabs.employeeShort")}),r.jsx("span",{className:"ml-1 px-1.5 sm:px-2 py-0.5 bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 text-xs font-semibold rounded-full",children:se.filter(e=>"phone"!==e.channel&&(e.messages.some(e=>"agent"===e.sender&&e.agentName&&"AI Assistant"!==e.agentName)||e.needsHelp||"human"===e.assignedTo)).length})]}),r.jsxs("button",{onClick:()=>D("past"),className:"px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap "+("past"===H?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),title:e("conversations.autoArchiveInfo"),children:[r.jsx("span",{className:"hidden sm:inline",children:e("conversations.tabs.past")}),r.jsx("span",{className:"sm:hidden",children:e("conversations.tabs.pastShort")}),r.jsxs("span",{className:"ml-1 sm:ml-2 px-1.5 sm:px-2 py-0.5 bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300 text-xs font-semibold rounded-full",children:[te.length,"+"]})]}),r.jsxs("button",{onClick:()=>D("phone"),className:"px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap "+("phone"===H?"bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:[r.jsx(P,{className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{className:"hidden sm:inline",children:e("conversations.tabs.phone")}),r.jsx("span",{className:"sm:hidden",children:e("conversations.tabs.phoneShort")}),r.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-xs font-semibold rounded-full "+("phone"===H?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300":"bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300"),children:be})]})]}),r.jsxs("button",{onClick:()=>W(!F),className:"px-3 sm:px-6 py-2 text-xs sm:text-sm font-medium border rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap "+(F?"bg-amber-500 text-white border-amber-600 hover:bg-amber-600 shadow-sm":"text-amber-700 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900/30"),children:[r.jsx(l,{className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{className:"hidden sm:inline",children:e("conversations.tabs.needsHelp")}),r.jsx("span",{className:"sm:hidden",children:e("conversations.tabs.needsHelpShort")}),he>0&&r.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-xs font-semibold rounded-full "+(F?"bg-amber-600 text-white":"bg-amber-200 dark:bg-amber-800 text-amber-900 dark:text-amber-100"),children:he})]})]})]})}),r.jsx("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-slate-700 max-h-[400px] sm:max-h-[500px] lg:max-h-[calc(100vh-240px)] overflow-y-auto",children:0===pe.length?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(d,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("conversations.noConversationsFound")})]}):r.jsxs(r.Fragment,{children:[pe.map(s=>r.jsx("button",{onClick:()=>R(s),className:`w-full p-4 hover:bg-gray-50 dark:hover:bg-slate-700 dark:bg-slate-900 transition-colors text-left relative ${(null==O?void 0:O.id)===s.id?"bg-orange-50":""} ${s.isUrgent?"border-l-4 border-red-500 bg-red-50/30":s.needsHelp?"border-l-4 border-amber-500":""}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("div",{className:`w-12 h-12 ${$[s.channel].bg} rounded-full flex items-center justify-center text-white`,children:s.customerAvatar?r.jsx("img",{src:s.customerAvatar,alt:"",className:"w-full h-full rounded-full object-cover"}):r.jsx(c,{className:"w-6 h-6"})}),r.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 ${$[s.channel].bg} rounded-full flex items-center justify-center text-white border-2 border-white`,children:$[s.channel].icon})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm truncate",children:s.customerName}),s.needsHelp&&r.jsx(l,{className:"w-4 h-4 text-amber-600 flex-shrink-0","aria-label":e("conversations.needsHelp")})]}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0",children:xe(s.lastMessageTime)})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.lastMessage}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.isUrgent&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full animate-pulse",children:[r.jsx(P,{className:"w-3 h-3"}),e("conversations.badges.urgent")]}),s.isLiveCall&&!s.isUrgent&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-800 text-xs font-semibold rounded-full",children:[r.jsx(T,{className:"w-3 h-3 animate-pulse"}),e("conversations.badges.liveCall"),": ",ve(s.callDuration||0)]}),s.unreadCount>0&&r.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-0.5 bg-orange-500 text-white text-xs font-semibold rounded-full",children:[s.unreadCount," ",e("conversations.badges.newMessages",{count:s.unreadCount})]}),s.needsHelp&&!s.isLiveCall&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-800 text-xs font-semibold rounded-full",children:[r.jsx(o,{className:"w-3 h-3"}),s.assignedAgent||e("conversations.badges.humanAssistance")]}),"ai"===s.assignedTo&&!s.needsHelp&&!s.isLiveCall&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:[r.jsx(i,{className:"w-3 h-3"}),e("conversations.badges.ai")]})]})]})]})},s.id)),"past"===H&&ie&&r.jsx("button",{onClick:()=>{},className:"w-full p-4 text-center text-sm font-medium text-orange-600 hover:bg-orange-50 transition-colors",children:e("conversations.loadMore")})]})})}),r.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden "+(X?"fixed inset-0 z-50 rounded-none":""),children:O?r.jsxs("div",{className:"flex flex-col "+(X?"h-screen":"h-[500px] sm:h-[600px] lg:h-[calc(100vh-240px)]"),children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`w-10 h-10 ${$[O.channel].bg} rounded-full flex items-center justify-center text-white`,children:r.jsx(c,{className:"w-5 h-5"})}),r.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-5 h-5 ${$[O.channel].bg} rounded-full flex items-center justify-center text-white border-2 border-white`,children:r.jsx("div",{className:"scale-75",children:$[O.channel].icon})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:O.customerName}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[r.jsx(x,{className:"w-3 h-3"}),e("conversations.conversation.lastMessage")," ",xe(O.lastMessageTime)]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[O.isLiveCall&&r.jsxs("button",{className:"px-4 py-2 text-sm font-bold rounded-lg transition-all flex items-center gap-2 "+(O.isUrgent?"bg-red-500 text-white hover:bg-red-600 animate-pulse":"bg-purple-500 text-white hover:bg-purple-600"),children:[r.jsx(P,{className:"w-4 h-4"}),O.isUrgent?e("conversations.actions.urgentJoinCall"):e("conversations.actions.joinCall")]}),r.jsxs("button",{onClick:()=>Q(!0),className:"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors flex items-center gap-2",children:[r.jsx(m,{className:"w-4 h-4"}),e("conversations.actions.assign")]}),r.jsx("button",{onClick:()=>B(!0),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:e("conversations.actions.viewProfile")}),r.jsx("button",{onClick:()=>ee(!X),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:e(X?"conversations.fullscreen.exit":"conversations.fullscreen.enter"),children:X?r.jsx(j,{className:"w-5 h-5"}):r.jsx(g,{className:"w-5 h-5"})})]})]})}),O.isUrgent&&r.jsx("div",{className:"mx-6 mt-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg animate-pulse",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(P,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0 animate-bounce"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-red-900 mb-1",children:e("conversations.alerts.urgentTitle")}),r.jsx("p",{className:"text-sm text-red-800",children:e("conversations.alerts.urgentMessage")}),r.jsxs("p",{className:"text-xs text-red-700 mt-2 flex items-center gap-2",children:[r.jsx(x,{className:"w-3 h-3"}),e("conversations.conversation.callDuration")," ",r.jsx("strong",{children:ve(O.callDuration||0)})]})]})]})}),O.isLiveCall&&!O.isUrgent&&r.jsx("div",{className:"mx-6 mt-6 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(T,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-purple-900 mb-1",children:e("conversations.alerts.liveCallTitle")}),r.jsx("p",{className:"text-sm text-purple-800",children:"ai"===O.assignedTo?e("conversations.alerts.liveCallAiMessage"):e("conversations.alerts.liveCallAgentMessage",{agentName:O.assignedAgent})}),r.jsxs("p",{className:"text-xs text-purple-700 mt-2 flex items-center gap-2",children:[r.jsx(x,{className:"w-3 h-3"}),e("conversations.conversation.callDuration")," ",r.jsx("strong",{children:ve(O.callDuration||0)})]})]})]})}),O.needsHelp&&O.aiStuckReason&&!O.isLiveCall&&r.jsx("div",{className:"mx-6 mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 dark:border-amber-600 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(l,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-amber-900 dark:text-amber-200 mb-1",children:e("conversations.alerts.aiStuckTitle")}),r.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-300",children:O.aiStuckReason}),O.assignedAgent&&r.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-2 flex items-center gap-1",children:[r.jsx(o,{className:"w-3 h-3"}),r.jsx("strong",{children:O.assignedAgent})," ",e("conversations.conversation.takingOver")]})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:O.messages.map((s,a)=>r.jsx("div",{className:"flex "+("agent"===s.sender?"justify-end":"justify-start"),children:r.jsxs("div",{className:"max-w-[70%] "+("agent"===s.sender?"order-2":"order-1"),children:[s.isVoiceTranscript&&r.jsxs("div",{className:"flex items-center gap-2 mb-1 text-xs "+("agent"===s.sender?"justify-end":"justify-start"),children:[r.jsx(p,{className:"w-3 h-3 text-purple-500"}),r.jsx("span",{className:"text-purple-600 font-medium",children:e("conversations.alerts.voiceTranscript")}),s.voiceDuration&&r.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(",ve(s.voiceDuration),")"]})]}),r.jsx("div",{className:"rounded-2xl px-4 py-2.5 "+("agent"===s.sender?s.isVoiceTranscript?"bg-purple-500 text-white rounded-br-sm":"bg-orange-500 text-white rounded-br-sm":s.isVoiceTranscript?"bg-purple-50 dark:bg-purple-900/30 text-gray-900 dark:text-gray-100 border border-purple-200 dark:border-purple-700 rounded-bl-sm":"bg-gray-100 dark:bg-slate-700 text-gray-900 dark:text-gray-100 rounded-bl-sm"),children:r.jsx("p",{className:"text-sm",children:s.text})}),r.jsxs("div",{className:"flex items-center gap-2 mt-1 px-1 "+("agent"===s.sender?"justify-end":"justify-start"),children:[r.jsx("p",{className:"text-xs text-gray-400",children:s.timestamp.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}),"agent"===s.sender&&s.agentName&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-xs text-gray-300",children:"â€¢"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:s.agentName})]})]})]})},s.id))}),r.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900",children:[J.length>0&&r.jsx("div",{className:"mb-2 sm:mb-3 flex flex-wrap gap-1.5 sm:gap-2",children:J.map((e,s)=>r.jsxs("div",{className:"relative group bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 flex items-center gap-1.5 sm:gap-2",children:[e.type.startsWith("image/")&&r.jsx(y,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0"}),e.type.startsWith("video/")&&r.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 text-purple-500 flex-shrink-0"}),!e.type.startsWith("image/")&&!e.type.startsWith("video/")&&r.jsx(h,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 dark:text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 max-w-[100px] sm:max-w-[150px] truncate",children:e.name}),r.jsx("button",{onClick:()=>(e=>{Y(s=>s.filter((s,a)=>a!==e))})(s),className:"ml-1 text-gray-400 hover:text-red-500 transition-colors flex-shrink-0","aria-label":`${e.name} dosyasÄ±nÄ± kaldÄ±r`,children:r.jsx(b,{className:"w-3 h-3"})})]},s))}),r.jsxs("div",{className:"flex items-end gap-1 sm:gap-2",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("button",{onClick:()=>_(!Z),className:"p-2 sm:p-2.5 text-gray-600 dark:text-gray-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:e("conversations.addFile"),"aria-label":e("conversations.addFile"),children:r.jsx(k,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),Z&&r.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg overflow-hidden z-10 min-w-[160px]",children:[r.jsxs("button",{onClick:()=>me("image"),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors",children:[r.jsx(y,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:e("conversations.attachments.photo")})]}),r.jsxs("button",{onClick:()=>me("video"),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors",children:[r.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 text-purple-500 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:e("conversations.attachments.video")})]}),r.jsxs("button",{onClick:()=>me("file"),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors",children:[r.jsx(h,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 dark:text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:e("conversations.attachments.file")})]})]})]}),r.jsx("input",{type:"text",value:V,onChange:e=>K(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ge())},placeholder:e("conversations.messagePlaceholder"),className:"flex-1 min-w-0 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"}),r.jsxs("button",{onClick:ge,disabled:!V.trim()&&0===J.length,className:"px-3 sm:px-6 py-2 sm:py-2.5 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 sm:gap-2 flex-shrink-0","aria-label":e("conversations.sendMessage"),children:[r.jsx(u,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:e("conversations.actions.send")})]})]})]})]}):r.jsx("div",{className:"h-[calc(100vh-240px)] flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e("conversations.conversation.selectConversation")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("conversations.conversation.selectToStart")})]})})})]})}),q&&O&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-slate-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-12 h-12 ${$[O.channel].bg} rounded-full flex items-center justify-center text-white`,children:r.jsx(c,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100",children:O.customerName}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1",children:[$[O.channel].icon,r.jsx("span",{className:"ml-1",children:"web"===O.channel?"Web Widget":O.channel.charAt(0).toUpperCase()+O.channel.slice(1)})]})]})]}),r.jsx("button",{onClick:()=>B(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg",children:r.jsx(b,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[O.customerProfile.instagram&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-pink-100 dark:border-pink-800",children:[r.jsx(w,{className:"w-5 h-5 text-pink-600 dark:text-pink-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:e("conversations.profile.instagram.username")}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:O.customerProfile.instagram.username}),r.jsxs("a",{href:O.customerProfile.instagram.profileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 font-medium",children:[e("conversations.profile.instagram.visitProfile"),r.jsx(C,{className:"w-3 h-3"})]})]})]})}),O.customerProfile.phone&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800",children:[r.jsx(P,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:e("conversations.profile.phone.number")}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:O.customerProfile.phone.phoneNumber}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("a",{href:`tel:${O.customerProfile.phone.phoneNumber.replace(/\s+/g,"")}`,className:"inline-flex items-center gap-1 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium",children:[e("conversations.profile.phone.call"),r.jsx(f,{className:"w-3 h-3"})]}),O.isLiveCall&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 text-xs font-semibold rounded-full",children:[r.jsx(T,{className:"w-3 h-3 animate-pulse"}),e("conversations.profile.phone.liveCall")]})]})]})]})}),O.customerProfile.whatsapp&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-800",children:[r.jsx(f,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:e("conversations.profile.whatsapp.number")}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:O.customerProfile.whatsapp.phoneNumber}),r.jsxs("a",{href:`tel:${O.customerProfile.whatsapp.phoneNumber.replace(/\s+/g,"")}`,className:"inline-flex items-center gap-1 text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 font-medium",children:[e("conversations.profile.whatsapp.call"),r.jsx(f,{className:"w-3 h-3"})]})]})]})}),O.customerProfile.facebook&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800",children:[r.jsx(M,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:e("conversations.profile.facebook.profile")}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:O.customerProfile.facebook.name}),r.jsxs("a",{href:O.customerProfile.facebook.profileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:[e("conversations.profile.facebook.visitProfile"),r.jsx(C,{className:"w-3 h-3"})]})]})]})}),O.customerProfile.web&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-100 dark:border-orange-800 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(S,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),r.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:e("conversations.profile.web.title")})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:e("conversations.profile.web.fullName")}),r.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[O.customerProfile.web.firstName," ",O.customerProfile.web.lastName]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1 flex items-center gap-1",children:[r.jsx(A,{className:"w-3 h-3"}),e("conversations.profile.web.email")]}),r.jsx("a",{href:`mailto:${O.customerProfile.web.email}`,className:"text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",children:O.customerProfile.web.email})]}),O.customerProfile.web.phoneNumber&&r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1 flex items-center gap-1",children:[r.jsx(f,{className:"w-3 h-3"}),e("conversations.profile.web.phoneOptional")]}),r.jsx("a",{href:`tel:${O.customerProfile.web.phoneNumber.replace(/\s+/g,"")}`,className:"text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",children:O.customerProfile.web.phoneNumber})]})]})]})})]}),r.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900 rounded-b-2xl",children:r.jsx("button",{onClick:()=>B(!1),className:"w-full px-4 py-2.5 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 transition-colors",children:e("conversations.actions.close")})})]})}),G&&O&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl max-w-md w-full shadow-xl",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e("conversations.assignModal.title")}),r.jsx("button",{onClick:()=>Q(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:r.jsx(b,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("conversations.assignModal.selectAgent")}),r.jsx("div",{className:"space-y-2",children:[{id:"1",name:"AyÅŸe YÄ±lmaz",avatar:"ðŸ‘©",status:"online",conversations:3},{id:"2",name:"Mehmet Kaya",avatar:"ðŸ‘¨",status:"online",conversations:5},{id:"3",name:"Zeynep Demir",avatar:"ðŸ‘©",status:"busy",conversations:8},{id:"4",name:"Ali YÄ±ldÄ±z",avatar:"ðŸ‘¨",status:"offline",conversations:0}].map(s=>r.jsxs("button",{onClick:()=>{alert(e("conversations.assignedTo",{name:s.name})),Q(!1)},className:"w-full p-3 border border-gray-200 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"text-2xl",children:s.avatar}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[s.conversations," ",e("conversations.assignModal.activeConversations",{count:s.conversations})]})]})]}),r.jsx("div",{className:"w-2 h-2 rounded-full "+("online"===s.status?"bg-green-500":"busy"===s.status?"bg-yellow-500":"bg-gray-400")})]},s.id))})]})}),r.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900 rounded-b-2xl",children:r.jsx("button",{onClick:()=>Q(!1),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",children:e("conversations.actions.cancel")})})]})})]})};export{H as default};
