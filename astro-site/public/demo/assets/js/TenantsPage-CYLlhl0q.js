import{a as e,r as t,j as a,X as r,E as s,m as l,N as n,u as d,v as i,s as c,U as o,h as x,C as m,n as g,d as p,L as u,O as b,l as y}from"./index-BDKevNej.js";import{M as h}from"./map-pin-B7GGuhKv.js";import{a as k,e as f}from"./export-helpers-v2-BJ0GmKTK.js";import{m as j}from"./super-admin-tenants.mock-BrsS6Cnh.js";import{i as N}from"./config-D68ZPno9.js";import{P as v}from"./plus-Cz0u5TUO.js";import{T as w}from"./trending-down-DVes4Qn2.js";import{F as C}from"./funnel-9oYHeMUD.js";import{D as A}from"./download-BH1Eza0P.js";import{E as S}from"./eye-P8aVeAYF.js";import{S as F}from"./square-pen-C8xEAW1Z.js";import{E as P}from"./ellipsis-vertical-DCwBoMZf.js";import{B as T}from"./ban-CS0IsIE8.js";import{C as E}from"./circle-play-CWDMEsm7.js";import"./formatters-C2pslz24.js";const I=({isOpen:d,onClose:i,onSubmit:c})=>{const{t:o}=e("super-admin"),[x,m]=t.useState(1),[g,p]=t.useState({companyName:"",companyEmail:"",companyPhone:"",website:"",contactFirstName:"",contactLastName:"",contactEmail:"",contactPhone:"",billingCompany:"",billingStreet:"",billingCity:"",billingState:"",billingPostalCode:"",billingCountry:"TR",taxId:"",plan:"professional",dataResidency:"tr",voiceEnabled:!0,multiChannel:!0,analytics:!0,customIntegrations:!1}),[u,b]=t.useState({});if(!d)return null;const y=e=>{const t={};return 1===e&&(g.companyName.trim()||(t.companyName=o("tenants.create.validation.companyNameRequired")),g.companyEmail.trim()||(t.companyEmail=o("tenants.create.validation.emailRequired")),g.companyPhone.trim()||(t.companyPhone=o("tenants.create.validation.phoneRequired"))),2===e&&(g.contactFirstName.trim()||(t.contactFirstName=o("tenants.create.validation.firstNameRequired")),g.contactLastName.trim()||(t.contactLastName=o("tenants.create.validation.lastNameRequired")),g.contactEmail.trim()||(t.contactEmail=o("tenants.create.validation.emailRequired"))),3===e&&(g.billingCompany.trim()||(t.billingCompany=o("tenants.create.validation.companyNameRequired")),g.billingStreet.trim()||(t.billingStreet=o("tenants.create.validation.addressRequired")),g.billingCity.trim()||(t.billingCity=o("tenants.create.validation.cityRequired")),g.billingPostalCode.trim()||(t.billingPostalCode=o("tenants.create.validation.postalCodeRequired"))),b(t),0===Object.keys(t).length},k=(e,t)=>{p(a=>({...a,[e]:t})),u[e]&&b(t=>({...t,[e]:void 0}))};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:o("tenants.create.title")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o("tenants.create.misc.step",{current:x,total:4})})]}),a.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(r,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),a.jsx("div",{className:"px-6 pt-4",children:a.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4].map(e=>a.jsx("div",{className:"flex-1 h-2 rounded-full transition-colors "+(e<=x?"bg-blue-600":"bg-gray-200 dark:bg-slate-700")},e))})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[1===x&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(s,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o("tenants.create.labels.companyInfo")})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.companyName")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"company-name",type:"text",value:g.companyName,onChange:e=>k("companyName",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.companyName?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.companyName")}),u.companyName&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.companyName})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"company-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.email")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"company-email",type:"email",value:g.companyEmail,onChange:e=>k("companyEmail",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.companyEmail?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.companyEmail")}),u.companyEmail&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.companyEmail})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"company-phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.phone")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"company-phone",type:"tel",value:g.companyPhone,onChange:e=>k("companyPhone",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.companyPhone?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.companyPhone")}),u.companyPhone&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.companyPhone})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"company-website",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("tenants.create.labels.website")}),a.jsx("input",{id:"company-website",type:"url",value:g.website,onChange:e=>k("website",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:"https://acme.com"})]})]}),2===x&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(l,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o("tenants.create.labels.contactPerson")})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"contact-first-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.firstName")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"contact-first-name",type:"text",value:g.contactFirstName,onChange:e=>k("contactFirstName",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.contactFirstName?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.adminFirstName")}),u.contactFirstName&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.contactFirstName})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"contact-last-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.lastName")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"contact-last-name",type:"text",value:g.contactLastName,onChange:e=>k("contactLastName",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.contactLastName?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.adminLastName")}),u.contactLastName&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.contactLastName})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"contact-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.email")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"contact-email",type:"email",value:g.contactEmail,onChange:e=>k("contactEmail",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.contactEmail?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.adminEmail")}),u.contactEmail&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.contactEmail})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contact-phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("tenants.create.labels.phone")}),a.jsx("input",{id:"contact-phone",type:"tel",value:g.contactPhone,onChange:e=>k("contactPhone",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:o("superAdmin.tenants.create.placeholders.adminPhone")})]})]})]}),3===x&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(h,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o("tenants.create.labels.billingAddress")})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"billing-company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.legalName")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"billing-company",type:"text",value:g.billingCompany,onChange:e=>k("billingCompany",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.billingCompany?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.legalName")}),u.billingCompany&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.billingCompany})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"billing-street",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.address")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"billing-street",type:"text",value:g.billingStreet,onChange:e=>k("billingStreet",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.billingStreet?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.address")}),u.billingStreet&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.billingStreet})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"billing-city",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.city")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"billing-city",type:"text",value:g.billingCity,onChange:e=>k("billingCity",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.billingCity?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:o("superAdmin.tenants.create.placeholders.city")}),u.billingCity&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.billingCity})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"billing-state",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("tenants.create.labels.district")}),a.jsx("input",{id:"billing-state",type:"text",value:g.billingState,onChange:e=>k("billingState",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:o("superAdmin.tenants.create.placeholders.district")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"billing-postal-code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("tenants.create.labels.postalCode")," ",o("tenants.create.labels.required")]}),a.jsx("input",{id:"billing-postal-code",type:"text",value:g.billingPostalCode,onChange:e=>k("billingPostalCode",e.target.value),className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent "+(u.billingPostalCode?"border-red-500":"border-gray-300 dark:border-slate-600"),placeholder:"34000"}),u.billingPostalCode&&a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:u.billingPostalCode})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"billing-country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("tenants.create.labels.country")}),a.jsxs("select",{id:"billing-country",value:g.billingCountry,onChange:e=>k("billingCountry",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[a.jsx("option",{value:"TR",children:o("tenants.create.countries.TR")}),a.jsx("option",{value:"US",children:o("tenants.create.countries.US")}),a.jsx("option",{value:"GB",children:o("tenants.create.countries.GB")}),a.jsx("option",{value:"DE",children:o("tenants.create.countries.DE")})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tax-id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("tenants.create.labels.taxNumber")}),a.jsx("input",{id:"tax-id",type:"text",value:g.taxId,onChange:e=>k("taxId",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:"1234567890"})]})]}),4===x&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(n,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o("tenants.create.labels.planFeatures")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o("tenants.create.labels.planSelection")}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{value:"starter",labelKey:"starter",price:"$499/ay"},{value:"professional",labelKey:"professional",price:"$999/ay"},{value:"enterprise",labelKey:"enterprise",price:"$2,499/ay"},{value:"free",labelKey:"free",price:"14 gün ücretsiz"}].map(e=>a.jsxs("button",{onClick:()=>k("plan",e.value),className:"p-4 border-2 rounded-lg text-left transition-all "+(g.plan===e.value?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-slate-600 hover:border-blue-400"),children:[a.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o(`super-admin.tenants.create.plans.${e.labelKey}`)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.price})]},e.value))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"data-residency",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o("tenants.create.labels.dataLocation")}),a.jsxs("select",{id:"data-residency",value:g.dataResidency,onChange:e=>k("dataResidency",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[a.jsx("option",{value:"tr",children:o("tenants.create.dataLocations.tr")}),a.jsx("option",{value:"eu",children:o("tenants.create.dataLocations.eu")}),a.jsx("option",{value:"us",children:o("tenants.create.dataLocations.us")})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o("tenants.create.labels.features")}),a.jsx("div",{className:"space-y-3",children:[{key:"voiceEnabled",labelKey:"voiceEnabled",descKey:"voiceDesc"},{key:"multiChannel",labelKey:"multiChannel",descKey:"multiChannelDesc"},{key:"analytics",labelKey:"analytics",descKey:"analyticsDesc"},{key:"customIntegrations",labelKey:"customIntegrations",descKey:"customIntegrationsDesc"}].map(e=>a.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50 cursor-pointer",children:[a.jsx("span",{className:"sr-only",children:o(`super-admin.tenants.create.features.${e.labelKey}`)}),a.jsx("input",{type:"checkbox",checked:g[e.key],onChange:t=>k(e.key,t.target.checked),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:o(`super-admin.tenants.create.features.${e.labelKey}`)}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:o(`super-admin.tenants.create.features.${e.descKey}`)})]})]},e.key))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"payment-type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o("tenants.create.labels.paymentStatus")}),a.jsxs("select",{id:"payment-type",value:g.paymentType||"monthly_flexible",onChange:e=>k("paymentType",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[a.jsx("option",{value:"prepaid_yearly",children:o("tenants.create.paymentTypes.prepaid_yearly")}),a.jsx("option",{value:"prepaid_6months",children:o("tenants.create.paymentTypes.prepaid_6months")}),a.jsx("option",{value:"monthly_commitment",children:o("tenants.create.paymentTypes.monthly_commitment")}),a.jsx("option",{value:"monthly_flexible",children:o("tenants.create.paymentTypes.monthly_flexible")})]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:o("tenants.create.misc.paymentNote")})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:o("tenants.create.misc.apiConfigOptional")}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4",children:o("tenants.create.misc.apiConfigNote")}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"openai-api-key",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"OpenAI API Key"}),a.jsx("input",{id:"openai-api-key",type:"text",value:g.openaiApiKey||"",onChange:e=>k("openaiApiKey",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:o("superAdmin.tenants.create.placeholders.apiKeyPlaceholder")})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"anthropic-api-key",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Anthropic API Key"}),a.jsx("input",{id:"anthropic-api-key",type:"text",value:g.anthropicApiKey||"",onChange:e=>k("anthropicApiKey",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:o("superAdmin.tenants.create.placeholders.anthropicKeyPlaceholder")})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"webhook-url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Webhook URL"}),a.jsx("input",{id:"webhook-url",type:"url",value:g.webhookUrl||"",onChange:e=>k("webhookUrl",e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:"https://customer-domain.com/webhook"})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsx("button",{onClick:1===x?i:()=>{m(x-1),b({})},className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 transition-colors",children:o(1===x?"tenants.create.buttons.cancel":"tenants.create.buttons.back")}),a.jsx("button",{onClick:4===x?()=>{y(x)&&(c(g),i())}:()=>{y(x)&&m(x+1)},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:o(4===x?"tenants.create.buttons.create":"tenants.create.buttons.next")})]})]})})},K=()=>{const{t:r}=e("super-admin"),l=d(),[n,h]=t.useState([]),[K,$]=t.useState(!0),[R,L]=t.useState(""),[q,D]=t.useState("all"),[_,M]=t.useState(!1),[U,z]=t.useState(null),[O,G]=t.useState(!1),B=j;t.useEffect(()=>{(async()=>{$(!0);try{const e=await B.getTenants({search:R,status:"all"===q?void 0:q});h(e.data),y.info("[TenantsPage] Tenants fetched",{count:e.data.length,mode:N()?"mock":"real"})}catch(e){y.error("[TenantsPage] Fetch failed",{error:e})}finally{$(!1)}})()},[R,q]);const Y=n.reduce((e,t)=>e+t.monthlyRevenue,0),V=n.reduce((e,t)=>e+t.apiCosts.totalMonthlyCost,0),W=Y-V,H=n.length>0?n.reduce((e,t)=>e+t.profitMargin,0)/n.length:0,J=e=>{const t={active:r("tenants.status.active"),trial:r("tenants.status.trial"),past_due:r("tenants.status.past_due"),canceled:r("tenants.status.canceled")};return a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${{active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",trial:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",past_due:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",canceled:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}[e]}`,children:t[e]})},Q=async e=>{G(!0);try{const t={config:{title:"Firma Listesi",subtitle:"AsistanApp Super Admin",description:"Tüm müşteri firmaları ve finansal bilgileri",dateRange:(new Date).toLocaleDateString("tr-TR")},tables:[{title:"Firmalar",headers:["Firma Adı","Plan","Durum","Aylık Gelir","API Maliyeti","Kar Marjı","Ödeme Durumu"],rows:n.map(e=>[e.tenantName,e.subscription.plan,e.subscription.status,`$${e.monthlyRevenue}`,`$${e.apiCosts.totalMonthlyCost}`,`${e.profitMargin.toFixed(1)}%`,e.paymentStatus])}]};"excel"===e?await k(t):await f(t),y.info(`[TenantsPage] Exported ${n.length} tenants as ${e}`)}catch(t){y.error("[TenantsPage] Export failed",{error:t}),alert(r("superAdmin.tenants.messages.exportFailed"))}finally{G(!1)}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Firma Yönetimi"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Tüm müşteri firmalarınızı ve finansal durumlarını yönetin"})]}),a.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[a.jsx(v,{className:"w-5 h-5"}),a.jsx("span",{children:"Yeni Firma Ekle"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Gelir"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:["$",Y.toLocaleString()]})]}),a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:a.jsx(i,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]}),a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm text-green-600 dark:text-green-400",children:[a.jsx(c,{className:"w-4 h-4"}),a.jsx("span",{children:"+12.5% bu ay"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Maliyet"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:["$",V.toLocaleString()]})]}),a.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:a.jsx(w,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]}),a.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm text-gray-600 dark:text-gray-400",children:a.jsx("span",{children:"API + Altyapı"})})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Net Kar"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:["$",W.toLocaleString()]})]}),a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(c,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]}),a.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm text-blue-600 dark:text-blue-400",children:a.jsxs("span",{children:[H.toFixed(1),"% kar marjı"]})})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("tenants.stats.activeTenants")}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:n.filter(e=>"active"===e.subscription.status).length})]}),a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:a.jsx(o,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]}),a.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm text-gray-600 dark:text-gray-400",children:a.jsxs("span",{children:["/",n.length," toplam"]})})]})]}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:r("superAdmin.tenants.searchPlaceholder"),value:R,onChange:e=>L(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(C,{className:"w-5 h-5 text-gray-400"}),a.jsxs("select",{value:q,onChange:e=>D(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[a.jsx("option",{value:"all",children:r("tenants.status.all")}),a.jsx("option",{value:"active",children:r("tenants.status.active")}),a.jsx("option",{value:"trial",children:r("tenants.status.trial")}),a.jsx("option",{value:"past_due",children:r("tenants.status.past_due")})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>z("export"===U?null:"export"),disabled:O,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 transition-colors disabled:opacity-50",children:[a.jsx(A,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:r(O?"tenants.export.exporting":"tenants.export.button")})]}),"export"===U&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-50",children:[a.jsx("button",{onClick:()=>{Q("excel"),z(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-t-lg",children:r("tenants.export.excel")}),a.jsx("button",{onClick:()=>{Q("csv"),z(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-b-lg",children:r("tenants.export.csv")})]})]})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-900 border-b border-gray-200 dark:border-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Firma"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Plan"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Durum"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aylık Gelir"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"API Maliyeti"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Kar Marjı"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ödeme"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"İşlemler"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:K?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-1",children:[0,1,2].map(e=>a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-bounce",style:{animationDelay:.15*e+"s",animationDuration:"0.6s"}},e))}),a.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Yükleniyor..."})]})})}):0===n.length?a.jsx("tr",{children:a.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[a.jsx(s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Firma bulunamadı"})]})}):n.map(e=>{return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(s,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.tenantName}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",e.tenantId]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(t=e.subscription.plan,a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-lg ${{free:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",starter:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",professional:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",enterprise:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"}[t]}`,children:{free:"Ücretsiz",starter:"Başlangıç",professional:"Profesyonel",enterprise:"Kurumsal"}[t]}))}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:J(e.subscription.status)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["$",e.monthlyRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["$",e.totalRevenue.toLocaleString()," toplam"]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["$",e.apiCosts.totalMonthlyCost.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.apiCosts.llm.provider})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:a.jsxs("div",{className:"text-sm font-medium "+(e.profitMargin>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.profitMargin>0?"+":"",e.profitMargin.toFixed(1),"%"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:["paid"===e.paymentStatus&&a.jsx(m,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"pending"===e.paymentStatus&&a.jsx(g,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),"overdue"===e.paymentStatus&&a.jsx(p,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["paid"===e.paymentStatus&&r("tenants.payment.paid"),"pending"===e.paymentStatus&&r("tenants.payment.pending"),"overdue"===e.paymentStatus&&r("tenants.payment.overdue")]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2 relative",children:[a.jsx(u,{to:`/asistansuper/tenants/${e.tenantId}`,className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors",title:r("superAdmin.tenants.viewDetails"),children:a.jsx(S,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a.jsx("button",{onClick:()=>l(`/asistansuper/tenants/${e.tenantId}/edit`),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors",title:r("superAdmin.tenants.edit"),children:a.jsx(F,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a.jsx("button",{onClick:()=>z(U===e.tenantId?null:e.tenantId),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors",title:r("superAdmin.tenants.moreActions"),children:a.jsx(P,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),U===e.tenantId&&a.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-50",children:["active"===e.subscription.status?a.jsxs("button",{onClick:()=>(async e=>{const t=prompt(r("superAdmin.tenants.messages.suspendReasonPrompt"));if(t&&confirm(r("superAdmin.tenants.messages.confirmSuspend"))){try{await B.suspendTenant(e,t),h(t=>t.map(t=>t.tenantId===e?{...t,subscription:{...t.subscription,status:"canceled"}}:t)),y.info(`[TenantsPage] Tenant ${e} suspended`,{reason:t})}catch(a){y.error("[TenantsPage] Suspend failed",{error:a}),alert(r("superAdmin.tenants.messages.actionFailed"))}z(null)}})(e.tenantId),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-t-lg flex items-center gap-2 text-yellow-600 dark:text-yellow-400",children:[a.jsx(T,{className:"w-4 h-4"}),"Askıya Al"]}):a.jsxs("button",{onClick:()=>(async e=>{try{await B.activateTenant(e),h(t=>t.map(t=>t.tenantId===e?{...t,subscription:{...t.subscription,status:"active"}}:t)),y.info(`[TenantsPage] Tenant ${e} activated`)}catch(t){y.error("[TenantsPage] Activate failed",{error:t}),alert(r("superAdmin.tenants.messages.actionFailed"))}z(null)})(e.tenantId),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-t-lg flex items-center gap-2 text-green-600 dark:text-green-400",children:[a.jsx(E,{className:"w-4 h-4"}),r("tenants.actions.activate")]}),a.jsxs("button",{onClick:()=>(async e=>{if(confirm(r("superAdmin.tenants.messages.confirmDelete"))){try{await B.deleteTenant(e),h(t=>t.filter(t=>t.tenantId!==e)),y.info(`[TenantsPage] Tenant ${e} deleted`)}catch(t){y.error("[TenantsPage] Delete failed",{error:t}),alert(r("superAdmin.tenants.messages.actionFailed"))}z(null)}})(e.tenantId),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-b-lg flex items-center gap-2 text-red-600 dark:text-red-400",children:[a.jsx(b,{className:"w-4 h-4"}),"Sil"]})]})]})})]},e.tenantId);var t})})]})})}),a.jsx(I,{isOpen:_,onClose:()=>M(!1),onSubmit:e=>{y.debug("New tenant data:",e),alert(r("superAdmin.tenants.messages.tenantCreated"))}})]})};export{K as default};
