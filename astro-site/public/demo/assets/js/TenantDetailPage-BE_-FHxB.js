import{a as e,al as s,r as a,j as t,d as r,L as l,E as i,v as d,s as n,C as x,y as c,t as o,U as g,W as m,l as p}from"./index-BDKevNej.js";import{m as h}from"./super-admin-tenants.mock-BrsS6Cnh.js";import{i as j}from"./config-D68ZPno9.js";import{A as y}from"./arrow-left-DCynD__3.js";import{D as b}from"./download-BH1Eza0P.js";import{S as u}from"./square-pen-C8xEAW1Z.js";import{C as N}from"./calendar-DKgWgsf7.js";import{Z as f}from"./zap-Bmi9kw2v.js";import{A as k}from"./activity-chfn438z.js";import{M as v}from"./mail-CzR1jFZZ.js";const w=()=>{var w,C,S,D,A,L,M;const{t:$}=e("super-admin"),{tenantId:G}=s(),[B,T]=a.useState(null),[F,I]=a.useState(null),[P,K]=a.useState("30d"),[E,R]=a.useState(!0),U=h;if(a.useEffect(()=>{(async()=>{if(G){R(!0);try{const[e,s]=await Promise.all([U.getTenant(G),U.getTenantUsage(G,P)]);T(e),I(s),p.info("[TenantDetailPage] Data fetched",{tenantId:G,mode:j()?"mock":"real"})}catch(e){p.error("[TenantDetailPage] Fetch failed",{error:e})}finally{R(!1)}}})()},[G,P]),E)return t.jsx("div",{className:"p-4 sm:p-6 lg:p-8 flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:[0,1,2].map(e=>t.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500 animate-bounce",style:{animationDelay:.15*e+"s",animationDuration:"0.6s"}},e))}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Firma bilgileri yükleniyor..."})]})});if(!B||!F)return t.jsx("div",{className:"p-4 sm:p-6 lg:p-8 flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx(r,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:$("tenantDetail.notFound")}),t.jsxs(l,{to:"/asistansuper/tenants",className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:underline",children:[t.jsx(y,{className:"w-4 h-4"}),"Firmalara Dön"]})]})});const W=B.monthlyRevenue-B.apiCosts.totalMonthlyCost,z=B.subscription.usage.conversations/B.subscription.limits.conversations*100;return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(l,{to:"/asistansuper/tenants",className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:t.jsx(y,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),t.jsx("div",{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(i,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:B.tenantName}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",B.tenantId]})]})]})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 transition-colors",children:[t.jsx(b,{className:"w-5 h-5"}),t.jsx("span",{children:"Rapor İndir"})]}),t.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[t.jsx(u,{className:"w-5 h-5"}),t.jsx("span",{children:"Düzenle"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(N,{className:"w-5 h-5 text-gray-400"}),t.jsxs("select",{value:P,onChange:e=>K(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[t.jsx("option",{value:"7d",children:"Son 7 Gün"}),t.jsx("option",{value:"30d",children:"Son 30 Gün"}),t.jsx("option",{value:"90d",children:"Son 90 Gün"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aylık Gelir"}),t.jsx(d,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",B.monthlyRevenue.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["$",B.totalRevenue.toLocaleString()," toplam gelir"]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"API Maliyeti"}),t.jsx(f,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",B.apiCosts.totalMonthlyCost.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[B.apiCosts.llm.provider.toUpperCase()," + ",B.apiCosts.voice.provider]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Net Kar"}),t.jsx(n,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",W.toLocaleString()]}),t.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:[B.profitMargin.toFixed(1),"% kar marjı"]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ödeme Durumu"}),"paid"===B.paymentStatus?t.jsx(x,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):t.jsx(r,{className:"w-5 h-5 text-red-600 dark:text-red-400"})]}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"paid"===B.paymentStatus?"Ödendi":"Bekliyor"}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Sonraki: ",new Date(B.nextBillingDate).toLocaleDateString("tr-TR")]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5"}),"API Maliyet Dağılımı"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["LLM (",B.apiCosts.llm.provider.toUpperCase(),")"]}),t.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",B.apiCosts.llm.totalCost]})]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{children:["GPT-4: ",B.apiCosts.llm.breakdown.gpt4.calls.toLocaleString()," calls"]}),t.jsxs("span",{children:["$",B.apiCosts.llm.breakdown.gpt4.cost]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{children:["GPT-3.5: ",B.apiCosts.llm.breakdown.gpt35.calls.toLocaleString()," calls"]}),t.jsxs("span",{children:["$",B.apiCosts.llm.breakdown.gpt35.cost]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{children:["Embedding: ",B.apiCosts.llm.breakdown.embedding.calls.toLocaleString()," calls"]}),t.jsxs("span",{children:["$",B.apiCosts.llm.breakdown.embedding.cost]})]})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sesli Asistan"}),t.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",B.apiCosts.voice.totalCost]})]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Provider:"}),t.jsx("span",{children:B.apiCosts.voice.provider})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Toplam Dakika:"}),t.jsx("span",{children:B.apiCosts.voice.totalMinutes})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Dakika Başı:"}),t.jsxs("span",{children:["$",(B.apiCosts.voice.totalCost/B.apiCosts.voice.totalMinutes).toFixed(2)]})]})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"WhatsApp"}),t.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",B.apiCosts.whatsapp.totalCost]})]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Toplam Mesaj:"}),t.jsx("span",{children:B.apiCosts.whatsapp.totalMessages.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Mesaj Başı:"}),t.jsxs("span",{children:["$",(B.apiCosts.whatsapp.totalCost/B.apiCosts.whatsapp.totalMessages).toFixed(4)]})]})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Depolama"}),t.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",B.apiCosts.storage.totalCost]})]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Toplam:"}),t.jsxs("span",{children:[B.apiCosts.storage.totalGB," GB"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"GB Başı:"}),t.jsxs("span",{children:["$",(B.apiCosts.storage.totalCost/B.apiCosts.storage.totalGB).toFixed(2)]})]})]})]}),B.apiCosts.other.map((e,s)=>t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.description}),t.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",e.totalCost]})]})},s))]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[t.jsx(o,{className:"w-5 h-5"}),"Konuşma İstatistikleri"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kullanım"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[B.subscription.usage.conversations.toLocaleString()," / ",B.subscription.limits.conversations.toLocaleString()]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full transition-all",style:{width:`${z}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[z.toFixed(1),"% kullanıldı"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Toplam Mesaj"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:F.messages.total.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ort. Süre"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[Math.floor(F.conversations.avgDuration/60),"m ",F.conversations.avgDuration%60,"s"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"AI Yanıtları"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:F.messages.aiGenerated.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Agent Yanıtları"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:F.messages.agentHandled.toLocaleString()})]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[t.jsx(k,{className:"w-5 h-5"}),"Kullanım & Kaynaklar"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4"}),"Aktif Kullanıcılar"]}),t.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[B.subscription.usage.users," / ",B.subscription.limits.users]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:t.jsx("div",{className:"bg-green-600 dark:bg-green-400 h-2 rounded-full",style:{width:B.subscription.usage.users/B.subscription.limits.users*100+"%"}})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[t.jsx(m,{className:"w-4 h-4"}),"Depolama"]}),t.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[B.subscription.usage.storage," GB / ",B.subscription.limits.storage," GB"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:t.jsx("div",{className:"bg-purple-600 dark:bg-purple-400 h-2 rounded-full",style:{width:B.subscription.usage.storage/B.subscription.limits.storage*100+"%"}})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Dosya Sayısı"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:F.storage.files.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Medya Dosyası"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:F.storage.media.toLocaleString()})]})]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Fatura Bilgileri"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(i,{className:"w-5 h-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Şirket"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:null==(w=B.billingAddress)?void 0:w.company})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(v,{className:"w-5 h-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"E-posta"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:B.billingEmail})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Adres"}),t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[null==(C=B.billingAddress)?void 0:C.street,t.jsx("br",{}),null==(S=B.billingAddress)?void 0:S.city,", ",null==(D=B.billingAddress)?void 0:D.state," ",null==(A=B.billingAddress)?void 0:A.postalCode,t.jsx("br",{}),null==(L=B.billingAddress)?void 0:L.country]})]}),(null==(M=B.billingAddress)?void 0:M.taxId)&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Vergi No"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:B.billingAddress.taxId})]})]})]})]})]})};export{w as default};
