import{j as e,X as I,v as C,g as M,E as q,p as _,n as P,U as B,d as U,C as z,h as G,a as O,G as Y,l as g}from"./index-BqAy8n8z.js";import{r as u}from"./vendor-CdXbigxo.js";import{a as Q,L as V}from"./router-Bk68T6VO.js";import{u as F}from"./i18n-CvUHAAnz.js";import{M as W}from"./map-pin-C6hROTTg.js";import{a as X,e as H}from"./export-helpers-v2-u3-3gC-U.js";import{m as J}from"./super-admin-tenants.mock-DahryOey.js";import{i as Z}from"./config-BkJFRJBJ.js";import{P as ee}from"./plus-Kuwrq6bx.js";import{T as te}from"./trending-down-BwrHQiKr.js";import{F as ae}from"./funnel-B7ShTRVQ.js";import{D as re}from"./download-D-22nJZV.js";import{E as se}from"./eye-C6DnTThP.js";import{S as le}from"./square-pen-DsLwCH0L.js";import{E as ne}from"./ellipsis-vertical-C7gAAktx.js";import{B as de}from"./ban-BZHC133W.js";import{C as ie}from"./circle-play-DP355FCo.js";import"./charts-CyRV38jT.js";import"./formatters-CbXmQXMO.js";const ce=({isOpen:n,onClose:h,onSubmit:m})=>{const{t}=F("super-admin"),[x,f]=u.useState(1),[s,w]=u.useState({companyName:"",companyEmail:"",companyPhone:"",website:"",contactFirstName:"",contactLastName:"",contactEmail:"",contactPhone:"",billingCompany:"",billingStreet:"",billingCity:"",billingState:"",billingPostalCode:"",billingCountry:"TR",taxId:"",plan:"professional",dataResidency:"tr",voiceEnabled:!0,multiChannel:!0,analytics:!0,customIntegrations:!1}),[l,k]=u.useState({});if(!n)return null;const j=a=>{const o={};return a===1&&(s.companyName.trim()||(o.companyName=t("tenants.create.validation.companyNameRequired")),s.companyEmail.trim()||(o.companyEmail=t("tenants.create.validation.emailRequired")),s.companyPhone.trim()||(o.companyPhone=t("tenants.create.validation.phoneRequired"))),a===2&&(s.contactFirstName.trim()||(o.contactFirstName=t("tenants.create.validation.firstNameRequired")),s.contactLastName.trim()||(o.contactLastName=t("tenants.create.validation.lastNameRequired")),s.contactEmail.trim()||(o.contactEmail=t("tenants.create.validation.emailRequired"))),a===3&&(s.billingCompany.trim()||(o.billingCompany=t("tenants.create.validation.companyNameRequired")),s.billingStreet.trim()||(o.billingStreet=t("tenants.create.validation.addressRequired")),s.billingCity.trim()||(o.billingCity=t("tenants.create.validation.cityRequired")),s.billingPostalCode.trim()||(o.billingPostalCode=t("tenants.create.validation.postalCodeRequired"))),k(o),Object.keys(o).length===0},N=()=>{j(x)&&f(x+1)},b=()=>{f(x-1),k({})},p=()=>{j(x)&&(m(s),h())},i=(a,o)=>{w(y=>({...y,[a]:o})),l[a]&&k(y=>({...y,[a]:void 0}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t("tenants.create.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t("tenants.create.misc.step",{current:x,total:4})})]}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(I,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsx("div",{className:"px-6 pt-4",children:e.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4].map(a=>e.jsx("div",{className:`flex-1 h-2 rounded-full transition-colors ${a<=x?"bg-blue-600":"bg-gray-200 dark:bg-slate-700"}`},a))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[x===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(C,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t("tenants.create.labels.companyInfo")})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.companyName")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"company-name",type:"text",value:s.companyName,onChange:a=>i("companyName",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.companyName?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.companyName")}),l.companyName&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.companyName})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.email")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"company-email",type:"email",value:s.companyEmail,onChange:a=>i("companyEmail",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.companyEmail?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.companyEmail")}),l.companyEmail&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.companyEmail})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company-phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.phone")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"company-phone",type:"tel",value:s.companyPhone,onChange:a=>i("companyPhone",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.companyPhone?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.companyPhone")}),l.companyPhone&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.companyPhone})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company-website",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("tenants.create.labels.website")}),e.jsx("input",{id:"company-website",type:"url",value:s.website,onChange:a=>i("website",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:"https://acme.com"})]})]}),x===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t("tenants.create.labels.contactPerson")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact-first-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.firstName")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"contact-first-name",type:"text",value:s.contactFirstName,onChange:a=>i("contactFirstName",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.contactFirstName?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.adminFirstName")}),l.contactFirstName&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.contactFirstName})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact-last-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.lastName")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"contact-last-name",type:"text",value:s.contactLastName,onChange:a=>i("contactLastName",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.contactLastName?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.adminLastName")}),l.contactLastName&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.contactLastName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.email")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"contact-email",type:"email",value:s.contactEmail,onChange:a=>i("contactEmail",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.contactEmail?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.adminEmail")}),l.contactEmail&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.contactEmail})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contact-phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("tenants.create.labels.phone")}),e.jsx("input",{id:"contact-phone",type:"tel",value:s.contactPhone,onChange:a=>i("contactPhone",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:t("superAdmin.tenants.create.placeholders.adminPhone")})]})]})]}),x===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t("tenants.create.labels.billingAddress")})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"billing-company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.legalName")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"billing-company",type:"text",value:s.billingCompany,onChange:a=>i("billingCompany",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.billingCompany?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.legalName")}),l.billingCompany&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.billingCompany})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"billing-street",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.address")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"billing-street",type:"text",value:s.billingStreet,onChange:a=>i("billingStreet",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.billingStreet?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.address")}),l.billingStreet&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.billingStreet})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"billing-city",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.city")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"billing-city",type:"text",value:s.billingCity,onChange:a=>i("billingCity",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.billingCity?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:t("superAdmin.tenants.create.placeholders.city")}),l.billingCity&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.billingCity})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-state",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("tenants.create.labels.district")}),e.jsx("input",{id:"billing-state",type:"text",value:s.billingState,onChange:a=>i("billingState",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:t("superAdmin.tenants.create.placeholders.district")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"billing-postal-code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("tenants.create.labels.postalCode")," ",t("tenants.create.labels.required")]}),e.jsx("input",{id:"billing-postal-code",type:"text",value:s.billingPostalCode,onChange:a=>i("billingPostalCode",a.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent ${l.billingPostalCode?"border-red-500":"border-gray-300 dark:border-slate-600"}`,placeholder:"34000"}),l.billingPostalCode&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:l.billingPostalCode})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("tenants.create.labels.country")}),e.jsxs("select",{id:"billing-country",value:s.billingCountry,onChange:a=>i("billingCountry",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[e.jsx("option",{value:"TR",children:t("tenants.create.countries.TR")}),e.jsx("option",{value:"US",children:t("tenants.create.countries.US")}),e.jsx("option",{value:"GB",children:t("tenants.create.countries.GB")}),e.jsx("option",{value:"DE",children:t("tenants.create.countries.DE")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax-id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("tenants.create.labels.taxNumber")}),e.jsx("input",{id:"tax-id",type:"text",value:s.taxId,onChange:a=>i("taxId",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:"1234567890"})]})]}),x===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(q,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t("tenants.create.labels.planFeatures")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:t("tenants.create.labels.planSelection")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{value:"starter",labelKey:"starter",price:"$499/ay"},{value:"professional",labelKey:"professional",price:"$999/ay"},{value:"enterprise",labelKey:"enterprise",price:"$2,499/ay"},{value:"free",labelKey:"free",price:"14 gün ücretsiz"}].map(a=>e.jsxs("button",{onClick:()=>i("plan",a.value),className:`p-4 border-2 rounded-lg text-left transition-all ${s.plan===a.value?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-slate-600 hover:border-blue-400"}`,children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t(`super-admin.tenants.create.plans.${a.labelKey}`)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.price})]},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"data-residency",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:t("tenants.create.labels.dataLocation")}),e.jsxs("select",{id:"data-residency",value:s.dataResidency,onChange:a=>i("dataResidency",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[e.jsx("option",{value:"tr",children:t("tenants.create.dataLocations.tr")}),e.jsx("option",{value:"eu",children:t("tenants.create.dataLocations.eu")}),e.jsx("option",{value:"us",children:t("tenants.create.dataLocations.us")})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:t("tenants.create.labels.features")}),e.jsx("div",{className:"space-y-3",children:[{key:"voiceEnabled",labelKey:"voiceEnabled",descKey:"voiceDesc"},{key:"multiChannel",labelKey:"multiChannel",descKey:"multiChannelDesc"},{key:"analytics",labelKey:"analytics",descKey:"analyticsDesc"},{key:"customIntegrations",labelKey:"customIntegrations",descKey:"customIntegrationsDesc"}].map(a=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50 cursor-pointer",children:[e.jsx("span",{className:"sr-only",children:t(`super-admin.tenants.create.features.${a.labelKey}`)}),e.jsx("input",{type:"checkbox",checked:s[a.key],onChange:o=>i(a.key,o.target.checked),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t(`super-admin.tenants.create.features.${a.labelKey}`)}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t(`super-admin.tenants.create.features.${a.descKey}`)})]})]},a.key))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payment-type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:t("tenants.create.labels.paymentStatus")}),e.jsxs("select",{id:"payment-type",value:s.paymentType||"monthly_flexible",onChange:a=>i("paymentType",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[e.jsx("option",{value:"prepaid_yearly",children:t("tenants.create.paymentTypes.prepaid_yearly")}),e.jsx("option",{value:"prepaid_6months",children:t("tenants.create.paymentTypes.prepaid_6months")}),e.jsx("option",{value:"monthly_commitment",children:t("tenants.create.paymentTypes.monthly_commitment")}),e.jsx("option",{value:"monthly_flexible",children:t("tenants.create.paymentTypes.monthly_flexible")})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:t("tenants.create.misc.paymentNote")})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:t("tenants.create.misc.apiConfigOptional")}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4",children:t("tenants.create.misc.apiConfigNote")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"openai-api-key",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"OpenAI API Key"}),e.jsx("input",{id:"openai-api-key",type:"text",value:s.openaiApiKey||"",onChange:a=>i("openaiApiKey",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:t("superAdmin.tenants.create.placeholders.apiKeyPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"anthropic-api-key",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Anthropic API Key"}),e.jsx("input",{id:"anthropic-api-key",type:"text",value:s.anthropicApiKey||"",onChange:a=>i("anthropicApiKey",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:t("superAdmin.tenants.create.placeholders.anthropicKeyPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"webhook-url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Webhook URL"}),e.jsx("input",{id:"webhook-url",type:"url",value:s.webhookUrl||"",onChange:a=>i("webhookUrl",a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",placeholder:"https://customer-domain.com/webhook"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-slate-700",children:[e.jsx("button",{onClick:x===1?h:b,className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 transition-colors",children:t(x===1?"tenants.create.buttons.cancel":"tenants.create.buttons.back")}),e.jsx("button",{onClick:x===4?p:N,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:t(x===4?"tenants.create.buttons.create":"tenants.create.buttons.next")})]})]})})},Fe=()=>{const{t:n}=F("super-admin"),h=Q(),[m,t]=u.useState([]),[x,f]=u.useState(!0),[s,w]=u.useState(""),[l,k]=u.useState("all"),[j,N]=u.useState(!1),[b,p]=u.useState(null),[i,a]=u.useState(!1),o=J;u.useEffect(()=>{(async()=>{f(!0);try{const d=await o.getTenants({search:s,status:l==="all"?void 0:l});t(d.data),g.info("[TenantsPage] Tenants fetched",{count:d.data.length,mode:Z()?"mock":"real"})}catch(d){g.error("[TenantsPage] Fetch failed",{error:d})}finally{f(!1)}})()},[s,l]);const y=m.reduce((r,d)=>r+d.monthlyRevenue,0),S=m.reduce((r,d)=>r+d.apiCosts.totalMonthlyCost,0),T=y-S,$=m.length>0?m.reduce((r,d)=>r+d.profitMargin,0)/m.length:0,E=r=>{const d={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",trial:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",past_due:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",canceled:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"},c={active:n("tenants.status.active"),trial:n("tenants.status.trial"),past_due:n("tenants.status.past_due"),canceled:n("tenants.status.canceled")};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${d[r]}`,children:c[r]})},A=async r=>{a(!0);try{const d={config:{title:"Firma Listesi",subtitle:"AsistanApp Super Admin",description:"Tüm müşteri firmaları ve finansal bilgileri",dateRange:new Date().toLocaleDateString("tr-TR")},tables:[{title:"Firmalar",headers:["Firma Adı","Plan","Durum","Aylık Gelir","API Maliyeti","Kar Marjı","Ödeme Durumu"],rows:m.map(c=>[c.tenantName,c.subscription.plan,c.subscription.status,`$${c.monthlyRevenue}`,`$${c.apiCosts.totalMonthlyCost}`,`${c.profitMargin.toFixed(1)}%`,c.paymentStatus])}]};r==="excel"?await X(d):await H(d),g.info(`[TenantsPage] Exported ${m.length} tenants as ${r}`)}catch(d){g.error("[TenantsPage] Export failed",{error:d}),alert(n("superAdmin.tenants.messages.exportFailed"))}finally{a(!1)}},K=async r=>{const d=prompt(n("superAdmin.tenants.messages.suspendReasonPrompt"));if(!(!d||!confirm(n("superAdmin.tenants.messages.confirmSuspend")))){try{await o.suspendTenant(r,d),t(c=>c.map(v=>v.tenantId===r?{...v,subscription:{...v.subscription,status:"canceled"}}:v)),g.info(`[TenantsPage] Tenant ${r} suspended`,{reason:d})}catch(c){g.error("[TenantsPage] Suspend failed",{error:c}),alert(n("superAdmin.tenants.messages.actionFailed"))}p(null)}},L=async r=>{try{await o.activateTenant(r),t(d=>d.map(c=>c.tenantId===r?{...c,subscription:{...c.subscription,status:"active"}}:c)),g.info(`[TenantsPage] Tenant ${r} activated`)}catch(d){g.error("[TenantsPage] Activate failed",{error:d}),alert(n("superAdmin.tenants.messages.actionFailed"))}p(null)},R=async r=>{if(confirm(n("superAdmin.tenants.messages.confirmDelete"))){try{await o.deleteTenant(r),t(d=>d.filter(c=>c.tenantId!==r)),g.info(`[TenantsPage] Tenant ${r} deleted`)}catch(d){g.error("[TenantsPage] Delete failed",{error:d}),alert(n("superAdmin.tenants.messages.actionFailed"))}p(null)}},D=r=>{const d={free:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",starter:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",professional:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",enterprise:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"},c={free:"Ücretsiz",starter:"Başlangıç",professional:"Profesyonel",enterprise:"Kurumsal"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-lg ${d[r]}`,children:c[r]})};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Firma Yönetimi"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Tüm müşteri firmalarınızı ve finansal durumlarını yönetin"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{children:"Yeni Firma Ekle"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Gelir"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:["$",y.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(_,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"+12.5% bu ay"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Maliyet"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:["$",S.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.jsx("span",{children:"API + Altyapı"})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Net Kar"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:["$",T.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(P,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm text-blue-600 dark:text-blue-400",children:e.jsxs("span",{children:[$.toFixed(1),"% kar marjı"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("tenants.stats.activeTenants")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:m.filter(r=>r.subscription.status==="active").length})]}),e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(B,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("span",{children:["/",m.length," toplam"]})})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:n("superAdmin.tenants.searchPlaceholder"),value:s,onChange:r=>w(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:l,onChange:r=>k(r.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[e.jsx("option",{value:"all",children:n("tenants.status.all")}),e.jsx("option",{value:"active",children:n("tenants.status.active")}),e.jsx("option",{value:"trial",children:n("tenants.status.trial")}),e.jsx("option",{value:"past_due",children:n("tenants.status.past_due")})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(b==="export"?null:"export"),disabled:i,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 transition-colors disabled:opacity-50",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:n(i?"tenants.export.exporting":"tenants.export.button")})]}),b==="export"&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-50",children:[e.jsx("button",{onClick:()=>{A("excel"),p(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-t-lg",children:n("tenants.export.excel")}),e.jsx("button",{onClick:()=>{A("csv"),p(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-b-lg",children:n("tenants.export.csv")})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-900 border-b border-gray-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Firma"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Plan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aylık Gelir"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"API Maliyeti"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Kar Marjı"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ödeme"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"İşlemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:x?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-1",children:[0,1,2].map(r=>e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-bounce",style:{animationDelay:`${r*.15}s`,animationDuration:"0.6s"}},r))}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Yükleniyor..."})]})})}):m.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[e.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Firma bulunamadı"})]})}):m.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(C,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.tenantName}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",r.tenantId]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D(r.subscription.plan)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E(r.subscription.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["$",r.monthlyRevenue.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["$",r.totalRevenue.toLocaleString()," toplam"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["$",r.apiCosts.totalMonthlyCost.toLocaleString()]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.apiCosts.llm.provider})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:`text-sm font-medium ${r.profitMargin>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[r.profitMargin>0?"+":"",r.profitMargin.toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[r.paymentStatus==="paid"&&e.jsx(z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.paymentStatus==="pending"&&e.jsx(G,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),r.paymentStatus==="overdue"&&e.jsx(O,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[r.paymentStatus==="paid"&&n("tenants.payment.paid"),r.paymentStatus==="pending"&&n("tenants.payment.pending"),r.paymentStatus==="overdue"&&n("tenants.payment.overdue")]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 relative",children:[e.jsx(V,{to:`/asistansuper/tenants/${r.tenantId}`,className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors",title:n("superAdmin.tenants.viewDetails"),children:e.jsx(se,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>h(`/asistansuper/tenants/${r.tenantId}/edit`),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors",title:n("superAdmin.tenants.edit"),children:e.jsx(le,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>p(b===r.tenantId?null:r.tenantId),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors",title:n("superAdmin.tenants.moreActions"),children:e.jsx(ne,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),b===r.tenantId&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-50",children:[r.subscription.status==="active"?e.jsxs("button",{onClick:()=>K(r.tenantId),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-t-lg flex items-center gap-2 text-yellow-600 dark:text-yellow-400",children:[e.jsx(de,{className:"w-4 h-4"}),"Askıya Al"]}):e.jsxs("button",{onClick:()=>L(r.tenantId),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-t-lg flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(ie,{className:"w-4 h-4"}),n("tenants.actions.activate")]}),e.jsxs("button",{onClick:()=>R(r.tenantId),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-b-lg flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(Y,{className:"w-4 h-4"}),"Sil"]})]})]})})]},r.tenantId))})]})})}),e.jsx(ce,{isOpen:j,onClose:()=>N(!1),onSubmit:r=>{g.debug("New tenant data:",r),alert(n("superAdmin.tenants.messages.tenantCreated"))}})]})};export{Fe as default};
//# sourceMappingURL=TenantsPage-38dQas9d.js.map
