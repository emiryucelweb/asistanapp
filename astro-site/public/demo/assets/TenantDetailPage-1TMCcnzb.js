import{j as e,a as b,v as u,p as M,n as $,C as T,s as P,o as B,h as G,J as F,l as N}from"./index-2fxJB1qk.js";import{r as i}from"./vendor-CytKP1XG.js";import{d as I,L as f}from"./router-D3gKB-SL.js";import{m as E}from"./super-admin-tenants.mock-DahryOey.js";import{i as K}from"./config-BkJFRJBJ.js";import{u as R}from"./i18n-b0rokw0Y.js";import{A as k}from"./arrow-left-bzQJA2Vo.js";import{D as U}from"./download-Cw3vDK6C.js";import{S as q}from"./square-pen-DTmGXhg1.js";import{C as Y}from"./calendar-B7gWC9oA.js";import{Z}from"./zap-Bt8Svbb2.js";import{A as z}from"./activity-DTNV2QZH.js";import{M as H}from"./mail-D45e3K4V.js";import"./charts-B4blyqpX.js";const de=()=>{var o,g,m,p,h,j,y;const{t:v}=R("super-admin"),{tenantId:r}=I(),[s,w]=i.useState(null),[a,C]=i.useState(null),[d,S]=i.useState("30d"),[D,n]=i.useState(!0),x=E;if(i.useEffect(()=>{(async()=>{if(r){n(!0);try{const[l,L]=await Promise.all([x.getTenant(r),x.getTenantUsage(r,d)]);w(l),C(L),N.info("[TenantDetailPage] Data fetched",{tenantId:r,mode:K()?"mock":"real"})}catch(l){N.error("[TenantDetailPage] Fetch failed",{error:l})}finally{n(!1)}}})()},[r,d]),D)return e.jsx("div",{className:"p-4 sm:p-6 lg:p-8 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:[0,1,2].map(t=>e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500 animate-bounce",style:{animationDelay:`${t*.15}s`,animationDuration:"0.6s"}},t))}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Firma bilgileri yükleniyor..."})]})});if(!s||!a)return e.jsx("div",{className:"p-4 sm:p-6 lg:p-8 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:v("tenantDetail.notFound")}),e.jsxs(f,{to:"/asistansuper/tenants",className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:underline",children:[e.jsx(k,{className:"w-4 h-4"}),"Firmalara Dön"]})]})});const A=s.monthlyRevenue-s.apiCosts.totalMonthlyCost,c=s.subscription.usage.conversations/s.subscription.limits.conversations*100;return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{to:"/asistansuper/tenants",className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(k,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(u,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.tenantName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",s.tenantId]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 transition-colors",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"Rapor İndir"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{children:"Düzenle"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:d,onChange:t=>S(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"Son 7 Gün"}),e.jsx("option",{value:"30d",children:"Son 30 Gün"}),e.jsx("option",{value:"90d",children:"Son 90 Gün"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aylık Gelir"}),e.jsx(M,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",s.monthlyRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["$",s.totalRevenue.toLocaleString()," toplam gelir"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"API Maliyeti"}),e.jsx(Z,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",s.apiCosts.totalMonthlyCost.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.apiCosts.llm.provider.toUpperCase()," + ",s.apiCosts.voice.provider]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Net Kar"}),e.jsx($,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",A.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:[s.profitMargin.toFixed(1),"% kar marjı"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ödeme Durumu"}),s.paymentStatus==="paid"?e.jsx(T,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(b,{className:"w-5 h-5 text-red-600 dark:text-red-400"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.paymentStatus==="paid"?"Ödendi":"Bekliyor"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Sonraki: ",new Date(s.nextBillingDate).toLocaleDateString("tr-TR")]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"API Maliyet Dağılımı"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["LLM (",s.apiCosts.llm.provider.toUpperCase(),")"]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",s.apiCosts.llm.totalCost]})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["GPT-4: ",s.apiCosts.llm.breakdown.gpt4.calls.toLocaleString()," calls"]}),e.jsxs("span",{children:["$",s.apiCosts.llm.breakdown.gpt4.cost]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["GPT-3.5: ",s.apiCosts.llm.breakdown.gpt35.calls.toLocaleString()," calls"]}),e.jsxs("span",{children:["$",s.apiCosts.llm.breakdown.gpt35.cost]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Embedding: ",s.apiCosts.llm.breakdown.embedding.calls.toLocaleString()," calls"]}),e.jsxs("span",{children:["$",s.apiCosts.llm.breakdown.embedding.cost]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sesli Asistan"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",s.apiCosts.voice.totalCost]})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Provider:"}),e.jsx("span",{children:s.apiCosts.voice.provider})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Toplam Dakika:"}),e.jsx("span",{children:s.apiCosts.voice.totalMinutes})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dakika Başı:"}),e.jsxs("span",{children:["$",(s.apiCosts.voice.totalCost/s.apiCosts.voice.totalMinutes).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"WhatsApp"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",s.apiCosts.whatsapp.totalCost]})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Toplam Mesaj:"}),e.jsx("span",{children:s.apiCosts.whatsapp.totalMessages.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mesaj Başı:"}),e.jsxs("span",{children:["$",(s.apiCosts.whatsapp.totalCost/s.apiCosts.whatsapp.totalMessages).toFixed(4)]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Depolama"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",s.apiCosts.storage.totalCost]})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{children:[s.apiCosts.storage.totalGB," GB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"GB Başı:"}),e.jsxs("span",{children:["$",(s.apiCosts.storage.totalCost/s.apiCosts.storage.totalGB).toFixed(2)]})]})]})]}),s.apiCosts.other.map((t,l)=>e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.description}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:["$",t.totalCost]})]})},l))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Konuşma İstatistikleri"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kullanım"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[s.subscription.usage.conversations.toLocaleString()," / ",s.subscription.limits.conversations.toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full transition-all",style:{width:`${c}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[c.toFixed(1),"% kullanıldı"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Toplam Mesaj"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.messages.total.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ort. Süre"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[Math.floor(a.conversations.avgDuration/60),"m ",a.conversations.avgDuration%60,"s"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"AI Yanıtları"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.messages.aiGenerated.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Agent Yanıtları"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.messages.agentHandled.toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"Kullanım & Kaynaklar"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Aktif Kullanıcılar"]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[s.subscription.usage.users," / ",s.subscription.limits.users]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 dark:bg-green-400 h-2 rounded-full",style:{width:`${s.subscription.usage.users/s.subscription.limits.users*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Depolama"]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[s.subscription.usage.storage," GB / ",s.subscription.limits.storage," GB"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 dark:bg-purple-400 h-2 rounded-full",style:{width:`${s.subscription.usage.storage/s.subscription.limits.storage*100}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Dosya Sayısı"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.storage.files.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Medya Dosyası"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.storage.media.toLocaleString()})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Fatura Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Şirket"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(o=s.billingAddress)==null?void 0:o.company})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"E-posta"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.billingEmail})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Adres"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[(g=s.billingAddress)==null?void 0:g.street,e.jsx("br",{}),(m=s.billingAddress)==null?void 0:m.city,", ",(p=s.billingAddress)==null?void 0:p.state," ",(h=s.billingAddress)==null?void 0:h.postalCode,e.jsx("br",{}),(j=s.billingAddress)==null?void 0:j.country]})]}),((y=s.billingAddress)==null?void 0:y.taxId)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Vergi No"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.billingAddress.taxId})]})]})]})]})]})};export{de as default};
//# sourceMappingURL=TenantDetailPage-1TMCcnzb.js.map
