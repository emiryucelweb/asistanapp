import{aj as d,j as e,d as G,v as N,p as k,n as v,C as D,T as q,h as Z,l as u}from"./index-B70CDX4p.js";import{r}from"./vendor-CdXbigxo.js";import{a as K,L as x}from"./router-Bk68T6VO.js";import{m as c,i as Y}from"./config-BkJFRJBJ.js";import{u as U}from"./i18n-CvUHAAnz.js";import{A}from"./activity-yCHXv_fS.js";import{A as O,a as J}from"./arrow-up-right-CZM7ak1W.js";import"./charts-CyRV38jT.js";const W=[{id:"tenant-001",businessName:"Smile Dental Klinik",owner:{name:"Dr. Ahmet Demir",email:"ahmet@smileklinik.com",phone:"+90 532 123 4567"},industry:"Dental",plan:"Professional",status:"active",stats:{totalConversations:4523,activeAgents:5,monthlyRevenue:2499,growth:14.2},integrations:["whatsapp","instagram","web"],createdAt:"2024-01-15",lastActivity:"2025-12-10T10:15:00Z",billingCycle:"monthly",nextBillingDate:"2025-12-15"},{id:"tenant-002",businessName:"Coffee Break Cafe",owner:{name:"Elif Kara",email:"elif@coffeebreak.com",phone:"+90 533 234 5678"},industry:"Food & Beverage",plan:"Starter",status:"active",stats:{totalConversations:2847,activeAgents:3,monthlyRevenue:999,growth:8.7},integrations:["whatsapp","instagram"],createdAt:"2024-03-20",lastActivity:"2025-12-10T09:42:00Z",billingCycle:"monthly",nextBillingDate:"2025-12-20"},{id:"tenant-003",businessName:"TechFix Servis",owner:{name:"Mehmet Yılmaz",email:"mehmet@techfix.com",phone:"+90 534 345 6789"},industry:"Technology Services",plan:"Professional",status:"trial",stats:{totalConversations:1234,activeAgents:2,monthlyRevenue:0,growth:0},integrations:["whatsapp","web"],createdAt:"2025-11-25",lastActivity:"2025-12-10T08:30:00Z",billingCycle:"trial",trialEndsAt:"2025-12-25"},{id:"tenant-004",businessName:"Beauty Salon Güzellik",owner:{name:"Ayşe Şen",email:"ayse@beautysalon.com",phone:"+90 535 456 7890"},industry:"Beauty & Wellness",plan:"Enterprise",status:"active",stats:{totalConversations:6789,activeAgents:8,monthlyRevenue:4999,growth:22.3},integrations:["whatsapp","instagram","facebook","web"],createdAt:"2023-11-10",lastActivity:"2025-12-10T10:25:00Z",billingCycle:"annual",nextBillingDate:"2026-11-10"},{id:"tenant-005",businessName:"AutoCare Oto Servis",owner:{name:"Can Özkan",email:"can@autocare.com",phone:"+90 536 567 8901"},industry:"Automotive",plan:"Starter",status:"suspended",stats:{totalConversations:892,activeAgents:1,monthlyRevenue:999,growth:-5.2},integrations:["whatsapp"],createdAt:"2024-06-12",lastActivity:"2025-11-28T14:20:00Z",billingCycle:"monthly",suspendedAt:"2025-12-01",suspendedReason:"Payment overdue"}],l={totalTenants:127,activeTenants:118,trialTenants:7,totalRevenue:{monthly:287450,growth:18.7}},R={async getStats(){return(await d.get("/super-admin/dashboard/stats")).data},async globalSearch(a){return(await d.get("/super-admin/dashboard/search",{params:{query:a}})).data},async getNotifications(a=20){return(await d.get("/super-admin/dashboard/notifications",{params:{limit:a}})).data},async markNotificationRead(a){return(await d.post(`/super-admin/dashboard/notifications/${a}/read`)).data},async getRecentActivity(){return(await d.get("/super-admin/dashboard/activity")).data},async getTopTenants(a=5){return(await d.get("/super-admin/dashboard/top-tenants",{params:{limit:a}})).data},async getSystemHealth(){return(await d.get("/super-admin/dashboard/system-health")).data}},b={stats:{totalTenants:l.totalTenants,activeTenants:l.activeTenants,trialTenants:l.trialTenants,pastDueTenants:2,totalMonthlyRevenue:l.totalRevenue.monthly,totalMonthlyCosts:95820,totalProfit:l.totalRevenue.monthly-95820,profitMargin:(l.totalRevenue.monthly-95820)/l.totalRevenue.monthly*100,growthRate:l.totalRevenue.growth,churnRate:2.5},recentActivity:[{id:1,type:"new",tenant:"Modern Kafe",tenantId:"tenant-005",action:"Yeni firma kaydı",time:"5 dakika önce",color:"green"},{id:2,type:"payment",tenant:"Smile Dental Klinik",tenantId:"tenant-001",action:"Ödeme alındı (8.500 TRY)",time:"1 saat önce",color:"blue"},{id:3,type:"upgrade",tenant:"TechHub Yazılım",tenantId:"tenant-002",action:"Enterprise plana yükseltildi",time:"3 saat önce",color:"purple"},{id:4,type:"warning",tenant:"Güzellik Salonu Luna",tenantId:"tenant-003",action:"API kullanım limiti aşıldı",time:"5 saat önce",color:"red"},{id:5,type:"api",tenant:"E-Ticaret Mağazası",tenantId:"tenant-004",action:"Günlük mesaj limiti %85",time:"1 gün önce",color:"yellow"}],topTenants:W.slice(0,5).map(a=>({name:a.businessName,revenue:a.stats.monthlyRevenue,growth:a.stats.growth,plan:a.plan})),systemHealth:[{name:"API Server",status:"operational",uptime:"99.97%"},{name:"Database",status:"operational",uptime:"99.99%"},{name:"Cache",status:"operational",uptime:"99.8%"},{name:"Storage",status:"operational",uptime:"98.5%"}]},Q={async getStats(){return await c(),b.stats},async getRecentActivity(){return await c(),b.recentActivity},async getTopTenants(a=5){return await c(),b.topTenants.slice(0,a)},async getSystemHealth(){return await c(),b.systemHealth},async globalSearch(a){return await c(),[{id:"1",type:"tenant",title:"Acme E-commerce",subtitle:"Enterprise Plan"},{id:"2",type:"tenant",title:"TechStart SaaS",subtitle:"Professional Plan"},{id:"3",type:"user",title:"John Doe",subtitle:"Admin @ Acme"}].filter(m=>m.title.toLowerCase().includes(a.toLowerCase())||m.subtitle.toLowerCase().includes(a.toLowerCase()))},async markNotificationRead(a){return await c(),{success:!0}}},ne=()=>{const{t:a}=U("admin"),[i,m]=r.useState(""),[h,g]=r.useState([]),[C,S]=r.useState(!1),[y,$]=r.useState([]),[f,I]=r.useState([]),[n,M]=r.useState(null),[j,P]=r.useState([]),[w,T]=r.useState(!0),o=K(),p=Q;r.useEffect(()=>{(async()=>{T(!0);try{const[s,z,H,F]=await Promise.all([p.getRecentActivity(),p.getTopTenants(5),p.getStats(),p.getSystemHealth()]);$(s),I(z),M(H),P(F),u.info("[AdminDashboard] Data fetched",{mode:Y()?"mock":"real"})}catch(s){u.error("[AdminDashboard] Fetch failed",{error:s})}finally{T(!1)}})()},[]);const L=async t=>{if(m(t),!t.trim()){g([]);return}S(!0);try{const s=await R.globalSearch(t);g(s)}catch(s){u.error("Global search error",s),g([])}finally{S(!1)}},E=t=>{t.type==="tenant"?o(`/asistansuper/tenants/${t.id}`):t.type==="user"&&o(`/asistansuper/users?search=${t.id}`),m(""),g([])},B=async t=>{try{(t.type==="warning"||t.type==="api")&&await R.markNotificationRead(t.id.toString())}catch(s){u.error("Failed to mark notification as read",s)}t.type==="payment"?o(`/asistansuper/tenants/${t.tenantId}?tab=billing`):t.type==="warning"?o(`/asistansuper/tenants/${t.tenantId}?tab=billing`):t.type==="api"?o(`/asistansuper/tenants/${t.tenantId}?tab=usage`):o(`/asistansuper/tenants/${t.tenantId}`)};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:a("dashboard.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:a("dashboard.subtitle")})]}),e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a("dashboard.searchPlaceholder"),value:i,onChange:t=>L(t.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i&&e.jsx("div",{className:"absolute top-full mt-2 w-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:C?e.jsx("div",{className:"p-4 text-center text-gray-500",children:a("dashboard.searching")}):(h==null?void 0:h.length)>0?e.jsx("div",{className:"p-2",children:h.map((t,s)=>e.jsxs("button",{onClick:()=>E(t),className:"w-full text-left p-3 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.subtitle})]},s))}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:a("dashboard.noResults")})})]})]}),w||!n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:[0,1,2].map(t=>e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600 animate-bounce",style:{animationDelay:`${t*.15}s`,animationDuration:"0.6s"}},t))})}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:a("dashboard.stats.totalTenants")}),e.jsx(N,{className:"w-5 h-5 opacity-90"})]}),e.jsx("p",{className:"text-3xl font-bold",children:n.totalTenants||0}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm",children:[e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full",children:a("dashboard.stats.active",{count:n.activeTenants||0})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full",children:a("dashboard.stats.trial",{count:n.trialTenants||0})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:a("dashboard.stats.monthlyRevenue")}),e.jsx(k,{className:"w-5 h-5 opacity-90"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",(n.totalMonthlyRevenue||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:a("dashboard.stats.growthThisMonth",{rate:n.growthRate||0})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:a("dashboard.stats.netProfit")}),e.jsx(v,{className:"w-5 h-5 opacity-90"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",(n.totalProfit||0).toLocaleString()]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm",children:e.jsx("span",{children:a("dashboard.stats.profitMargin",{margin:n.profitMargin||0})})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:a("dashboard.systemHealth")}),e.jsx(A,{className:"w-5 h-5 opacity-90"})]}),e.jsx("p",{className:"text-3xl font-bold",children:"99.8%"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:a("dashboard.allSystemsOperational")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a("dashboard.recentActivity")}),w?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:[0,1,2].map(t=>e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600 animate-bounce",style:{animationDelay:`${t*.15}s`,animationDuration:"0.6s"}},t))})}):!y||y.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:a("dashboard.noActivity")}):e.jsx("div",{className:"space-y-4",children:y.map(t=>e.jsxs("button",{onClick:()=>B(t),className:"w-full flex items-start gap-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer text-left",children:[e.jsxs("div",{className:`p-2 rounded-lg ${t.color==="green"?"bg-green-100 dark:bg-green-900/30":t.color==="blue"?"bg-blue-100 dark:bg-blue-900/30":t.color==="purple"?"bg-purple-100 dark:bg-purple-900/30":t.color==="red"?"bg-red-100 dark:bg-red-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:[t.type==="new"&&e.jsx(N,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),t.type==="payment"&&e.jsx(k,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),t.type==="upgrade"&&e.jsx(v,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),t.type==="warning"&&e.jsx(q,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),t.type==="api"&&e.jsx(A,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.tenant}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.action})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),t.time]})]},t.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a("dashboard.systemStatus")}),e.jsx("div",{className:"space-y-4",children:j==null?void 0:j.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Uptime: ",t.uptime]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.color==="green"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:t.status==="operational"?a("dashboard.operational"):a("dashboard.slow")})]},t.name))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a("dashboard.topTenants")}),e.jsx(x,{to:"/asistansuper/financial-reports",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:a("dashboard.allReports")})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a("dashboard.table.tenant")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a("dashboard.table.plan")}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a("dashboard.table.monthlyRevenue")}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a("dashboard.table.growth")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:[0,1,2].map(t=>e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 animate-bounce",style:{animationDelay:`${t*.15}s`,animationDuration:"0.6s"}},t))})})})}):!f||f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:a("dashboard.noTenants")})}):f.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center text-blue-600 dark:text-blue-400 font-semibold text-sm",children:s+1}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.plan})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["$",t.revenue.toLocaleString()]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-1",children:t.growth>0?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["+",t.growth,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),e.jsxs("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:[t.growth,"%"]})]})})})]},s))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(x,{to:"/asistansuper/tenants",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[e.jsx(N,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a("dashboard.quickActions.tenantsManagement")}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a("dashboard.quickActions.viewAllTenants")})]}),e.jsxs(x,{to:"/asistansuper/financial-reports",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[e.jsx(k,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a("dashboard.quickActions.financialReports")}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a("dashboard.quickActions.revenueAnalysis")})]}),e.jsxs(x,{to:"/asistansuper/analytics",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[e.jsx(A,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a("dashboard.quickActions.analytics")}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a("dashboard.quickActions.detailedStats")})]}),e.jsxs(x,{to:"/asistansuper/system",className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:shadow-lg transition-shadow",children:[e.jsx(D,{className:"w-8 h-8 text-orange-600 dark:text-orange-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a("dashboard.quickActions.system")}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a("dashboard.quickActions.systemStatus")})]})]})]})};export{ne as default};
//# sourceMappingURL=AdminDashboard-Cxo6stXW.js.map
