{"version":3,"file":"AgentAIChatPage-_-VVg1uz.js","sources":["../../src/features/agent/pages/ai-chat/AgentAIChatPage.tsx"],"sourcesContent":["/**\n * Agent AI Chat Page - AI Assistant for Agents\n * Enterprise-ready AI assistant for agents\n * \n * Features:\n * - Customer information queries\n * - Internal status inquiries\n * - Real-time AI responses\n * - Suggestion system\n * - Full i18n support\n * - Dynamic locale support\n * - Backend integration ready\n */\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { formatTime } from '@/features/agent/utils/locale';\nimport { Send, Bot, User, Sparkles } from 'lucide-react';\nimport { useAuthStore } from '@/shared/stores/auth-store';\n\ninterface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: string;\n  suggestions?: string[];\n}\n\nconst AgentAIChatPage: React.FC = () => {\n  const { t, i18n } = useTranslation('agent');\n  const { user } = useAuthStore();\n  \n  // Initial welcome message with i18n\n  const [messages, setMessages] = useState<ChatMessage[]>([\n    {\n      id: '1',\n      role: 'assistant',\n      content: t('aiChat.welcome.message', { \n        name: user?.name || t('aiChat.welcome.defaultName')\n      }),\n      timestamp: new Date().toISOString(),\n      suggestions: [\n        t('aiChat.suggestions.todayStats'),\n        t('aiChat.suggestions.frequentQuestions'),\n        t('aiChat.suggestions.waitingCustomers'),\n        t('aiChat.suggestions.teamStatus'),\n      ],\n    },\n  ]);\n  \n  const [inputValue, setInputValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = useCallback(async () => {\n    if (!inputValue.trim() || isLoading) return;\n\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: inputValue,\n      timestamp: new Date().toISOString(),\n    };\n\n    setMessages((prev) => [...prev, userMessage]);\n    setInputValue('');\n    setIsLoading(true);\n\n    // TODO: Replace with real AI Chat API call\n    // Example:\n    // try {\n    //   const response = await aiChatService.sendMessage({\n    //     message: userMessage.content,\n    //     userId: user?.id,\n    //     context: 'agent-assistant',\n    //   });\n    //   \n    //   const aiResponse: ChatMessage = {\n    //     id: response.id,\n    //     role: 'assistant',\n    //     content: response.content,\n    //     timestamp: response.timestamp,\n    //     suggestions: response.suggestions,\n    //   };\n    //   \n    //   setMessages((prev) => [...prev, aiResponse]);\n    // } catch (error) {\n    //   console.error('[AI Chat] Failed to send message:', error);\n    //   // Handle error with user-friendly message\n    // } finally {\n    //   setIsLoading(false);\n    // }\n\n    // Temporary: Simulate API response\n    setTimeout(() => {\n      const aiResponse: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: t('aiChat.responses.processing'),\n        timestamp: new Date().toISOString(),\n        suggestions: [\n          t('aiChat.suggestions.todayStats'),\n          t('aiChat.suggestions.waitingCustomers'),\n          t('aiChat.suggestions.performance'),\n        ],\n      };\n      setMessages((prev) => [...prev, aiResponse]);\n      setIsLoading(false);\n    }, 1500);\n  }, [inputValue, isLoading, t, user?.id]);\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setInputValue(suggestion);\n  };\n\n  const formatMessageTime = (timestamp: string) => {\n    return formatTime(new Date(timestamp), i18n.language, {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen bg-gray-50 dark:bg-slate-900\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 px-4 sm:px-6 py-3 sm:py-4\">\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-purple-500 to-blue-600 dark:from-purple-600 dark:to-blue-700 rounded-lg sm:rounded-xl flex items-center justify-center flex-shrink-0\">\n            <Sparkles className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h1 className=\"text-lg sm:text-xl font-bold text-gray-900 dark:text-white truncate\">\n              {t('aiChat.header.title')}\n            </h1>\n            <p className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate\">\n              {t('aiChat.header.subtitle')}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-3 sm:p-4 md:p-6\">\n        <div className=\"max-w-4xl mx-auto space-y-4 sm:space-y-6\">\n          {messages.map((message) => (\n            <div key={message.id} className={`flex gap-2 sm:gap-3 md:gap-4 ${message.role === 'user' ? 'justify-end' : ''}`}>\n              {message.role === 'assistant' && (\n                <div className=\"hidden sm:flex w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-br from-purple-500 to-blue-600 dark:from-purple-600 dark:to-blue-700 rounded-lg items-center justify-center flex-shrink-0\">\n                  <Bot className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" />\n                </div>\n              )}\n\n              <div className={`flex-1 max-w-full sm:max-w-2xl ${message.role === 'user' ? 'flex justify-end' : ''}`}>\n                <div\n                  className={`rounded-xl sm:rounded-2xl p-3 sm:p-4 ${\n                    message.role === 'user'\n                      ? 'bg-blue-600 dark:bg-blue-700 text-white'\n                      : 'bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700'\n                  }`}\n                >\n                  <p className={`whitespace-pre-wrap ${message.role === 'assistant' ? 'text-gray-900 dark:text-white' : ''}`}>\n                    {message.content}\n                  </p>\n                  <p className={`text-xs mt-2 ${message.role === 'user' ? 'text-blue-100' : 'text-gray-500 dark:text-gray-400'}`}>\n                    {formatMessageTime(message.timestamp)}\n                  </p>\n\n                  {/* Suggestions */}\n                  {message.suggestions && message.suggestions.length > 0 && (\n                    <div className=\"mt-4 space-y-2\">\n                      <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                        {t('aiChat.suggestions.title')}\n                      </p>\n                      {message.suggestions.map((suggestion, idx) => (\n                        <button\n                          key={idx}\n                          onClick={() => handleSuggestionClick(suggestion)}\n                          className=\"block w-full text-left px-3 py-2 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg text-sm transition-colors\"\n                          type=\"button\"\n                        >\n                          {suggestion}\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {message.role === 'user' && (\n                <div className=\"hidden sm:flex w-7 h-7 sm:w-8 sm:h-8 bg-blue-600 dark:bg-blue-700 rounded-lg items-center justify-center flex-shrink-0\">\n                  <User className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" />\n                </div>\n              )}\n            </div>\n          ))}\n\n          {isLoading && (\n            <div className=\"flex gap-4\">\n              <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-600 dark:from-purple-600 dark:to-blue-700 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <Bot className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"flex-1 max-w-2xl\">\n                <div className=\"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-2xl p-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-purple-600 dark:bg-purple-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }} />\n                    <div className=\"w-2 h-2 bg-purple-600 dark:bg-purple-400 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }} />\n                    <div className=\"w-2 h-2 bg-purple-600 dark:bg-purple-400 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* Input */}\n      <div className=\"bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-slate-700 p-3 sm:p-4\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"flex flex-col sm:flex-row items-stretch sm:items-end gap-2 sm:gap-3\">\n            <div className=\"flex-1 bg-gray-50 dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg sm:rounded-xl focus-within:border-purple-500 dark:focus-within:border-purple-400 transition-colors\">\n              <textarea\n                value={inputValue}\n                onChange={(e) => setInputValue(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n                    handleSendMessage();\n                  }\n                }}\n                placeholder={t('aiChat.askQuestion')}\n                rows={2}\n                className=\"w-full px-3 sm:px-4 py-2 sm:py-3 bg-transparent text-sm sm:text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none focus:outline-none\"\n              />\n            </div>\n            <button\n              onClick={handleSendMessage}\n              disabled={!inputValue.trim() || isLoading}\n              className=\"px-4 py-2.5 sm:px-6 sm:py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 dark:from-purple-700 dark:to-blue-800 dark:hover:from-purple-800 dark:hover:to-blue-900 disabled:opacity-50 disabled:cursor-not-allowed text-white text-sm sm:text-base font-medium rounded-lg sm:rounded-xl transition-all flex items-center justify-center gap-2\"\n              type=\"button\"\n            >\n              <Send className=\"w-4 h-4 sm:w-5 sm:h-5\" />\n              <span>{t('aiChat.send')}</span>\n            </button>\n          </div>\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center hidden sm:block\">\n            {t('aiChat.disclaimer')}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AgentAIChatPage;\n"],"names":["AgentAIChatPage","i18n","useTranslation","user","useAuthStore","messages","setMessages","useState","inputValue","setInputValue","isLoading","setIsLoading","messagesEndRef","useRef","scrollToBottom","_a","useEffect","handleSendMessage","useCallback","userMessage","prev","aiResponse","handleSuggestionClick","suggestion","formatMessageTime","timestamp","formatTime","jsxs","jsx","Sparkles","message","Bot","idx","User","e","Send"],"mappings":"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"}