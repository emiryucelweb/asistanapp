import{j as e,p as N,n as p,U as w,s as k,v as T,l as m}from"./index-BqAy8n8z.js";import{r as l}from"./vendor-CdXbigxo.js";import{a as E}from"./export-helpers-v2-u3-3gC-U.js";import{m as c,i as G}from"./config-BkJFRJBJ.js";import{u as B}from"./i18n-CvUHAAnz.js";import{D as K}from"./download-D-22nJZV.js";import{T as O}from"./trending-down-BwrHQiKr.js";import{C as I}from"./chart-pie-tyhfo4QU.js";import{A as z,a as H}from"./arrow-up-right-BtFbBp4r.js";import"./charts-CyRV38jT.js";import"./router-Bk68T6VO.js";import"./formatters-CbXmQXMO.js";const d={summary:{"30d":{totalTenants:24,activeTenants:18,trialTenants:4,totalMonthlyRevenue:45750,totalMonthlyCosts:15280,totalProfit:30470,averageRevenuePerTenant:2541,churnRate:2.5,growthRate:15.3},"90d":{totalTenants:24,activeTenants:18,trialTenants:4,totalMonthlyRevenue:137250,totalMonthlyCosts:45840,totalProfit:91410,averageRevenuePerTenant:2541,churnRate:2.3,growthRate:18.7},"1y":{totalTenants:24,activeTenants:18,trialTenants:4,totalMonthlyRevenue:549e3,totalMonthlyCosts:183360,totalProfit:365640,averageRevenuePerTenant:2541,churnRate:2.1,growthRate:22.4}},monthlyTrend:{"30d":[{month:"Nis",revenue:38500,costs:13200,profit:25300},{month:"May",revenue:41200,costs:14100,profit:27100},{month:"Haz",revenue:43800,costs:14800,profit:29e3},{month:"Tem",revenue:45750,costs:15280,profit:30470}],"90d":[{month:"Oca",revenue:32e3,costs:11500,profit:20500},{month:"Şub",revenue:35200,costs:12200,profit:23e3},{month:"Mar",revenue:36500,costs:12800,profit:23700},{month:"Nis",revenue:38500,costs:13200,profit:25300},{month:"May",revenue:41200,costs:14100,profit:27100},{month:"Haz",revenue:43800,costs:14800,profit:29e3},{month:"Tem",revenue:45750,costs:15280,profit:30470}],"1y":[{month:"Ağu 23",revenue:28e3,costs:10200,profit:17800},{month:"Eyl 23",revenue:30500,costs:10800,profit:19700},{month:"Eki 23",revenue:31200,costs:11100,profit:20100},{month:"Kas 23",revenue:33500,costs:11600,profit:21900},{month:"Ara 23",revenue:35e3,costs:12e3,profit:23e3},{month:"Oca 24",revenue:32e3,costs:11500,profit:20500},{month:"Şub 24",revenue:35200,costs:12200,profit:23e3},{month:"Mar 24",revenue:36500,costs:12800,profit:23700},{month:"Nis 24",revenue:38500,costs:13200,profit:25300},{month:"May 24",revenue:41200,costs:14100,profit:27100},{month:"Haz 24",revenue:43800,costs:14800,profit:29e3},{month:"Tem 24",revenue:45750,costs:15280,profit:30470}]},planDistribution:[{plan:"Enterprise",count:6,revenue:15e3,percentage:32.8},{plan:"Professional",count:8,revenue:19980,percentage:43.7},{plan:"Starter",count:4,revenue:7980,percentage:17.4},{plan:"Trial",count:6,revenue:2790,percentage:6.1}],topTenants:[{name:"Acme E-commerce",revenue:2500,profit:1618,growth:12.5},{name:"TechStart SaaS",revenue:2400,profit:1547,growth:18.2},{name:"HealthCare Plus",revenue:2200,profit:1091,growth:-5.3},{name:"Fashion Boutique",revenue:1999,profit:1299,growth:22.1},{name:"Food Delivery Co",revenue:1899,profit:1234,growth:8.7}],costBreakdown:{"30d":[{category:"LLM API",amount:8500,percentage:55.6},{category:"Voice Services",amount:3200,percentage:20.9},{category:"WhatsApp",amount:2100,percentage:13.7},{category:"Storage",amount:980,percentage:6.4},{category:"Other",amount:500,percentage:3.3}],"90d":[{category:"LLM API",amount:25500,percentage:55.6},{category:"Voice Services",amount:9600,percentage:20.9},{category:"WhatsApp",amount:6300,percentage:13.7},{category:"Storage",amount:2940,percentage:6.4},{category:"Other",amount:1500,percentage:3.3}],"1y":[{category:"LLM API",amount:102e3,percentage:55.6},{category:"Voice Services",amount:38400,percentage:20.9},{category:"WhatsApp",amount:25200,percentage:13.7},{category:"Storage",amount:11760,percentage:6.4},{category:"Other",amount:6e3,percentage:3.3}]}},U={async getFinancialSummary(a="30d"){return await c(),d.summary[a]},async getMonthlyTrend(a="30d"){return await c(),d.monthlyTrend[a]},async getPlanDistribution(){return await c(),d.planDistribution},async getTopTenants(a=5){return await c(),d.topTenants.slice(0,a)},async getCostBreakdown(a="30d"){return await c(),d.costBreakdown[a]}},re=()=>{const{t:a}=B("super-admin"),[s,S]=l.useState(null),[h,$]=l.useState([]),[u,D]=l.useState([]),[y,M]=l.useState([]),[f,F]=l.useState([]),[i,R]=l.useState("30d"),[j,b]=l.useState(!1),[x,v]=l.useState(!1),g=s?s.totalProfit/s.totalMonthlyRevenue*100:0,o=U;l.useEffect(()=>{(async()=>{v(!0);try{const[n,r,P,L,C]=await Promise.all([o.getFinancialSummary(i),o.getMonthlyTrend(i),o.getPlanDistribution(),o.getTopTenants(5),o.getCostBreakdown(i)]);S(n),$(r),D(P),M(L),F(C),m.info("[FinancialReports] All data fetched",{period:i,mode:G()?"mock":"real"})}catch(n){m.error("[FinancialReports] Fetch failed",{error:n})}finally{v(!1)}})()},[i]);const A=async t=>{if(!s){alert(a("financial.messages.noDataYet"));return}b(!0);try{const n={config:{title:a("financial.title"),subtitle:"AsistanApp Super Admin",description:`${a("financial.subtitle")} - ${a(`super-admin.financial.periods.${i}`)}`,dateRange:new Date().toLocaleDateString("tr-TR"),metadata:{generatedBy:"Super Admin",generatedAt:new Date().toISOString(),company:"AsistanApp"}},stats:{title:"Genel Özet",items:[{label:"Toplam Gelir",value:`$${s.totalMonthlyRevenue.toLocaleString()}`},{label:"Toplam Maliyet",value:`$${s.totalMonthlyCosts.toLocaleString()}`},{label:"Net Kar",value:`$${s.totalProfit.toLocaleString()}`},{label:"Kar Marjı",value:`${g.toFixed(1)}%`},{label:"Aktif Firma",value:s.activeTenants.toString()},{label:"Ort. Gelir/Firma",value:`$${s.averageRevenuePerTenant.toLocaleString()}`}]},tables:[{title:"Aylık Trend",headers:["Ay","Gelir","Maliyet","Kar"],rows:h.map(r=>[r.month,`$${r.revenue}`,`$${r.costs}`,`$${r.profit}`])},{title:"Plan Dağılımı",headers:["Plan","Firma Sayısı","Gelir","Oran"],rows:u.map(r=>[r.plan,r.count.toString(),`$${r.revenue}`,`${r.percentage}%`])},{title:"En Karlı Firmalar",headers:["Firma","Gelir","Kar","Büyüme"],rows:y.map(r=>[r.name,`$${r.revenue}`,`$${r.profit}`,`${r.growth>0?"+":""}${r.growth}%`])},{title:"Maliyet Dağılımı",headers:["Kategori","Tutar","Oran"],rows:f.map(r=>[r.category,`$${r.amount}`,`${r.percentage}%`])}]};t==="excel"&&(await E(n),m.info("[FinancialReports] Excel export successful"))}catch(n){m.error("[FinancialReports] Export failed",{error:n}),alert(a("financial.messages.exportFailed"))}finally{b(!1)}};return x&&!s?e.jsx("div",{className:"p-4 sm:p-6 lg:p-8 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:[0,1,2].map(t=>e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500 animate-bounce",style:{animationDelay:`${t*.15}s`,animationDuration:"0.6s"}},t))}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("financial.messages.loading")})]})}):s?e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:a("financial.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:a("financial.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:i,onChange:t=>R(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:[e.jsx("option",{value:"30d",children:a("financial.periods.30d")}),e.jsx("option",{value:"90d",children:a("financial.periods.90d")}),e.jsx("option",{value:"1y",children:a("financial.periods.1y")})]}),e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>A("excel"),disabled:j||x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:a(j?"financial.export.exporting":x?"financial.export.loading":"financial.export.button")})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Toplam Gelir"}),e.jsx(N,{className:"w-5 h-5 opacity-90"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",s.totalMonthlyRevenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsxs("span",{children:["+",s.growthRate,"% büyüme"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Toplam Maliyet"}),e.jsx(O,{className:"w-5 h-5 opacity-90"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",s.totalMonthlyCosts.toLocaleString()]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm",children:e.jsxs("span",{children:[(s.totalMonthlyCosts/s.totalMonthlyRevenue*100).toFixed(1),"% of revenue"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Net Kar"}),e.jsx(p,{className:"w-5 h-5 opacity-90"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",s.totalProfit.toLocaleString()]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm",children:e.jsxs("span",{children:[g.toFixed(1),"% kar marjı"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Aktif Firmalar"}),e.jsx(w,{className:"w-5 h-5 opacity-90"})]}),e.jsx("p",{className:"text-3xl font-bold",children:s.activeTenants}),e.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm",children:e.jsxs("span",{children:["/",s.totalTenants," toplam firma"]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6 flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Gelir Trendi"]}),e.jsx("div",{className:"space-y-4",children:h.map((t,n)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.month}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["$",t.revenue.toLocaleString()]}),e.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["$",t.costs.toLocaleString()]}),e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:["$",t.profit.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex gap-1 h-8",children:[e.jsx("div",{className:"bg-green-500 dark:bg-green-600 rounded",style:{width:`${t.revenue/5e4*100}%`},title:`Gelir: $${t.revenue}`}),e.jsx("div",{className:"bg-red-500 dark:bg-red-600 rounded",style:{width:`${t.costs/5e4*100}%`},title:`Maliyet: $${t.costs}`})]})]},n))}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gelir"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Maliyet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kar"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Plan Dağılımı"]}),e.jsx("div",{className:"space-y-4",children:u.map((t,n)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.plan}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",t.count," firma)"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["$",t.revenue.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.percentage,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full transition-all",style:{width:`${t.percentage}%`}})})]},n))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6 flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Maliyet Dağılımı"]}),e.jsx("div",{className:"space-y-4",children:f.map((t,n)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.category}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["$",t.amount.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.percentage,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 dark:bg-orange-400 h-2 rounded-full transition-all",style:{width:`${t.percentage}%`}})})]},n))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"En İyi Performans Gösteren Firmalar"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Sıra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Firma"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Aylık Gelir"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Net Kar"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Büyüme"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:y.map((t,n)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold text-sm",children:n+1})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["$",t.revenue.toLocaleString()]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsxs("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["$",t.profit.toLocaleString()]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-1",children:t.growth>0?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["+",t.growth,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),e.jsxs("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:[t.growth,"%"]})]})})})]},n))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:e.jsx(p,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300",children:"Güçlü Büyüme"}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 mt-1",children:["Son 30 günde %",s.growthRate," büyüme kaydedildi"]})]})]})}),e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/40 rounded-lg",children:e.jsx(N,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-300",children:"Sağlıklı Kar Marjı"}),e.jsxs("p",{className:"text-xs text-green-700 dark:text-green-400 mt-1",children:["%",g.toFixed(1)," kar marjı ile hedefin üzerinde"]})]})]})}),e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-900 dark:text-purple-300",children:a("financial.insights.lowChurn")}),e.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-400 mt-1",children:a("financial.insights.lowChurnDesc",{rate:s.churnRate})})]})]})})]})]}):e.jsx("div",{className:"p-4 sm:p-6 lg:p-8 flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("financial.messages.loadFailed")})})})};export{re as default};
//# sourceMappingURL=FinancialReportsPage-D8MQOWxj.js.map
