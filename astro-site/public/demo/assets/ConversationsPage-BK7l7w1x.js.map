{"version":3,"file":"ConversationsPage-BK7l7w1x.js","sources":["../../../../node_modules/lucide-react/dist/esm/icons/phone-call.js","../../../../node_modules/lucide-react/dist/esm/icons/phone-incoming.js","../../src/features/admin/pages/conversations/ConversationsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 2a9 9 0 0 1 9 9\", key: \"1itnx2\" }],\n  [\"path\", { d: \"M13 6a5 5 0 0 1 5 5\", key: \"11nki7\" }],\n  [\n    \"path\",\n    {\n      d: \"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384\",\n      key: \"9njp5v\"\n    }\n  ]\n];\nconst PhoneCall = createLucideIcon(\"phone-call\", __iconNode);\n\nexport { __iconNode, PhoneCall as default };\n//# sourceMappingURL=phone-call.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 2v6h6\", key: \"1mfrl5\" }],\n  [\"path\", { d: \"m22 2-6 6\", key: \"6f0sa0\" }],\n  [\n    \"path\",\n    {\n      d: \"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384\",\n      key: \"9njp5v\"\n    }\n  ]\n];\nconst PhoneIncoming = createLucideIcon(\"phone-incoming\", __iconNode);\n\nexport { __iconNode, PhoneIncoming as default };\n//# sourceMappingURL=phone-incoming.js.map\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { logger } from '@/shared/utils/logger';\nimport { useSearchParams } from 'react-router-dom';\nimport { \n  MessageCircle, \n  Instagram, \n  Facebook, \n  Globe,\n  Clock,\n  Search,\n  Filter,\n  ChevronDown,\n  User,\n  Users,\n  Paperclip,\n  Image,\n  Video,\n  FileText,\n  X,\n  Send,\n  Phone,\n  Mail,\n  ExternalLink,\n  MapPin,\n  AlertCircle,\n  UserCheck,\n  Bot as BotIcon,\n  PhoneCall,\n  Mic,\n  Volume2,\n  PhoneIncoming,\n  PhoneMissed,\n  Maximize2,\n  Minimize2\n} from 'lucide-react';\n\n// WhatsApp icon component (Lucide doesn't have it, so we'll create a simple one)\nconst WhatsAppIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-5 h-5\">\n    <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\"/>\n  </svg>\n);\n\ntype Channel = 'instagram' | 'whatsapp' | 'facebook' | 'web' | 'phone';\n\ninterface Message {\n  id: string;\n  text: string;\n  sender: 'customer' | 'agent';\n  timestamp: Date;\n  agentName?: string; // 'Asistan', 'Ahmet (Ekip)', 'Firma Sahibi' vs.\n  attachments?: {\n    type: 'image' | 'video' | 'file';\n    name: string;\n    url: string;\n  }[];\n  isVoiceTranscript?: boolean; // Sesli konuÅŸmadan transkript mi?\n  voiceDuration?: number; // Sesli mesaj sÃ¼resi (saniye)\n}\n\ninterface Conversation {\n  id: string;\n  channel: Channel;\n  customerName: string;\n  customerAvatar?: string;\n  lastMessage: string;\n  lastMessageTime: Date;\n  unreadCount: number;\n  messages: Message[];\n  needsHelp: boolean; // Asistan yardÄ±m istiyor, insan yardÄ±mÄ± gerekli\n  assignedTo?: 'ai' | 'human'; // Kime atanmÄ±ÅŸ\n  assignedAgent?: string; // Hangi ekip Ã¼yesine atanmÄ±ÅŸ\n  aiStuckReason?: string; // AI neden tÄ±kandÄ±\n  isLiveCall?: boolean; // Åžu anda canlÄ± arama var mÄ±?\n  isUrgent?: boolean; // Acil durum mu?\n  callDuration?: number; // Arama sÃ¼resi (saniye)\n  customerProfile: {\n    instagram?: {\n      username: string;\n      profileUrl: string;\n    };\n    whatsapp?: {\n      phoneNumber: string;\n    };\n    facebook?: {\n      name: string;\n      profileUrl: string;\n    };\n    web?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n      phoneNumber?: string;\n    };\n    phone?: {\n      phoneNumber: string;\n      callHistory?: {\n        date: Date;\n        duration: number;\n        answeredBy: 'ai' | 'human' | 'missed';\n      }[];\n    };\n  };\n}\n\nconst channelIcons: Record<Channel, { icon: React.ReactNode; color: string; bg: string }> = {\n  instagram: {\n    icon: <Instagram className=\"w-5 h-5\" />,\n    color: 'text-pink-600',\n    bg: 'bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500'\n  },\n  whatsapp: {\n    icon: <WhatsAppIcon />,\n    color: 'text-green-600',\n    bg: 'bg-green-500'\n  },\n  facebook: {\n    icon: <Facebook className=\"w-5 h-5\" />,\n    color: 'text-blue-600',\n    bg: 'bg-blue-600'\n  },\n  web: {\n    icon: <Globe className=\"w-5 h-5\" />,\n    color: 'text-orange-600',\n    bg: 'bg-orange-500'\n  },\n  phone: {\n    icon: <PhoneCall className=\"w-5 h-5\" />,\n    color: 'text-purple-600',\n    bg: 'bg-gradient-to-br from-purple-500 to-purple-700'\n  }\n};\n\n// TODO: Replace with real API call to fetch conversations\n// Mock data removed - use backend API endpoints\n\nconst ConversationsPage: React.FC = () => {\n  const { t, i18n } = useTranslation('admin');\n  const [activeTab, setActiveTab] = useState<'assistant' | 'employee' | 'past' | 'phone'>('assistant');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedChannel, setSelectedChannel] = useState<Channel | 'all'>('all');\n  const [filterNeedsHelp, setFilterNeedsHelp] = useState(false); // Filter for AI stuck conversations\n  const [selectedConversation, setSelectedConversation] = useState<Conversation | null>(null);\n  const [messageInput, setMessageInput] = useState('');\n  const [attachments, setAttachments] = useState<File[]>([]);\n  const [showAttachmentMenu, setShowAttachmentMenu] = useState(false);\n  const [showProfileModal, setShowProfileModal] = useState(false);\n  const [showAssignModal, setShowAssignModal] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  \n  // Active conversations - load all at once\n  const [activeConversations, setActiveConversations] = useState<Conversation[]>([]);\n  \n  // Past conversations - load 20 at a time\n  const [pastConversations, setPastConversations] = useState<Conversation[]>([]);\n  const [pastPage, setPastPage] = useState(1);\n  const [hasMorePast, setHasMorePast] = useState(true);\n  const PAST_PAGE_SIZE = 20;\n\n  // URL params for deep linking\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  // Keyboard shortcuts for fullscreen\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Escape: Exit fullscreen or close conversation\n      if (e.key === 'Escape') {\n        if (isFullscreen) {\n          setIsFullscreen(false);\n        } else if (selectedConversation) {\n          setSelectedConversation(null);\n        }\n      }\n      // F11: Toggle fullscreen (if conversation is open)\n      if (e.key === 'F11' && selectedConversation) {\n        e.preventDefault();\n        setIsFullscreen(!isFullscreen);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isFullscreen, selectedConversation]);\n\n  useEffect(() => {\n    // TODO: Load conversations from backend API\n    // Example:\n    // const fetchConversations = async () => {\n    //   const activeData = await api.get('/conversations/active');\n    //   setActiveConversations(activeData);\n    //   const pastData = await api.get('/conversations/past', { params: { page: 1, limit: PAST_PAGE_SIZE } });\n    //   setPastConversations(pastData.conversations);\n    //   setHasMorePast(pastData.hasMore);\n    // };\n    // fetchConversations();\n  }, []);\n\n  // Deep linking: Open conversation from URL parameter\n  useEffect(() => {\n    const conversationIdFromUrl = searchParams.get('openConversation');\n    if (conversationIdFromUrl && activeConversations.length > 0) {\n      // Find conversation in active list\n      const conversation = activeConversations.find(c => c.id === conversationIdFromUrl);\n      if (conversation) {\n        setSelectedConversation(conversation);\n        // Clear URL parameter after opening\n        setSearchParams({});\n      }\n    }\n  }, [searchParams, activeConversations, setSearchParams]);\n\n  // Auto-move conversations to past after 30 minutes of inactivity\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = Date.now();\n      const THIRTY_MINUTES = 30 * 60 * 1000;\n\n      setActiveConversations(prev => {\n        const stillActive: Conversation[] = [];\n        const movedToPast: Conversation[] = [];\n\n        prev.forEach(conv => {\n          const timeSinceLastMessage = now - conv.lastMessageTime.getTime();\n          if (timeSinceLastMessage > THIRTY_MINUTES) {\n            movedToPast.push(conv);\n          } else {\n            stillActive.push(conv);\n          }\n        });\n\n        // Move expired conversations to past\n        if (movedToPast.length > 0) {\n          setPastConversations(oldPast => [...movedToPast, ...oldPast]);\n          if (import.meta.env.DEV) {\n            logger.debug(`ðŸ“¦ ${movedToPast.length} konuÅŸma geÃ§miÅŸe taÅŸÄ±ndÄ± (30 dakika inaktif)`);\n          }\n        }\n\n        return stillActive;\n      });\n    }, 60000); // Check every minute\n\n    return () => clearInterval(interval);\n  }, []);\n  \n  const loadMorePast = () => {\n    // TODO: Load more past conversations from backend API\n    // Example:\n    // const fetchMorePast = async () => {\n    //   const nextPage = pastPage + 1;\n    //   const pastData = await api.get('/conversations/past', { params: { page: nextPage, limit: PAST_PAGE_SIZE } });\n    //   setPastConversations(prev => [...prev, ...pastData.conversations]);\n    //   setPastPage(nextPage);\n    //   setHasMorePast(pastData.hasMore);\n    // };\n    // fetchMorePast();\n  };\n  \n  const getFilteredConversations = () => {\n    let conversations: Conversation[] = [];\n    \n    // Helper: KonuÅŸmada gerÃ§ek insan (agent) mÃ¼dahalesi var mÄ± kontrol et (Asistan AI'dÄ±r, insan sayÄ±lmaz)\n    const hasHumanIntervention = (conv: Conversation) => {\n      // TODO: Update when backend provides agent type info\n      return conv.messages.some(msg => msg.sender === 'agent' && msg.agentName && msg.agentName !== 'AI Assistant');\n    };\n    \n    if (activeTab === 'phone') {\n      // Telefon konuÅŸmalarÄ± - tÃ¼m telefonlarÄ± gÃ¶ster (aktif + geÃ§miÅŸ)\n      conversations = [...activeConversations, ...pastConversations].filter(c => c.channel === 'phone');\n    } else if (activeTab === 'assistant') {\n      // Asistan tab - Sadece AI tarafÄ±ndan yÃ¶netilen, insan mÃ¼dahalesi OLMAYAN aktif konuÅŸmalar (telefon hariÃ§)\n      conversations = activeConversations\n        .filter(c => c.channel !== 'phone' && !hasHumanIntervention(c));\n    } else if (activeTab === 'employee') {\n      // Ã‡alÄ±ÅŸan tab - Herhangi bir insan mÃ¼dahalesi olan veya yardÄ±m bekleyen aktif konuÅŸmalar (telefon hariÃ§)\n      conversations = activeConversations\n        .filter(c => c.channel !== 'phone' && (hasHumanIntervention(c) || c.needsHelp || c.assignedTo === 'human'));\n    } else if (activeTab === 'past') {\n      // Past tab - telefon konuÅŸmalarÄ±nÄ± hariÃ§ tut Ã§Ã¼nkÃ¼ onlarÄ±n kendi tab'i var\n      conversations = pastConversations\n        .filter(c => c.channel !== 'phone');\n    }\n    \n    return conversations.filter(conv => {\n      const matchesSearch = conv.customerName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                          conv.lastMessage.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesChannel = selectedChannel === 'all' || conv.channel === selectedChannel;\n      const matchesNeedsHelp = !filterNeedsHelp || conv.needsHelp;\n      \n      // Telefon tab'Ä±ndayken kanal filtresini atlÄ±yoruz\n      if (activeTab === 'phone') {\n        return matchesSearch && matchesNeedsHelp;\n      }\n      \n      // DiÄŸer tab'larda kanal filtresi uygula\n      return matchesSearch && matchesChannel && matchesNeedsHelp;\n    });\n  };\n  \n  const formatTime = (date: Date) => {\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n    \n    if (diffMins < 1) return t('conversations.time.now');\n    if (diffMins < 60) return t('conversations.time.minutesAgo', { count: diffMins });\n    if (diffHours < 24) return t('conversations.time.hoursAgo', { count: diffHours });\n    if (diffDays < 7) return t('conversations.time.daysAgo', { count: diffDays });\n    \n    return date.toLocaleDateString(i18n.language === 'tr' ? 'tr-TR' : 'en-US', { day: '2-digit', month: 'short' });\n  };\n  \n  const handleFileSelect = (type: 'image' | 'video' | 'file') => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    \n    if (type === 'image') {\n      input.accept = 'image/*';\n    } else if (type === 'video') {\n      input.accept = 'video/*';\n    } else {\n      input.accept = '*/*';\n    }\n    \n    input.multiple = true;\n    input.onchange = (e) => {\n      const files = Array.from((e.target as HTMLInputElement).files || []);\n      setAttachments(prev => [...prev, ...files]);\n      setShowAttachmentMenu(false);\n    };\n    \n    input.click();\n  };\n  \n  const removeAttachment = (index: number) => {\n    setAttachments(prev => prev.filter((_, i) => i !== index));\n  };\n  \n  const handleSendMessage = () => {\n    if (!messageInput.trim() && attachments.length === 0) return;\n    \n    // TODO: API call to send message\n    logger.debug('Sending message:', { text: messageInput, attachments });\n    \n    setMessageInput('');\n    setAttachments([]);\n  };\n  \n  const filteredConversations = getFilteredConversations();\n  const needsHelpCount = (activeTab === 'past' ? pastConversations : activeConversations).filter(c => c.needsHelp).length;\n  const phoneCallsCount = [...activeConversations, ...pastConversations].filter(c => c.channel === 'phone').length;\n  const liveCallsCount = activeConversations.filter(c => c.isLiveCall).length;\n  const urgentCallsCount = activeConversations.filter(c => c.isUrgent).length;\n  \n  const formatCallDuration = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-slate-900\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700\">\n        <div className=\"px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 sm:mb-6\">\n            <div>\n              <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100\">{t('conversations.title')}</h1>\n              <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1\">{t('conversations.subtitle')}</p>\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              {/* Acil Aramalar Alert */}\n              {urgentCallsCount > 0 && (\n                <div className=\"flex items-center gap-2 px-4 py-2 bg-red-50 border-2 border-red-300 rounded-lg animate-pulse\">\n                  <PhoneCall className=\"w-4 h-4 text-red-600 animate-bounce\" />\n                  <span className=\"text-sm font-bold text-red-900\">\n                    {urgentCallsCount} {t('conversations.filters.urgentCall')}\n                  </span>\n                </div>\n              )}\n              \n              {/* CanlÄ± Aramalar */}\n              {liveCallsCount > 0 && (\n                <div className=\"flex items-center gap-2 px-4 py-2 bg-purple-50 border border-purple-200 rounded-lg\">\n                  <PhoneIncoming className=\"w-4 h-4 text-purple-600\" />\n                  <span className=\"text-sm font-medium text-purple-900\">\n                    {liveCallsCount} {t('conversations.filters.liveCalls', { count: liveCallsCount })}\n                  </span>\n                </div>\n              )}\n              \n              {/* YardÄ±m Bekleyenler */}\n              {needsHelpCount > 0 && !urgentCallsCount && (\n                <div className=\"flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg\">\n                  <AlertCircle className=\"w-4 h-4 text-amber-600\" />\n                  <span className=\"text-sm font-medium text-amber-900\">\n                    {needsHelpCount} {t('conversations.filters.needsHelpWaiting', { count: needsHelpCount })}\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* Search and Channel Filter */}\n          <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder={t('conversations.searchPlaceholder')}\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-2.5 text-sm bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500\"\n              />\n            </div>\n            \n            {/* Channel Filter */}\n            <div className=\"flex items-center gap-1 sm:gap-2 bg-gray-50 dark:bg-slate-900 p-1 rounded-lg border border-gray-200 dark:border-slate-700 overflow-x-auto\">\n              <button\n                onClick={() => setSelectedChannel('all')}\n                className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                  selectedChannel === 'all'\n                    ? 'bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm'\n                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n                }`}\n              >\n                {t('conversations.filters.all')}\n              </button>\n              {(Object.keys(channelIcons) as Channel[]).map((channel) => (\n                <button\n                  key={channel}\n                  onClick={() => setSelectedChannel(channel)}\n                  className={`p-2 rounded-md transition-colors ${\n                    selectedChannel === channel\n                      ? `${channelIcons[channel].color} bg-white dark:bg-slate-800 shadow-sm`\n                      : 'text-gray-400 hover:text-gray-600 dark:text-gray-400'\n                  }`}\n                  title={channel}\n                >\n                  {channelIcons[channel].icon}\n                </button>\n              ))}\n            </div>\n          </div>\n          \n          {/* Tabs */}\n          <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mt-4 sm:mt-6\">\n            <div className=\"flex items-center gap-1 bg-gray-100 dark:bg-slate-700 p-1 rounded-lg overflow-x-auto\">\n              <button\n                onClick={() => setActiveTab('assistant')}\n                className={`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex items-center gap-1.5 ${\n                  activeTab === 'assistant'\n                    ? 'bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm'\n                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n                }`}\n              >\n                <BotIcon className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n                <span className=\"hidden sm:inline\">{t('conversations.tabs.assistant')}</span>\n                <span className=\"sm:hidden\">{t('conversations.tabs.assistantShort')}</span>\n                <span className=\"ml-1 px-1.5 sm:px-2 py-0.5 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 text-xs font-semibold rounded-full\">\n                  {activeConversations.filter(c => c.channel !== 'phone' && !c.messages.some(msg => msg.sender === 'agent' && msg.agentName && msg.agentName !== 'AI Assistant')).length}\n                </span>\n              </button>\n              <button\n                onClick={() => setActiveTab('employee')}\n                className={`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex items-center gap-1.5 ${\n                  activeTab === 'employee'\n                    ? 'bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm'\n                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n                }`}\n              >\n                <UserCheck className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n                <span className=\"hidden sm:inline\">{t('conversations.tabs.employee')}</span>\n                <span className=\"sm:hidden\">{t('conversations.tabs.employeeShort')}</span>\n                <span className=\"ml-1 px-1.5 sm:px-2 py-0.5 bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 text-xs font-semibold rounded-full\">\n                  {activeConversations.filter(c => c.channel !== 'phone' && (c.messages.some(msg => msg.sender === 'agent' && msg.agentName && msg.agentName !== 'AI Assistant') || c.needsHelp || c.assignedTo === 'human')).length}\n                </span>\n              </button>\n              <button\n                onClick={() => setActiveTab('past')}\n                className={`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${\n                  activeTab === 'past'\n                    ? 'bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm'\n                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n                }`}\n                title={t('conversations.autoArchiveInfo')}\n              >\n                <span className=\"hidden sm:inline\">{t('conversations.tabs.past')}</span>\n                <span className=\"sm:hidden\">{t('conversations.tabs.pastShort')}</span>\n                <span className=\"ml-1 sm:ml-2 px-1.5 sm:px-2 py-0.5 bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300 text-xs font-semibold rounded-full\">\n                  {pastConversations.length}+\n                </span>\n              </button>\n              <button\n                onClick={() => setActiveTab('phone')}\n                className={`px-3 sm:px-6 py-2 rounded-md text-xs sm:text-sm font-medium transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap ${\n                  activeTab === 'phone'\n                    ? 'bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 shadow-sm'\n                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n                }`}\n              >\n                <PhoneCall className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n                <span className=\"hidden sm:inline\">{t('conversations.tabs.phone')}</span>\n                <span className=\"sm:hidden\">{t('conversations.tabs.phoneShort')}</span>\n                <span className={`px-1.5 sm:px-2 py-0.5 text-xs font-semibold rounded-full ${\n                  activeTab === 'phone'\n                    ? 'bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300'\n                    : 'bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-300'\n                }`}>\n                  {phoneCallsCount}\n                </span>\n              </button>\n            </div>\n            \n            {/* YardÄ±m Gerekli Tab */}\n            <button \n              onClick={() => setFilterNeedsHelp(!filterNeedsHelp)}\n              className={`px-3 sm:px-6 py-2 text-xs sm:text-sm font-medium border rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap ${\n                filterNeedsHelp \n                  ? 'bg-amber-500 text-white border-amber-600 hover:bg-amber-600 shadow-sm'\n                  : 'text-amber-700 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900/30'\n              }`}\n            >\n              <AlertCircle className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n              <span className=\"hidden sm:inline\">{t('conversations.tabs.needsHelp')}</span>\n              <span className=\"sm:hidden\">{t('conversations.tabs.needsHelpShort')}</span>\n              {needsHelpCount > 0 && (\n                <span className={`px-1.5 sm:px-2 py-0.5 text-xs font-semibold rounded-full ${\n                  filterNeedsHelp \n                    ? 'bg-amber-600 text-white'\n                    : 'bg-amber-200 dark:bg-amber-800 text-amber-900 dark:text-amber-100'\n                }`}>\n                  {needsHelpCount}\n                </span>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6\">\n          {/* Conversations List */}\n          <div className=\"lg:col-span-1 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden\">\n            <div className=\"divide-y divide-gray-100 dark:divide-slate-700 max-h-[400px] sm:max-h-[500px] lg:max-h-[calc(100vh-240px)] overflow-y-auto\">\n              {filteredConversations.length === 0 ? (\n                <div className=\"p-8 text-center\">\n                  <MessageCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n                  <p className=\"text-gray-500 dark:text-gray-400 text-sm\">{t('conversations.noConversationsFound')}</p>\n                </div>\n              ) : (\n                <>\n                  {filteredConversations.map((conversation) => (\n                    <button\n                      key={conversation.id}\n                      onClick={() => setSelectedConversation(conversation)}\n                      className={`w-full p-4 hover:bg-gray-50 dark:hover:bg-slate-700 dark:bg-slate-900 transition-colors text-left relative ${\n                        selectedConversation?.id === conversation.id ? 'bg-orange-50' : ''\n                      } ${conversation.isUrgent ? 'border-l-4 border-red-500 bg-red-50/30' : conversation.needsHelp ? 'border-l-4 border-amber-500' : ''}`}\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        {/* Channel Icon */}\n                        <div className=\"relative flex-shrink-0\">\n                          <div className={`w-12 h-12 ${channelIcons[conversation.channel].bg} rounded-full flex items-center justify-center text-white`}>\n                            {conversation.customerAvatar ? (\n                              <img src={conversation.customerAvatar} alt=\"\" className=\"w-full h-full rounded-full object-cover\" />\n                            ) : (\n                              <User className=\"w-6 h-6\" />\n                            )}\n                          </div>\n                          <div className={`absolute -bottom-1 -right-1 w-6 h-6 ${channelIcons[conversation.channel].bg} rounded-full flex items-center justify-center text-white border-2 border-white`}>\n                            {channelIcons[conversation.channel].icon}\n                          </div>\n                        </div>\n                        \n                        {/* Content */}\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-start justify-between mb-1\">\n                            <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                              <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 text-sm truncate\">\n                                {conversation.customerName}\n                              </h3>\n                              {conversation.needsHelp && (\n                                <AlertCircle className=\"w-4 h-4 text-amber-600 flex-shrink-0\" aria-label={t('conversations.needsHelp')} />\n                              )}\n                            </div>\n                            <span className=\"text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0\">\n                              {formatTime(conversation.lastMessageTime)}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 truncate\">\n                            {conversation.lastMessage}\n                          </p>\n                          \n                          <div className=\"flex items-center gap-2 mt-2 flex-wrap\">\n                            {/* ACÄ°L ARAMA - En yÃ¼ksek Ã¶ncelik */}\n                            {conversation.isUrgent && (\n                              <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full animate-pulse\">\n                                <PhoneCall className=\"w-3 h-3\" />\n                                {t('conversations.badges.urgent')}\n                              </span>\n                            )}\n                            \n                            {/* CanlÄ± Arama */}\n                            {conversation.isLiveCall && !conversation.isUrgent && (\n                              <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-800 text-xs font-semibold rounded-full\">\n                                <PhoneIncoming className=\"w-3 h-3 animate-pulse\" />\n                                {t('conversations.badges.liveCall')}: {formatCallDuration(conversation.callDuration || 0)}\n                              </span>\n                            )}\n                            \n                            {conversation.unreadCount > 0 && (\n                              <span className=\"inline-flex items-center justify-center px-2 py-0.5 bg-orange-500 text-white text-xs font-semibold rounded-full\">\n                                {conversation.unreadCount} {t('conversations.badges.newMessages', { count: conversation.unreadCount })}\n                              </span>\n                            )}\n                            {conversation.needsHelp && !conversation.isLiveCall && (\n                              <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-800 text-xs font-semibold rounded-full\">\n                                <UserCheck className=\"w-3 h-3\" />\n                                {conversation.assignedAgent || t('conversations.badges.humanAssistance')}\n                              </span>\n                            )}\n                            {conversation.assignedTo === 'ai' && !conversation.needsHelp && !conversation.isLiveCall && (\n                              <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full\">\n                                <BotIcon className=\"w-3 h-3\" />\n                                {t('conversations.badges.ai')}\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                  \n                  {/* Load More Button for Past Conversations */}\n                  {activeTab === 'past' && hasMorePast && (\n                    <button\n                      onClick={loadMorePast}\n                      className=\"w-full p-4 text-center text-sm font-medium text-orange-600 hover:bg-orange-50 transition-colors\"\n                    >\n                      {t('conversations.loadMore')}\n                    </button>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n          \n          {/* Conversation Detail */}\n          <div className={`lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden ${\n            isFullscreen ? 'fixed inset-0 z-50 rounded-none' : ''\n          }`}>\n            {selectedConversation ? (\n              <div className={`flex flex-col ${\n                isFullscreen ? 'h-screen' : 'h-[500px] sm:h-[600px] lg:h-[calc(100vh-240px)]'\n              }`}>\n                {/* Conversation Header */}\n                <div className=\"px-6 py-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"relative\">\n                        <div className={`w-10 h-10 ${channelIcons[selectedConversation.channel].bg} rounded-full flex items-center justify-center text-white`}>\n                          <User className=\"w-5 h-5\" />\n                        </div>\n                        <div className={`absolute -bottom-0.5 -right-0.5 w-5 h-5 ${channelIcons[selectedConversation.channel].bg} rounded-full flex items-center justify-center text-white border-2 border-white`}>\n                          <div className=\"scale-75\">\n                            {channelIcons[selectedConversation.channel].icon}\n                          </div>\n                        </div>\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-gray-900 dark:text-gray-100\">{selectedConversation.customerName}</h3>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1\">\n                          <Clock className=\"w-3 h-3\" />\n                          {t('conversations.conversation.lastMessage')} {formatTime(selectedConversation.lastMessageTime)}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      {/* CanlÄ± Arama iÃ§in KatÄ±l Butonu */}\n                      {selectedConversation.isLiveCall && (\n                        <button \n                          className={`px-4 py-2 text-sm font-bold rounded-lg transition-all flex items-center gap-2 ${\n                            selectedConversation.isUrgent \n                              ? 'bg-red-500 text-white hover:bg-red-600 animate-pulse'\n                              : 'bg-purple-500 text-white hover:bg-purple-600'\n                          }`}\n                        >\n                          <PhoneCall className=\"w-4 h-4\" />\n                          {selectedConversation.isUrgent ? t('conversations.actions.urgentJoinCall') : t('conversations.actions.joinCall')}\n                        </button>\n                      )}\n                      \n                      {/* Ata Butonu */}\n                      <button \n                        onClick={() => setShowAssignModal(true)}\n                        className=\"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors flex items-center gap-2\"\n                      >\n                        <Users className=\"w-4 h-4\" />\n                        {t('conversations.actions.assign')}\n                      </button>\n                      \n                      <button \n                        onClick={() => setShowProfileModal(true)}\n                        className=\"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors\"\n                      >\n                        {t('conversations.actions.viewProfile')}\n                      </button>\n                      \n                      {/* Fullscreen Toggle */}\n                      <button\n                        onClick={() => setIsFullscreen(!isFullscreen)}\n                        className=\"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\"\n                        title={isFullscreen ? t('conversations.fullscreen.exit') : t('conversations.fullscreen.enter')}\n                      >\n                        {isFullscreen ? <Minimize2 className=\"w-5 h-5\" /> : <Maximize2 className=\"w-5 h-5\" />}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Acil Arama Alert */}\n                {selectedConversation.isUrgent && (\n                  <div className=\"mx-6 mt-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg animate-pulse\">\n                    <div className=\"flex items-start gap-3\">\n                      <PhoneCall className=\"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0 animate-bounce\" />\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-sm font-bold text-red-900 mb-1\">{t('conversations.alerts.urgentTitle')}</h4>\n                        <p className=\"text-sm text-red-800\">\n                          {t('conversations.alerts.urgentMessage')}\n                        </p>\n                        <p className=\"text-xs text-red-700 mt-2 flex items-center gap-2\">\n                          <Clock className=\"w-3 h-3\" />\n                          {t('conversations.conversation.callDuration')} <strong>{formatCallDuration(selectedConversation.callDuration || 0)}</strong>\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {/* CanlÄ± Arama Durumu */}\n                {selectedConversation.isLiveCall && !selectedConversation.isUrgent && (\n                  <div className=\"mx-6 mt-6 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-r-lg\">\n                    <div className=\"flex items-start gap-3\">\n                      <PhoneIncoming className=\"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0\" />\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-sm font-bold text-purple-900 mb-1\">{t('conversations.alerts.liveCallTitle')}</h4>\n                        <p className=\"text-sm text-purple-800\">\n                          {selectedConversation.assignedTo === 'ai' \n                            ? t('conversations.alerts.liveCallAiMessage')\n                            : t('conversations.alerts.liveCallAgentMessage', { agentName: selectedConversation.assignedAgent })}\n                        </p>\n                        <p className=\"text-xs text-purple-700 mt-2 flex items-center gap-2\">\n                          <Clock className=\"w-3 h-3\" />\n                          {t('conversations.conversation.callDuration')} <strong>{formatCallDuration(selectedConversation.callDuration || 0)}</strong>\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {/* AI Stuck Warning */}\n                {selectedConversation.needsHelp && selectedConversation.aiStuckReason && !selectedConversation.isLiveCall && (\n                  <div className=\"mx-6 mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 dark:border-amber-600 rounded-r-lg\">\n                    <div className=\"flex items-start gap-3\">\n                      <AlertCircle className=\"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0\" />\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-sm font-bold text-amber-900 dark:text-amber-200 mb-1\">{t('conversations.alerts.aiStuckTitle')}</h4>\n                        <p className=\"text-sm text-amber-800 dark:text-amber-300\">{selectedConversation.aiStuckReason}</p>\n                        {selectedConversation.assignedAgent && (\n                          <p className=\"text-xs text-amber-700 dark:text-amber-400 mt-2 flex items-center gap-1\">\n                            <UserCheck className=\"w-3 h-3\" />\n                            <strong>{selectedConversation.assignedAgent}</strong> {t('conversations.conversation.takingOver')}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {/* Messages */}\n                <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n                  {selectedConversation.messages.map((message, _idx) => (\n                    <div\n                      key={message.id}\n                      className={`flex ${message.sender === 'agent' ? 'justify-end' : 'justify-start'}`}\n                    >\n                      <div className={`max-w-[70%] ${message.sender === 'agent' ? 'order-2' : 'order-1'}`}>\n                        {/* Sesli konuÅŸma transkripti gÃ¶stergesi */}\n                        {message.isVoiceTranscript && (\n                          <div className={`flex items-center gap-2 mb-1 text-xs ${\n                            message.sender === 'agent' ? 'justify-end' : 'justify-start'\n                          }`}>\n                            <Mic className=\"w-3 h-3 text-purple-500\" />\n                            <span className=\"text-purple-600 font-medium\">{t('conversations.alerts.voiceTranscript')}</span>\n                            {message.voiceDuration && (\n                              <span className=\"text-gray-500 dark:text-gray-400\">({formatCallDuration(message.voiceDuration)})</span>\n                            )}\n                          </div>\n                        )}\n                        \n                        <div\n                          className={`rounded-2xl px-4 py-2.5 ${\n                            message.sender === 'agent'\n                              ? message.isVoiceTranscript \n                                ? 'bg-purple-500 text-white rounded-br-sm'\n                                : 'bg-orange-500 text-white rounded-br-sm'\n                              : message.isVoiceTranscript\n                                ? 'bg-purple-50 dark:bg-purple-900/30 text-gray-900 dark:text-gray-100 border border-purple-200 dark:border-purple-700 rounded-bl-sm'\n                                : 'bg-gray-100 dark:bg-slate-700 text-gray-900 dark:text-gray-100 rounded-bl-sm'\n                          }`}\n                        >\n                          <p className=\"text-sm\">{message.text}</p>\n                        </div>\n                        <div className={`flex items-center gap-2 mt-1 px-1 ${message.sender === 'agent' ? 'justify-end' : 'justify-start'}`}>\n                          <p className=\"text-xs text-gray-400\">\n                            {message.timestamp.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })}\n                          </p>\n                          {message.sender === 'agent' && message.agentName && (\n                            <>\n                              <span className=\"text-xs text-gray-300\">â€¢</span>\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400 font-medium\">\n                                {message.agentName}\n                              </p>\n                            </>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                \n                {/* Message Input */}\n                <div className=\"p-3 sm:p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900\">\n                  {/* Attachments Preview */}\n                  {attachments.length > 0 && (\n                    <div className=\"mb-2 sm:mb-3 flex flex-wrap gap-1.5 sm:gap-2\">\n                      {attachments.map((file, index) => (\n                        <div\n                          key={index}\n                          className=\"relative group bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 flex items-center gap-1.5 sm:gap-2\"\n                        >\n                          {file.type.startsWith('image/') && <Image className=\"w-3 h-3 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0\" />}\n                          {file.type.startsWith('video/') && <Video className=\"w-3 h-3 sm:w-4 sm:h-4 text-purple-500 flex-shrink-0\" />}\n                          {!file.type.startsWith('image/') && !file.type.startsWith('video/') && (\n                            <FileText className=\"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 dark:text-gray-400 flex-shrink-0\" />\n                          )}\n                          <span className=\"text-xs text-gray-700 dark:text-gray-300 max-w-[100px] sm:max-w-[150px] truncate\">\n                            {file.name}\n                          </span>\n                          <button\n                            onClick={() => removeAttachment(index)}\n                            className=\"ml-1 text-gray-400 hover:text-red-500 transition-colors flex-shrink-0\"\n                            aria-label={`${file.name} dosyasÄ±nÄ± kaldÄ±r`}\n                          >\n                            <X className=\"w-3 h-3\" />\n                          </button>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  \n                  <div className=\"flex items-end gap-1 sm:gap-2\">\n                    {/* Attachment Menu */}\n                    <div className=\"relative flex-shrink-0\">\n                      <button\n                        onClick={() => setShowAttachmentMenu(!showAttachmentMenu)}\n                        className=\"p-2 sm:p-2.5 text-gray-600 dark:text-gray-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors\"\n                        title={t('conversations.addFile')}\n                        aria-label={t('conversations.addFile')}\n                      >\n                        <Paperclip className=\"w-4 h-4 sm:w-5 sm:h-5\" />\n                      </button>\n                      \n                      {showAttachmentMenu && (\n                        <div className=\"absolute bottom-full left-0 mb-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg overflow-hidden z-10 min-w-[160px]\">\n                          <button\n                            onClick={() => handleFileSelect('image')}\n                            className=\"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors\"\n                          >\n                            <Image className=\"w-3 h-3 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0\" />\n                            <span className=\"text-gray-700 dark:text-gray-300\">{t('conversations.attachments.photo')}</span>\n                          </button>\n                          <button\n                            onClick={() => handleFileSelect('video')}\n                            className=\"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors\"\n                          >\n                            <Video className=\"w-3 h-3 sm:w-4 sm:h-4 text-purple-500 flex-shrink-0\" />\n                            <span className=\"text-gray-700 dark:text-gray-300\">{t('conversations.attachments.video')}</span>\n                          </button>\n                          <button\n                            onClick={() => handleFileSelect('file')}\n                            className=\"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-xs sm:text-sm hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 sm:gap-3 transition-colors\"\n                          >\n                            <FileText className=\"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 dark:text-gray-400 flex-shrink-0\" />\n                            <span className=\"text-gray-700 dark:text-gray-300\">{t('conversations.attachments.file')}</span>\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {/* Message Input */}\n                    <input\n                      type=\"text\"\n                      value={messageInput}\n                      onChange={(e) => setMessageInput(e.target.value)}\n                      onKeyPress={(e) => {\n                        if (e.key === 'Enter' && !e.shiftKey) {\n                          e.preventDefault();\n                          handleSendMessage();\n                        }\n                      }}\n                      placeholder={t('conversations.messagePlaceholder')}\n                      className=\"flex-1 min-w-0 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500\"\n                    />\n                    \n                    {/* Send Button */}\n                    <button\n                      onClick={handleSendMessage}\n                      disabled={!messageInput.trim() && attachments.length === 0}\n                      className=\"px-3 sm:px-6 py-2 sm:py-2.5 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 sm:gap-2 flex-shrink-0\"\n                      aria-label={t('conversations.sendMessage')}\n                    >\n                      <Send className=\"w-4 h-4\" />\n                      <span className=\"hidden sm:inline\">{t('conversations.actions.send')}</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"h-[calc(100vh-240px)] flex items-center justify-center\">\n                <div className=\"text-center\">\n                  <MessageCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2\">{t('conversations.conversation.selectConversation')}</h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">{t('conversations.conversation.selectToStart')}</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {/* Profile Modal */}\n      {showProfileModal && selectedConversation && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-slate-700\">\n              <div className=\"flex items-center gap-3\">\n                <div className={`w-12 h-12 ${channelIcons[selectedConversation.channel].bg} rounded-full flex items-center justify-center text-white`}>\n                  <User className=\"w-6 h-6\" />\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-gray-900 dark:text-gray-100\">{selectedConversation.customerName}</h3>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1\">\n                    {channelIcons[selectedConversation.channel].icon}\n                    <span className=\"ml-1\">{selectedConversation.channel === 'web' ? 'Web Widget' : selectedConversation.channel.charAt(0).toUpperCase() + selectedConversation.channel.slice(1)}</span>\n                  </p>\n                </div>\n              </div>\n              <button\n                onClick={() => setShowProfileModal(false)}\n                className=\"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            \n            {/* Modal Content */}\n            <div className=\"p-6 space-y-4\">\n              {/* Instagram Profile */}\n              {selectedConversation.customerProfile.instagram && (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3 p-3 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-pink-100 dark:border-pink-800\">\n                    <Instagram className=\"w-5 h-5 text-pink-600 dark:text-pink-400 mt-0.5 flex-shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1\">{t('conversations.profile.instagram.username')}</p>\n                      <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">{selectedConversation.customerProfile.instagram.username}</p>\n                      <a\n                        href={selectedConversation.customerProfile.instagram.profileUrl}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-flex items-center gap-1 text-sm text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 font-medium\"\n                      >\n                        {t('conversations.profile.instagram.visitProfile')}\n                        <ExternalLink className=\"w-3 h-3\" />\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* Phone Profile */}\n              {selectedConversation.customerProfile.phone && (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800\">\n                    <PhoneCall className=\"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1\">{t('conversations.profile.phone.number')}</p>\n                      <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">{selectedConversation.customerProfile.phone.phoneNumber}</p>\n                      <div className=\"flex items-center gap-2\">\n                        <a\n                          href={`tel:${selectedConversation.customerProfile.phone.phoneNumber.replace(/\\s+/g, '')}`}\n                          className=\"inline-flex items-center gap-1 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium\"\n                        >\n                          {t('conversations.profile.phone.call')}\n                          <Phone className=\"w-3 h-3\" />\n                        </a>\n                        {selectedConversation.isLiveCall && (\n                          <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 text-xs font-semibold rounded-full\">\n                            <PhoneIncoming className=\"w-3 h-3 animate-pulse\" />\n                            {t('conversations.profile.phone.liveCall')}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* WhatsApp Profile */}\n              {selectedConversation.customerProfile.whatsapp && (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-800\">\n                    <Phone className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1\">{t('conversations.profile.whatsapp.number')}</p>\n                      <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">{selectedConversation.customerProfile.whatsapp.phoneNumber}</p>\n                      <a\n                        href={`tel:${selectedConversation.customerProfile.whatsapp.phoneNumber.replace(/\\s+/g, '')}`}\n                        className=\"inline-flex items-center gap-1 text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 font-medium\"\n                      >\n                        {t('conversations.profile.whatsapp.call')}\n                        <Phone className=\"w-3 h-3\" />\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* Facebook Profile */}\n              {selectedConversation.customerProfile.facebook && (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800\">\n                    <Facebook className=\"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1\">{t('conversations.profile.facebook.profile')}</p>\n                      <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">{selectedConversation.customerProfile.facebook.name}</p>\n                      <a\n                        href={selectedConversation.customerProfile.facebook.profileUrl}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium\"\n                      >\n                        {t('conversations.profile.facebook.visitProfile')}\n                        <ExternalLink className=\"w-3 h-3\" />\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* Web Widget Profile */}\n              {selectedConversation.customerProfile.web && (\n                <div className=\"space-y-3\">\n                  <div className=\"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-100 dark:border-orange-800 space-y-3\">\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <Globe className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\n                      <p className=\"text-sm font-bold text-gray-900 dark:text-gray-100\">{t('conversations.profile.web.title')}</p>\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1\">{t('conversations.profile.web.fullName')}</p>\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n                          {selectedConversation.customerProfile.web.firstName} {selectedConversation.customerProfile.web.lastName}\n                        </p>\n                      </div>\n                      \n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1 flex items-center gap-1\">\n                          <Mail className=\"w-3 h-3\" />\n                          {t('conversations.profile.web.email')}\n                        </p>\n                        <a\n                          href={`mailto:${selectedConversation.customerProfile.web.email}`}\n                          className=\"text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300\"\n                        >\n                          {selectedConversation.customerProfile.web.email}\n                        </a>\n                      </div>\n                      \n                      {selectedConversation.customerProfile.web.phoneNumber && (\n                        <div>\n                          <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1 flex items-center gap-1\">\n                            <Phone className=\"w-3 h-3\" />\n                            {t('conversations.profile.web.phoneOptional')}\n                          </p>\n                          <a\n                            href={`tel:${selectedConversation.customerProfile.web.phoneNumber.replace(/\\s+/g, '')}`}\n                            className=\"text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300\"\n                          >\n                            {selectedConversation.customerProfile.web.phoneNumber}\n                          </a>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            {/* Modal Footer */}\n            <div className=\"px-6 py-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900 rounded-b-2xl\">\n              <button\n                onClick={() => setShowProfileModal(false)}\n                className=\"w-full px-4 py-2.5 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 transition-colors\"\n              >\n                {t('conversations.actions.close')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Assign Modal */}\n      {showAssignModal && selectedConversation && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white dark:bg-slate-800 rounded-2xl max-w-md w-full shadow-xl\">\n            {/* Header */}\n            <div className=\"px-6 py-4 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between\">\n              <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n                {t('conversations.assignModal.title')}\n              </h3>\n              <button\n                onClick={() => setShowAssignModal(false)}\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6 space-y-4\">\n              <div>\n                <div className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n                  {t('conversations.assignModal.selectAgent')}\n                </div>\n                <div className=\"space-y-2\">\n                  {[\n                    { id: '1', name: 'AyÅŸe YÄ±lmaz', avatar: 'ðŸ‘©', status: 'online', conversations: 3 },\n                    { id: '2', name: 'Mehmet Kaya', avatar: 'ðŸ‘¨', status: 'online', conversations: 5 },\n                    { id: '3', name: 'Zeynep Demir', avatar: 'ðŸ‘©', status: 'busy', conversations: 8 },\n                    { id: '4', name: 'Ali YÄ±ldÄ±z', avatar: 'ðŸ‘¨', status: 'offline', conversations: 0 },\n                  ].map((agent) => (\n                    <button\n                      key={agent.id}\n                      onClick={() => {\n                        alert(t('conversations.assignedTo', { name: agent.name }));\n                        setShowAssignModal(false);\n                      }}\n                      className=\"w-full p-3 border border-gray-200 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-between\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"text-2xl\">{agent.avatar}</div>\n                        <div className=\"text-left\">\n                          <div className=\"font-medium text-gray-900 dark:text-white\">{agent.name}</div>\n                          <div className=\"text-xs text-gray-600 dark:text-gray-400\">\n                            {agent.conversations} {t('conversations.assignModal.activeConversations', { count: agent.conversations })}\n                          </div>\n                        </div>\n                      </div>\n                      <div className={`w-2 h-2 rounded-full ${\n                        agent.status === 'online' ? 'bg-green-500' :\n                        agent.status === 'busy' ? 'bg-yellow-500' :\n                        'bg-gray-400'\n                      }`} />\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Footer */}\n            <div className=\"px-6 py-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900 rounded-b-2xl\">\n              <button\n                onClick={() => setShowAssignModal(false)}\n                className=\"w-full px-4 py-2.5 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors\"\n              >\n                {t('conversations.actions.cancel')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ConversationsPage;\n\n"],"names":["__iconNode","PhoneCall","createLucideIcon","PhoneIncoming","WhatsAppIcon","jsx","channelIcons","Instagram","Facebook","Globe","ConversationsPage","i18n","useTranslation","activeTab","setActiveTab","useState","searchQuery","setSearchQuery","selectedChannel","setSelectedChannel","filterNeedsHelp","setFilterNeedsHelp","selectedConversation","setSelectedConversation","messageInput","setMessageInput","attachments","setAttachments","showAttachmentMenu","setShowAttachmentMenu","showProfileModal","setShowProfileModal","showAssignModal","setShowAssignModal","isFullscreen","setIsFullscreen","activeConversations","setActiveConversations","pastConversations","setPastConversations","pastPage","setPastPage","hasMorePast","setHasMorePast","searchParams","setSearchParams","useSearchParams","useEffect","handleKeyDown","e","conversationIdFromUrl","conversation","c","interval","now","THIRTY_MINUTES","prev","stillActive","movedToPast","conv","oldPast","loadMorePast","getFilteredConversations","conversations","hasHumanIntervention","msg","matchesSearch","matchesChannel","matchesNeedsHelp","formatTime","date","diffMs","diffMins","diffHours","diffDays","handleFileSelect","type","input","files","removeAttachment","index","_","handleSendMessage","logger","filteredConversations","needsHelpCount","phoneCallsCount","liveCallsCount","urgentCallsCount","formatCallDuration","seconds","mins","secs","jsxs","AlertCircle","Search","channel","BotIcon","UserCheck","MessageCircle","Fragment","User","Clock","Users","Minimize2","Maximize2","message","_idx","Mic","file","Image","Video","FileText","X","Paperclip","Send","ExternalLink","Phone","Mail","agent"],"mappings":"6rBAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CACjB,CAAC,OAAQ,CAAE,EAAG,sBAAuB,IAAK,QAAQ,CAAE,EACpD,CAAC,OAAQ,CAAE,EAAG,sBAAuB,IAAK,QAAQ,CAAE,EACpD,CACE,OACA,CACE,EAAG,wNACH,IAAK,QACX,CACA,CACA,EACMC,EAAYC,GAAiB,aAAcF,EAAU,ECpB3D;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CACjB,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,EAC1C,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,EAC1C,CACE,OACA,CACE,EAAG,wNACH,IAAK,QACX,CACA,CACA,EACMG,EAAgBD,GAAiB,iBAAkBF,EAAU,ECkB7DI,GAAe,IACnBC,EAAAA,IAAC,MAAA,CAAI,QAAQ,YAAY,KAAK,eAAe,UAAU,UACrD,eAAC,OAAA,CAAK,EAAE,klCAAA,CAAklC,EAC5lC,EAiEIC,EAAsF,CAC1F,UAAW,CACT,KAAMD,EAAAA,IAACE,GAAA,CAAU,UAAU,UAAU,EACrC,MAAO,gBACP,GAAI,8DAAA,EAEN,SAAU,CACR,WAAOH,GAAA,EAAa,EACpB,MAAO,iBACP,GAAI,cAAA,EAEN,SAAU,CACR,KAAMC,EAAAA,IAACG,GAAA,CAAS,UAAU,UAAU,EACpC,MAAO,gBACP,GAAI,aAAA,EAEN,IAAK,CACH,KAAMH,EAAAA,IAACI,GAAA,CAAM,UAAU,UAAU,EACjC,MAAO,kBACP,GAAI,eAAA,EAEN,MAAO,CACL,KAAMJ,EAAAA,IAACJ,EAAA,CAAU,UAAU,UAAU,EACrC,MAAO,kBACP,GAAI,iDAAA,CAER,EAKMS,GAA8B,IAAM,CACxC,KAAM,CAAE,EAAG,KAAAC,IAASC,GAAe,OAAO,EACpC,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAsD,WAAW,EAC7F,CAACC,EAAaC,EAAc,EAAIF,EAAAA,SAAS,EAAE,EAC3C,CAACG,EAAiBC,CAAkB,EAAIJ,EAAAA,SAA0B,KAAK,EACvE,CAACK,EAAiBC,EAAkB,EAAIN,EAAAA,SAAS,EAAK,EACtD,CAACO,EAAsBC,CAAuB,EAAIR,EAAAA,SAA8B,IAAI,EACpF,CAACS,EAAcC,CAAe,EAAIV,EAAAA,SAAS,EAAE,EAC7C,CAACW,EAAaC,CAAc,EAAIZ,EAAAA,SAAiB,CAAA,CAAE,EACnD,CAACa,EAAoBC,CAAqB,EAAId,EAAAA,SAAS,EAAK,EAC5D,CAACe,GAAkBC,CAAmB,EAAIhB,EAAAA,SAAS,EAAK,EACxD,CAACiB,GAAiBC,CAAkB,EAAIlB,EAAAA,SAAS,EAAK,EACtD,CAACmB,EAAcC,CAAe,EAAIpB,EAAAA,SAAS,EAAK,EAGhD,CAACqB,EAAqBC,EAAsB,EAAItB,EAAAA,SAAyB,CAAA,CAAE,EAG3E,CAACuB,EAAmBC,EAAoB,EAAIxB,EAAAA,SAAyB,CAAA,CAAE,EACvE,CAACyB,GAAUC,EAAW,EAAI1B,EAAAA,SAAS,CAAC,EACpC,CAAC2B,GAAaC,EAAc,EAAI5B,EAAAA,SAAS,EAAI,EAI7C,CAAC6B,EAAcC,CAAe,EAAIC,GAAA,EAGxCC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAiBC,GAAqB,CAEtCA,EAAE,MAAQ,WACRf,EACFC,EAAgB,EAAK,EACZb,GACTC,EAAwB,IAAI,GAI5B0B,EAAE,MAAQ,OAAS3B,IACrB2B,EAAE,eAAA,EACFd,EAAgB,CAACD,CAAY,EAEjC,EAEA,cAAO,iBAAiB,UAAWc,CAAa,EACzC,IAAM,OAAO,oBAAoB,UAAWA,CAAa,CAClE,EAAG,CAACd,EAAcZ,CAAoB,CAAC,EAEvCyB,EAAAA,UAAU,IAAM,CAWhB,EAAG,CAAA,CAAE,EAGLA,EAAAA,UAAU,IAAM,CACd,MAAMG,EAAwBN,EAAa,IAAI,kBAAkB,EACjE,GAAIM,GAAyBd,EAAoB,OAAS,EAAG,CAE3D,MAAMe,EAAef,EAAoB,KAAKgB,GAAKA,EAAE,KAAOF,CAAqB,EAC7EC,IACF5B,EAAwB4B,CAAY,EAEpCN,EAAgB,CAAA,CAAE,EAEtB,CACF,EAAG,CAACD,EAAcR,EAAqBS,CAAe,CAAC,EAGvDE,EAAAA,UAAU,IAAM,CACd,MAAMM,EAAW,YAAY,IAAM,CACjC,MAAMC,EAAM,KAAK,IAAA,EACXC,EAAiB,GAAK,GAAK,IAEjClB,GAAuBmB,GAAQ,CAC7B,MAAMC,EAA8B,CAAA,EAC9BC,EAA8B,CAAA,EAEpC,OAAAF,EAAK,QAAQG,GAAQ,CACUL,EAAMK,EAAK,gBAAgB,QAAA,EAC7BJ,EACzBG,EAAY,KAAKC,CAAI,EAErBF,EAAY,KAAKE,CAAI,CAEzB,CAAC,EAGGD,EAAY,OAAS,GACvBnB,MAAgC,CAAC,GAAGmB,EAAa,GAAGE,CAAO,CAAC,EAMvDH,CACT,CAAC,CACH,EAAG,GAAK,EAER,MAAO,IAAM,cAAcJ,CAAQ,CACrC,EAAG,CAAA,CAAE,EAEL,MAAMQ,GAAe,IAAM,CAW3B,EAEMC,GAA2B,IAAM,CACrC,IAAIC,EAAgC,CAAA,EAGpC,MAAMC,EAAwBL,GAErBA,EAAK,SAAS,KAAKM,GAAOA,EAAI,SAAW,SAAWA,EAAI,WAAaA,EAAI,YAAc,cAAc,EAG9G,OAAIpD,IAAc,QAEhBkD,EAAgB,CAAC,GAAG3B,EAAqB,GAAGE,CAAiB,EAAE,OAAOc,GAAKA,EAAE,UAAY,OAAO,EACvFvC,IAAc,YAEvBkD,EAAgB3B,EACb,OAAOgB,GAAKA,EAAE,UAAY,SAAW,CAACY,EAAqBZ,CAAC,CAAC,EACvDvC,IAAc,WAEvBkD,EAAgB3B,EACb,OAAOgB,GAAKA,EAAE,UAAY,UAAYY,EAAqBZ,CAAC,GAAKA,EAAE,WAAaA,EAAE,aAAe,QAAQ,EACnGvC,IAAc,SAEvBkD,EAAgBzB,EACb,OAAOc,GAAKA,EAAE,UAAY,OAAO,GAG/BW,EAAc,OAAOJ,GAAQ,CAClC,MAAMO,EAAgBP,EAAK,aAAa,YAAA,EAAc,SAAS3C,EAAY,YAAA,CAAa,GACpE2C,EAAK,YAAY,YAAA,EAAc,SAAS3C,EAAY,aAAa,EAC/EmD,EAAiBjD,IAAoB,OAASyC,EAAK,UAAYzC,EAC/DkD,EAAmB,CAAChD,GAAmBuC,EAAK,UAGlD,OAAI9C,IAAc,QACTqD,GAAiBE,EAInBF,GAAiBC,GAAkBC,CAC5C,CAAC,CACH,EAEMC,EAAcC,GAAe,CAEjC,MAAMC,MADU,KAAA,EACG,QAAA,EAAYD,EAAK,QAAA,EAC9BE,EAAW,KAAK,MAAMD,EAAS,GAAK,EACpCE,EAAY,KAAK,MAAMF,EAAS,IAAO,EACvCG,EAAW,KAAK,MAAMH,EAAS,KAAQ,EAE7C,OAAIC,EAAW,EAAU,EAAE,wBAAwB,EAC/CA,EAAW,GAAW,EAAE,gCAAiC,CAAE,MAAOA,EAAU,EAC5EC,EAAY,GAAW,EAAE,8BAA+B,CAAE,MAAOA,EAAW,EAC5EC,EAAW,EAAU,EAAE,6BAA8B,CAAE,MAAOA,EAAU,EAErEJ,EAAK,mBAAmB3D,GAAK,WAAa,KAAO,QAAU,QAAS,CAAE,IAAK,UAAW,MAAO,OAAA,CAAS,CAC/G,EAEMgE,EAAoBC,GAAqC,CAC7D,MAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,OAETD,IAAS,QACXC,EAAM,OAAS,UACND,IAAS,QAClBC,EAAM,OAAS,UAEfA,EAAM,OAAS,MAGjBA,EAAM,SAAW,GACjBA,EAAM,SAAY5B,GAAM,CACtB,MAAM6B,EAAQ,MAAM,KAAM7B,EAAE,OAA4B,OAAS,EAAE,EACnEtB,KAAuB,CAAC,GAAG6B,EAAM,GAAGsB,CAAK,CAAC,EAC1CjD,EAAsB,EAAK,CAC7B,EAEAgD,EAAM,MAAA,CACR,EAEME,GAAoBC,GAAkB,CAC1CrD,EAAe6B,GAAQA,EAAK,OAAO,CAACyB,EAAG,IAAM,IAAMD,CAAK,CAAC,CAC3D,EAEME,EAAoB,IAAM,CAC1B,CAAC1D,EAAa,KAAA,GAAUE,EAAY,SAAW,IAGnDyD,GAAO,MAAM,mBAAoB,CAAE,KAAM3D,EAAc,YAAAE,EAAa,EAEpED,EAAgB,EAAE,EAClBE,EAAe,CAAA,CAAE,EACnB,EAEMyD,EAAwBtB,GAAA,EACxBuB,GAAkBxE,IAAc,OAASyB,EAAoBF,GAAqB,OAAOgB,GAAKA,EAAE,SAAS,EAAE,OAC3GkC,GAAkB,CAAC,GAAGlD,EAAqB,GAAGE,CAAiB,EAAE,OAAOc,GAAKA,EAAE,UAAY,OAAO,EAAE,OACpGmC,EAAiBnD,EAAoB,OAAOgB,GAAKA,EAAE,UAAU,EAAE,OAC/DoC,EAAmBpD,EAAoB,OAAOgB,GAAKA,EAAE,QAAQ,EAAE,OAE/DqC,EAAsBC,GAAoB,CAC9C,MAAMC,EAAO,KAAK,MAAMD,EAAU,EAAE,EAC9BE,EAAOF,EAAU,GACvB,MAAO,GAAGC,CAAI,IAAIC,EAAK,WAAW,SAAS,EAAG,GAAG,CAAC,EACpD,EAEA,OACEC,EAAAA,KAAC,MAAA,CAAI,UAAU,4CAEb,SAAA,CAAAxF,EAAAA,IAAC,OAAI,UAAU,4EACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAxF,MAAC,KAAA,CAAG,UAAU,iEAAkE,SAAA,EAAE,qBAAqB,EAAE,QACxG,IAAA,CAAE,UAAU,2DAA4D,SAAA,EAAE,wBAAwB,CAAA,CAAE,CAAA,EACvG,EAEAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEZ,SAAA,CAAAL,EAAmB,GAClBK,OAAC,MAAA,CAAI,UAAU,+FACb,SAAA,CAAAxF,EAAAA,IAACJ,EAAA,CAAU,UAAU,sCAAsC,EAC3D4F,EAAAA,KAAC,OAAA,CAAK,UAAU,iCACb,SAAA,CAAAL,EAAiB,IAAE,EAAE,kCAAkC,CAAA,EAC1D,CAAA,EACF,EAIDD,EAAiB,GAChBM,OAAC,MAAA,CAAI,UAAU,qFACb,SAAA,CAAAxF,EAAAA,IAACF,EAAA,CAAc,UAAU,0BAA0B,EACnD0F,EAAAA,KAAC,OAAA,CAAK,UAAU,sCACb,SAAA,CAAAN,EAAe,IAAE,EAAE,kCAAmC,CAAE,MAAOA,EAAgB,CAAA,EAClF,CAAA,EACF,EAIDF,EAAiB,GAAK,CAACG,UACrB,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAnF,EAAAA,IAACyF,EAAA,CAAY,UAAU,yBAAyB,EAChDD,EAAAA,KAAC,OAAA,CAAK,UAAU,qCACb,SAAA,CAAAR,EAAe,IAAE,EAAE,yCAA0C,CAAE,MAAOA,EAAgB,CAAA,EACzF,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,EAGAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,yEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAxF,EAAAA,IAAC0F,GAAA,CAAO,UAAU,+EAA+E,EACjG1F,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAa,EAAE,iCAAiC,EAChD,MAAOW,EACP,SAAWiC,GAAMhC,GAAegC,EAAE,OAAO,KAAK,EAC9C,UAAU,wNAAA,CAAA,CACZ,EACF,EAGA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,4IACb,SAAA,CAAAxF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMc,EAAmB,KAAK,EACvC,UAAW,8DACTD,IAAoB,MAChB,wEACA,+EACN,GAEC,WAAE,2BAA2B,CAAA,CAAA,EAE9B,OAAO,KAAKZ,CAAY,EAAgB,IAAK0F,GAC7C3F,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMc,EAAmB6E,CAAO,EACzC,UAAW,oCACT9E,IAAoB8E,EAChB,GAAG1F,EAAa0F,CAAO,EAAE,KAAK,wCAC9B,sDACN,GACA,MAAOA,EAEN,SAAA1F,EAAa0F,CAAO,EAAE,IAAA,EATlBA,CAAA,CAWR,CAAA,EACH,CAAA,EACF,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM/E,EAAa,WAAW,EACvC,UAAW,0HACTD,IAAc,YACV,wEACA,+EACN,GAEA,SAAA,CAAAR,EAAAA,IAAC4F,EAAA,CAAQ,UAAU,4BAA4B,QAC9C,OAAA,CAAK,UAAU,mBAAoB,SAAA,EAAE,8BAA8B,EAAE,QACrE,OAAA,CAAK,UAAU,YAAa,SAAA,EAAE,mCAAmC,EAAE,EACpE5F,EAAAA,IAAC,OAAA,CAAK,UAAU,yIACb,SAAA+B,EAAoB,OAAOgB,GAAKA,EAAE,UAAY,SAAW,CAACA,EAAE,SAAS,KAAKa,GAAOA,EAAI,SAAW,SAAWA,EAAI,WAAaA,EAAI,YAAc,cAAc,CAAC,EAAE,OAClK,CAAA,CAAA,CAAA,EAEF4B,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM/E,EAAa,UAAU,EACtC,UAAW,0HACTD,IAAc,WACV,wEACA,+EACN,GAEA,SAAA,CAAAR,EAAAA,IAAC6F,EAAA,CAAU,UAAU,4BAA4B,QAChD,OAAA,CAAK,UAAU,mBAAoB,SAAA,EAAE,6BAA6B,EAAE,QACpE,OAAA,CAAK,UAAU,YAAa,SAAA,EAAE,kCAAkC,EAAE,EACnE7F,EAAAA,IAAC,OAAA,CAAK,UAAU,yIACb,SAAA+B,EAAoB,OAAOgB,GAAKA,EAAE,UAAY,UAAYA,EAAE,SAAS,KAAKa,GAAOA,EAAI,SAAW,SAAWA,EAAI,WAAaA,EAAI,YAAc,cAAc,GAAKb,EAAE,WAAaA,EAAE,aAAe,QAAQ,EAAE,OAC9M,CAAA,CAAA,CAAA,EAEFyC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM/E,EAAa,MAAM,EAClC,UAAW,gGACTD,IAAc,OACV,wEACA,+EACN,GACA,MAAO,EAAE,+BAA+B,EAExC,SAAA,CAAAR,MAAC,OAAA,CAAK,UAAU,mBAAoB,SAAA,EAAE,yBAAyB,EAAE,QAChE,OAAA,CAAK,UAAU,YAAa,SAAA,EAAE,8BAA8B,EAAE,EAC/DwF,EAAAA,KAAC,OAAA,CAAK,UAAU,uIACb,SAAA,CAAAvD,EAAkB,OAAO,GAAA,EAC5B,CAAA,CAAA,CAAA,EAEFuD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM/E,EAAa,OAAO,EACnC,UAAW,iIACTD,IAAc,QACV,wEACA,+EACN,GAEA,SAAA,CAAAR,EAAAA,IAACJ,EAAA,CAAU,UAAU,wBAAwB,QAC5C,OAAA,CAAK,UAAU,mBAAoB,SAAA,EAAE,0BAA0B,EAAE,QACjE,OAAA,CAAK,UAAU,YAAa,SAAA,EAAE,+BAA+B,EAAE,EAChEI,EAAAA,IAAC,QAAK,UAAW,4DACfQ,IAAc,QACV,2EACA,gEACN,GACG,SAAAyE,EAAA,CACH,CAAA,CAAA,CAAA,CACF,EACF,EAGAO,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMxE,GAAmB,CAACD,CAAe,EAClD,UAAW,wIACTA,EACI,wEACA,0JACN,GAEA,SAAA,CAAAf,EAAAA,IAACyF,EAAA,CAAY,UAAU,wBAAwB,QAC9C,OAAA,CAAK,UAAU,mBAAoB,SAAA,EAAE,8BAA8B,EAAE,QACrE,OAAA,CAAK,UAAU,YAAa,SAAA,EAAE,mCAAmC,EAAE,EACnET,EAAiB,GAChBhF,EAAAA,IAAC,OAAA,CAAK,UAAW,4DACfe,EACI,0BACA,mEACN,GACG,SAAAiE,EACH,CAAA,CAAA,CAAA,CAEJ,EACF,CAAA,CAAA,CACF,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,2DACb,SAAAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,iDAEb,SAAA,CAAAxF,MAAC,MAAA,CAAI,UAAU,mHACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,6HACZ,SAAA+E,EAAsB,SAAW,EAChCS,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAxF,EAAAA,IAAC8F,EAAA,CAAc,UAAU,uCAAuC,QAC/D,IAAA,CAAE,UAAU,2CAA4C,SAAA,EAAE,oCAAoC,CAAA,CAAE,CAAA,EACnG,EAEAN,EAAAA,KAAAO,EAAAA,SAAA,CACG,SAAA,CAAAhB,EAAsB,IAAKjC,GAC1B9C,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMkB,EAAwB4B,CAAY,EACnD,UAAW,+GACT7B,GAAA,YAAAA,EAAsB,MAAO6B,EAAa,GAAK,eAAiB,EAClE,IAAIA,EAAa,SAAW,yCAA2CA,EAAa,UAAY,8BAAgC,EAAE,GAElI,SAAA0C,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAxF,EAAAA,IAAC,MAAA,CAAI,UAAW,aAAaC,EAAa6C,EAAa,OAAO,EAAE,EAAE,4DAC/D,SAAAA,EAAa,eACZ9C,EAAAA,IAAC,OAAI,IAAK8C,EAAa,eAAgB,IAAI,GAAG,UAAU,yCAAA,CAA0C,EAElG9C,EAAAA,IAACgG,EAAA,CAAK,UAAU,SAAA,CAAU,EAE9B,QACC,MAAA,CAAI,UAAW,uCAAuC/F,EAAa6C,EAAa,OAAO,EAAE,EAAE,kFACzF,SAAA7C,EAAa6C,EAAa,OAAO,EAAE,KACtC,CAAA,EACF,EAGA0C,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAxF,EAAAA,IAAC,KAAA,CAAG,UAAU,kEACX,SAAA8C,EAAa,aAChB,EACCA,EAAa,WACZ9C,EAAAA,IAACyF,EAAA,CAAY,UAAU,uCAAuC,aAAY,EAAE,yBAAyB,CAAA,CAAG,CAAA,EAE5G,QACC,OAAA,CAAK,UAAU,8DACb,SAAAzB,EAAWlB,EAAa,eAAe,CAAA,CAC1C,CAAA,EACF,EACA9C,EAAAA,IAAC,IAAA,CAAE,UAAU,oDACV,WAAa,YAChB,EAEAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAEZ,SAAA,CAAA1C,EAAa,UACZ0C,OAAC,OAAA,CAAK,UAAU,gHACd,SAAA,CAAAxF,EAAAA,IAACJ,EAAA,CAAU,UAAU,UAAU,EAC9B,EAAE,6BAA6B,CAAA,EAClC,EAIDkD,EAAa,YAAc,CAACA,EAAa,iBACvC,OAAA,CAAK,UAAU,8GACd,SAAA,CAAA9C,EAAAA,IAACF,EAAA,CAAc,UAAU,wBAAwB,EAChD,EAAE,+BAA+B,EAAE,KAAGsF,EAAmBtC,EAAa,cAAgB,CAAC,CAAA,EAC1F,EAGDA,EAAa,YAAc,GAC1B0C,EAAAA,KAAC,OAAA,CAAK,UAAU,kHACb,SAAA,CAAA1C,EAAa,YAAY,IAAE,EAAE,mCAAoC,CAAE,MAAOA,EAAa,YAAa,CAAA,EACvG,EAEDA,EAAa,WAAa,CAACA,EAAa,mBACtC,OAAA,CAAK,UAAU,4GACd,SAAA,CAAA9C,EAAAA,IAAC6F,EAAA,CAAU,UAAU,UAAU,EAC9B/C,EAAa,eAAiB,EAAE,sCAAsC,CAAA,EACzE,EAEDA,EAAa,aAAe,MAAQ,CAACA,EAAa,WAAa,CAACA,EAAa,YAC5E0C,EAAAA,KAAC,OAAA,CAAK,UAAU,0GACd,SAAA,CAAAxF,EAAAA,IAAC4F,EAAA,CAAQ,UAAU,UAAU,EAC5B,EAAE,yBAAyB,CAAA,EAC9B,CAAA,EAEJ,CAAA,EACF,CAAA,EACF,CAAA,EA5EK9C,EAAa,EAAA,CA8ErB,EAGAtC,IAAc,QAAU6B,IACvBrC,EAAAA,IAAC,SAAA,CACC,QAASwD,GACT,UAAU,kGAET,WAAE,wBAAwB,CAAA,CAAA,CAC7B,CAAA,CAEJ,CAAA,CAEJ,EACF,QAGC,MAAA,CAAI,UAAW,oHACd3B,EAAe,kCAAoC,EACrD,GACG,SAAAZ,EACCuE,OAAC,OAAI,UAAW,iBACd3D,EAAe,WAAa,iDAC9B,GAEE,SAAA,CAAA7B,EAAAA,IAAC,OAAI,UAAU,wFACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,OAAC,MAAA,CAAI,UAAW,aAAavF,EAAagB,EAAqB,OAAO,EAAE,EAAE,4DACxE,eAAC+E,EAAA,CAAK,UAAU,SAAA,CAAU,EAC5B,QACC,MAAA,CAAI,UAAW,2CAA2C/F,EAAagB,EAAqB,OAAO,EAAE,EAAE,kFACtG,eAAC,MAAA,CAAI,UAAU,WACZ,SAAAhB,EAAagB,EAAqB,OAAO,EAAE,IAAA,CAC9C,CAAA,CACF,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAjB,EAAAA,IAAC,KAAA,CAAG,UAAU,iDAAkD,SAAAiB,EAAqB,aAAa,EAClGuE,EAAAA,KAAC,IAAA,CAAE,UAAU,mEACX,SAAA,CAAAxF,EAAAA,IAACiG,EAAA,CAAM,UAAU,UAAU,EAC1B,EAAE,wCAAwC,EAAE,IAAEjC,EAAW/C,EAAqB,eAAe,CAAA,EAChG,CAAA,EACF,CAAA,EACF,EAEAuE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEZ,SAAA,CAAAvE,EAAqB,YACpBuE,EAAAA,KAAC,SAAA,CACC,UAAW,iFACTvE,EAAqB,SACjB,uDACA,8CACN,GAEA,SAAA,CAAAjB,EAAAA,IAACJ,EAAA,CAAU,UAAU,UAAU,EAC9BqB,EAAqB,SAAW,EAAE,sCAAsC,EAAI,EAAE,gCAAgC,CAAA,CAAA,CAAA,EAKnHuE,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM5D,EAAmB,EAAI,EACtC,UAAU,+OAEV,SAAA,CAAA5B,EAAAA,IAACkG,GAAA,CAAM,UAAU,UAAU,EAC1B,EAAE,8BAA8B,CAAA,CAAA,CAAA,EAGnClG,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0B,EAAoB,EAAI,EACvC,UAAU,iNAET,WAAE,mCAAmC,CAAA,CAAA,EAIxC1B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8B,EAAgB,CAACD,CAAY,EAC5C,UAAU,8GACV,MAAsB,EAAfA,EAAiB,gCAAqC,gCAAN,EAEtD,SAAAA,QAAgBsE,GAAA,CAAU,UAAU,SAAA,CAAU,EAAKnG,EAAAA,IAACoG,GAAA,CAAU,UAAU,UAAU,CAAA,CAAA,CACrF,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAGCnF,EAAqB,UACpBjB,EAAAA,IAAC,MAAA,CAAI,UAAU,+EACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAxF,EAAAA,IAACJ,EAAA,CAAU,UAAU,2DAA2D,EAChF4F,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAxF,MAAC,KAAA,CAAG,UAAU,sCAAuC,SAAA,EAAE,kCAAkC,EAAE,QAC1F,IAAA,CAAE,UAAU,uBACV,SAAA,EAAE,oCAAoC,EACzC,EACAwF,EAAAA,KAAC,IAAA,CAAE,UAAU,oDACX,SAAA,CAAAxF,EAAAA,IAACiG,EAAA,CAAM,UAAU,UAAU,EAC1B,EAAE,yCAAyC,EAAE,UAAE,SAAA,CAAQ,SAAAb,EAAmBnE,EAAqB,cAAgB,CAAC,CAAA,CAAE,CAAA,EACrH,CAAA,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAIDA,EAAqB,YAAc,CAACA,EAAqB,gBACvD,MAAA,CAAI,UAAU,uEACb,SAAAuE,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAxF,EAAAA,IAACF,EAAA,CAAc,UAAU,+CAA+C,EACxE0F,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAxF,MAAC,KAAA,CAAG,UAAU,yCAA0C,SAAA,EAAE,oCAAoC,EAAE,QAC/F,IAAA,CAAE,UAAU,0BACV,SAAAiB,EAAqB,aAAe,KACjC,EAAE,wCAAwC,EAC1C,EAAE,4CAA6C,CAAE,UAAWA,EAAqB,aAAA,CAAe,EACtG,EACAuE,EAAAA,KAAC,IAAA,CAAE,UAAU,uDACX,SAAA,CAAAxF,EAAAA,IAACiG,EAAA,CAAM,UAAU,UAAU,EAC1B,EAAE,yCAAyC,EAAE,UAAE,SAAA,CAAQ,SAAAb,EAAmBnE,EAAqB,cAAgB,CAAC,CAAA,CAAE,CAAA,EACrH,CAAA,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAIDA,EAAqB,WAAaA,EAAqB,eAAiB,CAACA,EAAqB,YAC7FjB,EAAAA,IAAC,MAAA,CAAI,UAAU,gHACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAxF,EAAAA,IAACyF,EAAA,CAAY,UAAU,kEAAkE,EACzFD,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAxF,MAAC,KAAA,CAAG,UAAU,4DAA6D,SAAA,EAAE,mCAAmC,EAAE,EAClHA,EAAAA,IAAC,IAAA,CAAE,UAAU,6CAA8C,WAAqB,cAAc,EAC7FiB,EAAqB,eACpBuE,OAAC,IAAA,CAAE,UAAU,0EACX,SAAA,CAAAxF,EAAAA,IAAC6F,EAAA,CAAU,UAAU,UAAU,QAC9B,SAAA,CAAQ,SAAA5E,EAAqB,cAAc,EAAS,IAAE,EAAE,uCAAuC,CAAA,EAClG,CAAA,EAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAIFjB,EAAAA,IAAC,OAAI,UAAU,uCACZ,WAAqB,SAAS,IAAI,CAACqG,EAASC,IAC3CtG,EAAAA,IAAC,MAAA,CAEC,UAAW,QAAQqG,EAAQ,SAAW,QAAU,cAAgB,eAAe,GAE/E,SAAAb,EAAAA,KAAC,OAAI,UAAW,eAAea,EAAQ,SAAW,QAAU,UAAY,SAAS,GAE9E,SAAA,CAAAA,EAAQ,mBACPb,EAAAA,KAAC,MAAA,CAAI,UAAW,wCACda,EAAQ,SAAW,QAAU,cAAgB,eAC/C,GACE,SAAA,CAAArG,EAAAA,IAACuG,GAAA,CAAI,UAAU,0BAA0B,QACxC,OAAA,CAAK,UAAU,8BAA+B,SAAA,EAAE,sCAAsC,EAAE,EACxFF,EAAQ,eACPb,OAAC,OAAA,CAAK,UAAU,mCAAmC,SAAA,CAAA,IAAEJ,EAAmBiB,EAAQ,aAAa,EAAE,GAAA,EAAC,CAAA,EAEpG,EAGFrG,EAAAA,IAAC,MAAA,CACC,UAAW,2BACTqG,EAAQ,SAAW,QACfA,EAAQ,kBACN,yCACA,yCACFA,EAAQ,kBACN,oIACA,8EACR,GAEA,eAAC,IAAA,CAAE,UAAU,UAAW,WAAQ,IAAA,CAAK,CAAA,CAAA,EAEvCb,EAAAA,KAAC,OAAI,UAAW,qCAAqCa,EAAQ,SAAW,QAAU,cAAgB,eAAe,GAC/G,SAAA,OAAC,IAAA,CAAE,UAAU,wBACV,SAAAA,EAAQ,UAAU,mBAAmB,QAAS,CAAE,KAAM,UAAW,OAAQ,SAAA,CAAW,EACvF,EACCA,EAAQ,SAAW,SAAWA,EAAQ,WACrCb,OAAAO,EAAAA,SAAA,CACE,SAAA,OAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,IAAC,EACzC/F,EAAAA,IAAC,IAAA,CAAE,UAAU,uDACV,WAAQ,UACX,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,CAAA,EA3CKqG,EAAQ,EAAA,CA6ChB,EACH,EAGAb,EAAAA,KAAC,MAAA,CAAI,UAAU,yFAEZ,SAAA,CAAAnE,EAAY,OAAS,GACpBrB,EAAAA,IAAC,MAAA,CAAI,UAAU,+CACZ,SAAAqB,EAAY,IAAI,CAACmF,EAAM7B,IACtBa,EAAAA,KAAC,MAAA,CAEC,UAAU,mKAET,SAAA,CAAAgB,EAAK,KAAK,WAAW,QAAQ,SAAMC,EAAA,CAAM,UAAU,oDAAoD,EACvGD,EAAK,KAAK,WAAW,QAAQ,SAAME,EAAA,CAAM,UAAU,sDAAsD,EACzG,CAACF,EAAK,KAAK,WAAW,QAAQ,GAAK,CAACA,EAAK,KAAK,WAAW,QAAQ,GAChExG,EAAAA,IAAC2G,EAAA,CAAS,UAAU,uEAAuE,EAE7F3G,EAAAA,IAAC,OAAA,CAAK,UAAU,mFACb,WAAK,KACR,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0E,GAAiBC,CAAK,EACrC,UAAU,wEACV,aAAY,GAAG6B,EAAK,IAAI,oBAExB,SAAAxG,EAAAA,IAAC4G,EAAA,CAAE,UAAU,UAAU,CAAA,CAAA,CACzB,CAAA,EAjBKjC,CAAA,CAmBR,EACH,EAGFa,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAxF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMwB,EAAsB,CAACD,CAAkB,EACxD,UAAU,kJACV,MAAO,EAAE,uBAAuB,EAChC,aAAY,EAAE,uBAAuB,EAErC,SAAAvB,EAAAA,IAAC6G,GAAA,CAAU,UAAU,wBAAwB,CAAA,CAAA,EAG9CtF,GACCiE,EAAAA,KAAC,MAAA,CAAI,UAAU,mKACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMlB,EAAiB,OAAO,EACvC,UAAU,8JAEV,SAAA,CAAAtE,EAAAA,IAACyG,EAAA,CAAM,UAAU,oDAAoD,QACpE,OAAA,CAAK,UAAU,mCAAoC,SAAA,EAAE,iCAAiC,CAAA,CAAE,CAAA,CAAA,CAAA,EAE3FjB,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMlB,EAAiB,OAAO,EACvC,UAAU,8JAEV,SAAA,CAAAtE,EAAAA,IAAC0G,EAAA,CAAM,UAAU,sDAAsD,QACtE,OAAA,CAAK,UAAU,mCAAoC,SAAA,EAAE,iCAAiC,CAAA,CAAE,CAAA,CAAA,CAAA,EAE3FlB,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMlB,EAAiB,MAAM,EACtC,UAAU,8JAEV,SAAA,CAAAtE,EAAAA,IAAC2G,EAAA,CAAS,UAAU,uEAAuE,QAC1F,OAAA,CAAK,UAAU,mCAAoC,SAAA,EAAE,gCAAgC,CAAA,CAAE,CAAA,CAAA,CAAA,CAC1F,EACF,CAAA,EAEJ,EAGA3G,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOmB,EACP,SAAWyB,GAAMxB,EAAgBwB,EAAE,OAAO,KAAK,EAC/C,WAAaA,GAAM,CACbA,EAAE,MAAQ,SAAW,CAACA,EAAE,WAC1BA,EAAE,eAAA,EACFiC,EAAA,EAEJ,EACA,YAAa,EAAE,kCAAkC,EACjD,UAAU,qOAAA,CAAA,EAIZW,EAAAA,KAAC,SAAA,CACC,QAASX,EACT,SAAU,CAAC1D,EAAa,KAAA,GAAUE,EAAY,SAAW,EACzD,UAAU,mNACV,aAAY,EAAE,2BAA2B,EAEzC,SAAA,CAAArB,EAAAA,IAAC8G,GAAA,CAAK,UAAU,UAAU,QACzB,OAAA,CAAK,UAAU,mBAAoB,SAAA,EAAE,4BAA4B,CAAA,CAAE,CAAA,CAAA,CAAA,CACtE,EACF,CAAA,EACF,CAAA,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,yDACb,SAAAtB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAxF,EAAAA,IAAC8F,EAAA,CAAc,UAAU,uCAAuC,QAC/D,KAAA,CAAG,UAAU,8DAA+D,SAAA,EAAE,+CAA+C,EAAE,QAC/H,IAAA,CAAE,UAAU,2CAA4C,SAAA,EAAE,0CAA0C,CAAA,CAAE,CAAA,CAAA,CACzG,CAAA,CACF,EAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAGCrE,IAAoBR,GACnBjB,EAAAA,IAAC,MAAA,CAAI,UAAU,iFACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,oEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6FACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,OAAC,MAAA,CAAI,UAAW,aAAavF,EAAagB,EAAqB,OAAO,EAAE,EAAE,4DACxE,eAAC+E,EAAA,CAAK,UAAU,SAAA,CAAU,EAC5B,SACC,MAAA,CACC,SAAA,CAAAhG,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA8C,SAAAiB,EAAqB,aAAa,EAC9FuE,EAAAA,KAAC,IAAA,CAAE,UAAU,8EACV,SAAA,CAAAvF,EAAagB,EAAqB,OAAO,EAAE,WAC3C,OAAA,CAAK,UAAU,OAAQ,SAAAA,EAAqB,UAAY,MAAQ,aAAeA,EAAqB,QAAQ,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAqB,QAAQ,MAAM,CAAC,CAAA,CAAE,CAAA,EAC/K,CAAA,EACF,CAAA,EACF,EACAjB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0B,EAAoB,EAAK,EACxC,UAAU,2JAEV,SAAA1B,EAAAA,IAAC4G,EAAA,CAAE,UAAU,UAAU,CAAA,CAAA,CACzB,EACF,EAGApB,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEZ,SAAA,CAAAvE,EAAqB,gBAAgB,WACpCjB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,4KACb,SAAA,CAAAxF,EAAAA,IAACE,GAAA,CAAU,UAAU,gEAAgE,EACrFsF,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAxF,MAAC,IAAA,CAAE,UAAU,wEAAyE,SAAA,EAAE,0CAA0C,EAAE,QACnI,IAAA,CAAE,UAAU,4DAA6D,SAAAiB,EAAqB,gBAAgB,UAAU,SAAS,EAClIuE,EAAAA,KAAC,IAAA,CACC,KAAMvE,EAAqB,gBAAgB,UAAU,WACrD,OAAO,SACP,IAAI,sBACJ,UAAU,mIAET,SAAA,CAAA,EAAE,8CAA8C,EACjDjB,EAAAA,IAAC+G,GAAA,CAAa,UAAU,UAAU,CAAA,CAAA,CAAA,CACpC,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAID9F,EAAqB,gBAAgB,OACpCjB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,2HACb,SAAA,CAAAxF,EAAAA,IAACJ,EAAA,CAAU,UAAU,oEAAoE,EACzF4F,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAxF,MAAC,IAAA,CAAE,UAAU,wEAAyE,SAAA,EAAE,oCAAoC,EAAE,QAC7H,IAAA,CAAE,UAAU,4DAA6D,SAAAiB,EAAqB,gBAAgB,MAAM,YAAY,EACjIuE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CACC,KAAM,OAAOvE,EAAqB,gBAAgB,MAAM,YAAY,QAAQ,OAAQ,EAAE,CAAC,GACvF,UAAU,2IAET,SAAA,CAAA,EAAE,kCAAkC,EACrCjB,EAAAA,IAACgH,EAAA,CAAM,UAAU,UAAU,CAAA,CAAA,CAAA,EAE5B/F,EAAqB,YACpBuE,OAAC,OAAA,CAAK,UAAU,uJACd,SAAA,CAAAxF,EAAAA,IAACF,EAAA,CAAc,UAAU,wBAAwB,EAChD,EAAE,sCAAsC,CAAA,EAC3C,CAAA,EAEJ,CAAA,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAIDmB,EAAqB,gBAAgB,UACpCjB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,uHACb,SAAA,CAAAxF,EAAAA,IAACgH,EAAA,CAAM,UAAU,kEAAkE,EACnFxB,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAxF,MAAC,IAAA,CAAE,UAAU,wEAAyE,SAAA,EAAE,uCAAuC,EAAE,QAChI,IAAA,CAAE,UAAU,4DAA6D,SAAAiB,EAAqB,gBAAgB,SAAS,YAAY,EACpIuE,EAAAA,KAAC,IAAA,CACC,KAAM,OAAOvE,EAAqB,gBAAgB,SAAS,YAAY,QAAQ,OAAQ,EAAE,CAAC,GAC1F,UAAU,uIAET,SAAA,CAAA,EAAE,qCAAqC,EACxCjB,EAAAA,IAACgH,EAAA,CAAM,UAAU,UAAU,CAAA,CAAA,CAAA,CAC7B,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAID/F,EAAqB,gBAAgB,UACpCjB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,mHACb,SAAA,CAAAxF,EAAAA,IAACG,GAAA,CAAS,UAAU,gEAAgE,EACpFqF,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAxF,MAAC,IAAA,CAAE,UAAU,wEAAyE,SAAA,EAAE,wCAAwC,EAAE,QACjI,IAAA,CAAE,UAAU,4DAA6D,SAAAiB,EAAqB,gBAAgB,SAAS,KAAK,EAC7HuE,EAAAA,KAAC,IAAA,CACC,KAAMvE,EAAqB,gBAAgB,SAAS,WACpD,OAAO,SACP,IAAI,sBACJ,UAAU,mIAET,SAAA,CAAA,EAAE,6CAA6C,EAChDjB,EAAAA,IAAC+G,GAAA,CAAa,UAAU,UAAU,CAAA,CAAA,CAAA,CACpC,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAID9F,EAAqB,gBAAgB,KACpCjB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,8GACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAxF,EAAAA,IAACI,GAAA,CAAM,UAAU,+CAA+C,QAC/D,IAAA,CAAE,UAAU,qDAAsD,SAAA,EAAE,iCAAiC,CAAA,CAAE,CAAA,EAC1G,EAEAoF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAxF,MAAC,IAAA,CAAE,UAAU,wEAAyE,SAAA,EAAE,oCAAoC,EAAE,EAC9HwF,EAAAA,KAAC,IAAA,CAAE,UAAU,uDACV,SAAA,CAAAvE,EAAqB,gBAAgB,IAAI,UAAU,IAAEA,EAAqB,gBAAgB,IAAI,QAAA,EACjG,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAuE,EAAAA,KAAC,IAAA,CAAE,UAAU,gGACX,SAAA,CAAAxF,EAAAA,IAACiH,GAAA,CAAK,UAAU,UAAU,EACzB,EAAE,iCAAiC,CAAA,EACtC,EACAjH,EAAAA,IAAC,IAAA,CACC,KAAM,UAAUiB,EAAqB,gBAAgB,IAAI,KAAK,GAC9D,UAAU,4GAET,SAAAA,EAAqB,gBAAgB,IAAI,KAAA,CAAA,CAC5C,EACF,EAECA,EAAqB,gBAAgB,IAAI,oBACvC,MAAA,CACC,SAAA,CAAAuE,EAAAA,KAAC,IAAA,CAAE,UAAU,gGACX,SAAA,CAAAxF,EAAAA,IAACgH,EAAA,CAAM,UAAU,UAAU,EAC1B,EAAE,yCAAyC,CAAA,EAC9C,EACAhH,EAAAA,IAAC,IAAA,CACC,KAAM,OAAOiB,EAAqB,gBAAgB,IAAI,YAAY,QAAQ,OAAQ,EAAE,CAAC,GACrF,UAAU,4GAET,SAAAA,EAAqB,gBAAgB,IAAI,WAAA,CAAA,CAC5C,EACF,CAAA,EAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,EAGAjB,EAAAA,IAAC,MAAA,CAAI,UAAU,sGACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0B,EAAoB,EAAK,EACxC,UAAU,uGAET,WAAE,6BAA6B,CAAA,CAAA,EAEpC,CAAA,CAAA,CACF,CAAA,CACF,EAIDC,IAAmBV,GAClBjB,EAAAA,IAAC,MAAA,CAAI,UAAU,uFACb,SAAAwF,EAAAA,KAAC,MAAA,CAAI,UAAU,mEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6FACb,SAAA,CAAAxF,MAAC,KAAA,CAAG,UAAU,kDACX,SAAA,EAAE,iCAAiC,EACtC,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM4B,EAAmB,EAAK,EACvC,UAAU,6EAEV,SAAA5B,EAAAA,IAAC4G,EAAA,CAAE,UAAU,2CAA2C,CAAA,CAAA,CAC1D,EACF,EAGA5G,MAAC,MAAA,CAAI,UAAU,gBACb,gBAAC,MAAA,CACC,SAAA,CAAAA,MAAC,MAAA,CAAI,UAAU,kEACZ,SAAA,EAAE,uCAAuC,EAC5C,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CACC,CAAE,GAAI,IAAK,KAAM,cAAe,OAAQ,KAAM,OAAQ,SAAU,cAAe,CAAA,EAC/E,CAAE,GAAI,IAAK,KAAM,cAAe,OAAQ,KAAM,OAAQ,SAAU,cAAe,CAAA,EAC/E,CAAE,GAAI,IAAK,KAAM,eAAgB,OAAQ,KAAM,OAAQ,OAAQ,cAAe,CAAA,EAC9E,CAAE,GAAI,IAAK,KAAM,aAAc,OAAQ,KAAM,OAAQ,UAAW,cAAe,CAAA,CAAE,EACjF,IAAKkH,GACL1B,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM,CACb,MAAM,EAAE,2BAA4B,CAAE,KAAM0B,EAAM,IAAA,CAAM,CAAC,EACzDtF,EAAmB,EAAK,CAC1B,EACA,UAAU,kKAEV,SAAA,CAAA4D,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAxF,EAAAA,IAAC,MAAA,CAAI,UAAU,WAAY,SAAAkH,EAAM,OAAO,EACxC1B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAxF,EAAAA,IAAC,MAAA,CAAI,UAAU,4CAA6C,SAAAkH,EAAM,KAAK,EACvE1B,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACZ,SAAA,CAAA0B,EAAM,cAAc,IAAE,EAAE,gDAAiD,CAAE,MAAOA,EAAM,cAAe,CAAA,EAC1G,CAAA,EACF,CAAA,EACF,EACAlH,EAAAA,IAAC,MAAA,CAAI,UAAW,wBACdkH,EAAM,SAAW,SAAW,eAC5BA,EAAM,SAAW,OAAS,gBAC1B,aACF,GAAI,CAAA,CAAA,EApBCA,EAAM,EAAA,CAsBd,EACH,CAAA,CAAA,CACF,CAAA,CACF,EAGAlH,EAAAA,IAAC,MAAA,CAAI,UAAU,sGACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM4B,EAAmB,EAAK,EACvC,UAAU,sLAET,WAAE,8BAA8B,CAAA,CAAA,EAErC,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,CAEJ","x_google_ignoreList":[0,1]}