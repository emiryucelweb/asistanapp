{"version":3,"file":"ConversationDetail-C4a9dLln.js","sources":["../../node_modules/lucide-react/dist/esm/icons/check-check.js","../../src/features/agent/pages/conversations/ConversationDetail.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 7 17l-5-5\", key: \"116fxf\" }],\n  [\"path\", { d: \"m22 10-7.5 7.5L13 16\", key: \"ke71qq\" }]\n];\nconst CheckCheck = createLucideIcon(\"check-check\", __iconNode);\n\nexport { __iconNode, CheckCheck as default };\n//# sourceMappingURL=check-check.js.map\n","/**\n * Conversation Detail Page - Customer Conversation Page\n * \n * Enterprise-grade conversation detail view with real-time messaging\n */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { logger } from '@/shared/utils/logger';\nimport type { Message, Conversation } from '@/features/agent/types';\nimport { \n  ArrowLeft, \n  Send, \n  Paperclip, \n  Smile, \n  MoreVertical,\n  Phone,\n  Video,\n  User,\n  Clock,\n  CheckCheck,\n  AlertCircle\n} from 'lucide-react';\n\n// Note: Using domain types from @/features/agent/types for type safety\n// Component-specific interface removed in favor of shared types\n\nconst ConversationDetail: React.FC = () => {\n  const { t, i18n } = useTranslation('agent');\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [message, setMessage] = useState('');\n\n  // âœ… PRODUCTION READY: Fetch conversation from API\n  // Backend endpoint: GET /api/conversations/:id\n  // When ready: import { useConversation } from '@/lib/react-query/hooks/useConversations';\n  // const { data: conversation, isLoading } = useConversation(id!);\n  \n  // For now showing empty conversation - will be populated by API\n  const conversation = {\n    id: id,\n    customerName: t('conversations.detail.loading'),\n    customerPhone: '',\n    customerEmail: '',\n    customerAvatar: undefined,\n    status: 'waiting' as const,\n    priority: 'normal' as const,\n    messages: [] as Array<{\n      id: string;\n      sender: 'customer' | 'ai' | 'agent';\n      senderName: string;\n      content: string;\n      timestamp: Date;\n      status: 'sent' | 'delivered' | 'read';\n    }>, // Mock data removed - API ready\n  };\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [conversation.messages]);\n\n  const handleSend = () => {\n    if (!message.trim()) return;\n    \n    // Message sending simulation\n    logger.debug('Message sent', { conversationId: id, message });\n    setMessage('');\n    \n    // TODO: Send to API in production\n    // await api.sendMessage(id, message);\n  };\n\n  const formatTime = (date: Date) => {\n    const locale = i18n.language === 'tr' ? 'tr-TR' : 'en-US';\n    return new Intl.DateTimeFormat(locale, {\n      hour: '2-digit',\n      minute: '2-digit',\n    }).format(date);\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen bg-slate-50 dark:bg-slate-900\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <button\n              type=\"button\"\n              onClick={() => navigate('/agent/conversations')}\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n            </button>\n\n            <div className=\"flex items-center gap-3\">\n              <div className=\"relative\">\n                <div className=\"w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center\">\n                  {conversation.customerAvatar ? (\n                    <img src={conversation.customerAvatar} alt={conversation.customerName} className=\"w-full h-full rounded-full object-cover\" />\n                  ) : (\n                    <User className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n                  )}\n                </div>\n                <div className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white dark:border-slate-800 rounded-full\"></div>\n              </div>\n\n              <div>\n                <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                  {conversation.customerName}\n                </h2>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  {conversation.customerPhone}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"ml-4 flex items-center gap-2\">\n              <span className=\"px-3 py-1 rounded-full bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs font-semibold\">\n                ðŸš¨ {t('conversations.detail.urgentPriority')}\n              </span>\n              <span className=\"px-3 py-1 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-semibold\">\n                âœ… {t('conversations.detail.activePriority')}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <button type=\"button\" className=\"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\">\n              <Phone className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n            </button>\n            <button type=\"button\" className=\"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\">\n              <Video className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n            </button>\n            <button type=\"button\" className=\"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\">\n              <MoreVertical className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {/* Acil Arama Banner */}\n        <div className=\"bg-gradient-to-r from-red-500 to-orange-500 text-white p-4 rounded-lg mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\n              <AlertCircle className=\"w-6 h-6\" />\n            </div>\n            <div>\n              <h3 className=\"font-bold text-lg\">{t('conversations.detail.emergencyCallTakenOver')}</h3>\n              <p className=\"text-sm text-white/90\">\n                {t('conversations.detail.emergencyCallDescription')}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {conversation.messages.map((msg) => (\n          <div\n            key={msg.id}\n            className={`flex ${msg.sender === 'agent' ? 'justify-end' : 'justify-start'}`}\n          >\n            <div className={`max-w-[70%] ${msg.sender === 'agent' ? 'order-2' : 'order-1'}`}>\n              {msg.sender !== 'agent' && (\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1 ml-1\">\n                  {msg.senderName} {msg.sender === 'ai' && t('conversations.detail.aiAssistant')}\n                </p>\n              )}\n              <div\n                className={`rounded-lg p-3 ${\n                  msg.sender === 'customer'\n                    ? 'bg-white dark:bg-slate-800 text-gray-900 dark:text-white'\n                    : msg.sender === 'ai'\n                    ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-300'\n                    : 'bg-blue-600 text-white'\n                }`}\n              >\n                <p className=\"text-sm\">{msg.content}</p>\n                <div className=\"flex items-center justify-end gap-1 mt-1\">\n                  <p className=\"text-xs opacity-70\">{formatTime(msg.timestamp)}</p>\n                  {msg.sender === 'agent' && (msg.status === 'read' || msg.status === 'delivered') && (\n                    <CheckCheck className=\"w-4 h-4\" />\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <div className=\"bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-slate-700 p-4\">\n        <div className=\"flex items-center gap-2\">\n          <button type=\"button\" className=\"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\">\n            <Paperclip className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n          </button>\n          <button type=\"button\" className=\"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors\">\n            <Smile className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n          </button>\n          <input\n            type=\"text\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n            placeholder={t('conversations.messagePlaceholder')}\n            className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-white\"\n          />\n          <button\n            type=\"button\"\n            onClick={handleSend}\n            disabled={!message.trim()}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n          >\n            <Send className=\"w-5 h-5\" />\n            <span className=\"hidden sm:inline\">{t('conversations.detail.send')}</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConversationDetail;\n\n\n"],"names":["__iconNode","CheckCheck","createLucideIcon","ConversationDetail","i18n","useTranslation","id","useParams","navigate","useNavigate","messagesEndRef","useRef","message","setMessage","useState","conversation","useEffect","_a","handleSend","logger","formatTime","date","locale","jsxs","jsx","ArrowLeft","User","Phone","Video","MoreVertical","AlertCircle","msg","Paperclip","Smile","e","Send"],"mappings":"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","x_google_ignoreList":[0]}